<!DOCTYPE html>
<html lang="">
    <!-- title -->




<!-- keywords -->




<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="骑麦兜看落日">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="骑麦兜看落日">
    
    <meta name="keywords" content="Hexo,骑麦兜看落日">
    
    <meta name="description" content>
    <meta http-equiv="Cache-control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>[Code]Python学习手册_第二部分_类型和运算 · 骑麦兜看落日&#39;s Blog</title>
    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s infinite;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }

</style>

    <link rel="preload" href="/css/style.css?v=20180824" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="/css/mobile.css?v=20180824" media="(max-width: 980px)">
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
(function( w ){
	"use strict";
	// rel=preload support test
	if( !w.loadCSS ){
		w.loadCSS = function(){};
	}
	// define on the loadCSS obj
	var rp = loadCSS.relpreload = {};
	// rel=preload feature support test
	// runs once and returns a function for compat purposes
	rp.support = (function(){
		var ret;
		try {
			ret = w.document.createElement( "link" ).relList.supports( "preload" );
		} catch (e) {
			ret = false;
		}
		return function(){
			return ret;
		};
	})();

	// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
	// then change that media back to its intended value on load
	rp.bindMediaToggle = function( link ){
		// remember existing media attr for ultimate state, or default to 'all'
		var finalMedia = link.media || "all";

		function enableStylesheet(){
			link.media = finalMedia;
		}

		// bind load handlers to enable media
		if( link.addEventListener ){
			link.addEventListener( "load", enableStylesheet );
		} else if( link.attachEvent ){
			link.attachEvent( "onload", enableStylesheet );
		}

		// Set rel and non-applicable media type to start an async request
		// note: timeout allows this to happen async to let rendering continue in IE
		setTimeout(function(){
			link.rel = "stylesheet";
			link.media = "only x";
		});
		// also enable media after 3 seconds,
		// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
		setTimeout( enableStylesheet, 3000 );
	};

	// loop through link elements in DOM
	rp.poly = function(){
		// double check this to prevent external calls from running
		if( rp.support() ){
			return;
		}
		var links = w.document.getElementsByTagName( "link" );
		for( var i = 0; i < links.length; i++ ){
			var link = links[ i ];
			// qualify links to those with rel=preload and as=style attrs
			if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
				// prevent rerunning on link
				link.setAttribute( "data-loadcss", true );
				// bind listeners to toggle media back
				rp.bindMediaToggle( link );
			}
		}
	};

	// if unsupported, run the polyfill
	if( !rp.support() ){
		// run once at least
		rp.poly();

		// rerun poly on an interval until onload
		var run = w.setInterval( rp.poly, 500 );
		if( w.addEventListener ){
			w.addEventListener( "load", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		} else if( w.attachEvent ){
			w.attachEvent( "onload", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		}
	}


	// commonjs
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ) );
</script>

    <link rel="icon" href="/assets/favicon.ico">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js" as="script">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" as="script">
    <link rel="preload" href="/scripts/main.js" as="script">
    <link rel="preload" as="font" href="/font/Oswald-Regular.ttf" crossorigin>
    <link rel="preload" as="font" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" crossorigin>
    
        <!-- algolia -->
        <script>
            
            var hits = JSON.parse('{"per_page":10}')
            var labels = JSON.parse('{"input_placeholder":"Search for Posts","hits_empty":"We did not find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}')

            var algolia = {
                applicationID: '5D5KDIMZEQ',
                apiKey: 'b4ec67c101aa9269e65e640e2e469343',
                indexName: 'my_index',
                hits: hits,
                labels: labels
            }
        </script>
    
    <!-- fancybox -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script>
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
</head>

    
        <body class="post-body">
    
    
<header class="header">

    <div class="read-progress"></div>
    <div class="header-sidebar-menu">&#xe775;</div>
    <!-- post页的toggle banner  -->
    
    <div class="banner">
            <div class="blog-title">
                <a href="/" >骑麦兜看落日.</a>
            </div>
            <div class="post-title">
                <a href="#" class="post-name">[Code]Python学习手册_第二部分_类型和运算</a>
            </div>
    </div>
    
    <a class="home-link" href=/>骑麦兜看落日.</a>
</header>
    <div class="wrapper">
        <div class="site-intro" style="







height:30vh;
">
    
    <!-- 主页  -->
    
    
    <!-- 404页  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/post-bg.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
            [Code]Python学习手册_第二部分_类型和运算
            <!-- 404 -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
            
            <!-- 404 -->
            
        </p>
        <!-- 文章页meta -->
        
            <div class="post-intros">
                <!-- 文章页标签  -->
                
                    <div class= post-intro-tags >
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "Note">Note</a>
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "Code">Code</a>
    
        <a class="post-tag" href="javascript:void(0);" data-tags = "Python">Python</a>
    
</div>
                
                
                    <div class="post-intro-read">
                        <span>字数统计: <span class="post-count word-count">38.3k</span>阅读时长: <span class="post-count reading-time">171 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <span class="post-intro-calander iconfont-archer">&#xe676;</span>
                    <span class="post-intro-time">2018/07/24</span>
                    
                    <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                        <span class="iconfont-archer">&#xe602;</span>
                        <span id="busuanzi_value_page_pv"></span>
                    </span>
                    
                    <span class="shareWrapper">
                        <span class="iconfont-archer shareIcon">&#xe71d;</span>
                        <span class="shareText">Share</span>
                        <ul class="shareList">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div>
        <script>
 
  // get user agent
  var browser = {
    versions: function () {
      var u = window.navigator.userAgent;
      return {
        userAgent: u,
        trident: u.indexOf('Trident') > -1, //IE内核
        presto: u.indexOf('Presto') > -1, //opera内核
        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
        iPad: u.indexOf('iPad') > -1, //是否为iPad
        webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
        weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
        uc: u.indexOf('UCBrowser') > -1 //是否为android下的UC浏览器
      };
    }()
  }
  console.log("userAgent:" + browser.versions.userAgent);

  // callback
  function fontLoaded() {
    console.log('font loaded');
    if (document.getElementsByClassName('site-intro-meta')) {
      document.getElementsByClassName('intro-title')[0].classList.add('intro-fade-in');
      document.getElementsByClassName('intro-subtitle')[0].classList.add('intro-fade-in');
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in');
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb(){
    if (browser.versions.uc) {
      console.log("UCBrowser");
      fontLoaded();
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular']
        },
        loading: function () {  //所有字体开始加载
          // console.log('loading');
        },
        active: function () {  //所有字体已渲染
          fontLoaded();
        },
        inactive: function () { //字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout');
          fontLoaded();
        },
        timeout: 5000 // Set the timeout to two seconds
      });
    }
  }

  function asyncErr(){
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (cb) { o.addEventListener('load', function (e) { cb(null, e); }, false); }
    if (err) { o.addEventListener('error', function (e) { err(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }

  var asyncLoadWithFallBack = function(arr, success, reject) {
      var currReject = function(){
        reject()
        arr.shift()
        if(arr.length)
          async(arr[0], success, currReject)
        }

      async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack([
    "https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js", 
    "https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js",
    "/lib/webfontloader.min.js"
  ], asyncCb, asyncErr)
</script>        
        <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
        <div class="container container-unloaded">
            <main class="main post-page">
    <article class="article-entry">
        <h1 id="第四章-介绍Python对象类型"><a href="#第四章-介绍Python对象类型" class="headerlink" title="第四章 介绍Python对象类型"></a>第四章 介绍Python对象类型</h1><blockquote>
<ul>
<li><p>介绍Python核心对象类型,以及可以对它们进行的一些操作</p>
</li>
<li><p>介绍一些能够用于许多对象类型的一般操作(例如索引和切片的序列操作)</p>
</li>
<li><p>介绍可以作为方法调用的特定类型操作(字符串分隔和列表增加)</p>
</li>
</ul>
</blockquote>
<hr>
<h2 id="为什么使用内置类型"><a href="#为什么使用内置类型" class="headerlink" title="为什么使用内置类型"></a>为什么使用内置类型</h2><blockquote>
<ul>
<li>内置对象使程序更容易编写</li>
<li>内置对象是拓展的组件</li>
<li>内置对象往往比定制的数据结构更有效率</li>
<li>内置对象是语言的标准的一部分</li>
</ul>
</blockquote>
<h3 id="Python的核心数据类型"><a href="#Python的核心数据类型" class="headerlink" title="Python的核心数据类型"></a>Python的核心数据类型</h3><table>
<thead>
<tr>
<th>对象类型</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>数字</td>
<td>1234,3.1415,3+4j,Decimal,Fraction</td>
</tr>
<tr>
<td>字符串</td>
<td>‘spam’,”guido’s”,b’a\xolc’</td>
</tr>
<tr>
<td>列表</td>
<td>[1,[2,’three’],4]</td>
</tr>
<tr>
<td>字典</td>
<td>{‘food’:’spam’,’taste’:’yum’}</td>
</tr>
<tr>
<td>元组</td>
<td>(1,’spam’,4,’U’)</td>
</tr>
<tr>
<td>文件</td>
<td>myfile = open(‘eggs’,’r’)</td>
</tr>
<tr>
<td>集合</td>
<td>set(‘abc’),{‘a’,’b’,’c’}</td>
</tr>
<tr>
<td>其他类型</td>
<td>类型、None、布尔型</td>
</tr>
<tr>
<td>编程单元类型</td>
<td>函数、模块、类</td>
</tr>
<tr>
<td>与实现相关的类型</td>
<td>编译的代码堆栈跟踪</td>
</tr>
</tbody></table>
<p>Python中没有类型声明,运行的表达式的语法决定了创建和使用的对象的类型,一旦创建了一个对象,它就和操作集合绑定了</p>
<p>Python是<strong>动态类型</strong>的(它自动地跟踪你的类型而不是要求声明代码),但是它也是<strong>强类型语言</strong>(你只能对一个对象进行适合该类型的有效操作)</p>
<p>Python变量不需要提前声明,当给一个变量赋值的时候就创建了它,可能赋的是任何类型的对象,在使用变量的值之前必须对其赋值</p>
<hr>
<h2 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h2><p>Python的核心对象集合包括常规的类型:整数(没有小数部分的数字)、浮点数(有小数部分的数字)以及更为少见的类型(有虚部的复数、固定精度的十进制数、带分子和分母的有理分数、集合、布尔值等)</p>
<p>python中的数字支持一般的数学运算，<code>+</code>代表加法,<code>*</code>代表乘法,<code>**</code>表示乘方</p>
<h4 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3.1415</span> * <span class="number">2</span>			<span class="comment"># repr:as code</span></span><br><span class="line"><span class="number">6.2830000000000004</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">3.1415</span> * <span class="number">2</span>)	<span class="comment"># str:user-friendly</span></span><br><span class="line"><span class="number">6.283</span></span><br></pre></td></tr></table></figure>

<h4 id="数学模块"><a href="#数学模块" class="headerlink" title="数学模块"></a>数学模块</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.pi</span><br><span class="line"><span class="number">3.141592653589793</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.sqrt(<span class="number">85</span>)</span><br><span class="line"><span class="number">9.219544457292887</span></span><br></pre></td></tr></table></figure>

<h4 id="random模块"><a href="#random模块" class="headerlink" title="random模块"></a>random模块</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.random()</span><br><span class="line"><span class="number">0.22545967255559085</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.choice([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>序列包含字符串、列表和元组,是一个包含其他对象的有序集合</p>
<p>序列中的元素根据它们的相对位置进行存储和读取</p>
<p>字符串是单个字符的字符串的序列</p>
<h3 id="序列的操作"><a href="#序列的操作" class="headerlink" title="序列的操作"></a>序列的操作</h3><p>序列的操作对于所有的序列都会工作,包括字符串、列表和元组</p>
<h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(S)			<span class="comment"># Length</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">0</span>]			<span class="comment"># The first item in S,indexing by zero-based position</span></span><br><span class="line"><span class="string">'S'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">1</span>]			<span class="comment"># The second item from the left</span></span><br><span class="line"><span class="string">'p'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">-1</span>]			<span class="comment"># The last item from the end in S</span></span><br><span class="line"><span class="string">'m'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[len(S)<span class="number">-1</span>]		<span class="comment"># Negative indexing,the hard way</span></span><br><span class="line"><span class="string">'m'</span></span><br></pre></td></tr></table></figure>

<p>序列支持简单地从位置进行索引</p>
<p>索引是按照从最前面的偏移量进行编码的,第一项索引为0</p>
<p>索引能够反向索引,从最后一个开始,负的索引号会简单地与字符串的长度相加</p>
<p>索引能够在方括号中使用任意表达式</p>
<h4 id="分片"><a href="#分片" class="headerlink" title="分片"></a>分片</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'Spam'</span>	<span class="comment"># A 4-character string</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">1</span>:<span class="number">3</span>]		<span class="comment"># Slice of S from offsets 1 through 2(not 3)</span></span><br><span class="line"><span class="string">'pa'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">1</span>:]		<span class="comment"># Everything past the first(1:len(S))</span></span><br><span class="line"><span class="string">'pam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[:<span class="number">3</span>]		<span class="comment"># Same as S[0:3]</span></span><br><span class="line"><span class="string">'Spa'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[:<span class="number">-1</span>]		<span class="comment"># Everything but the last again,but simpler(0:-1)</span></span><br><span class="line"><span class="string">'Spa'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[:]		<span class="comment"># All of S as a top-level copy(0:len(S))</span></span><br><span class="line"><span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S			<span class="comment"># S itself hasn't changed</span></span><br><span class="line"><span class="string">'Spam'</span></span><br></pre></td></tr></table></figure>

<p>序列支持分片操作</p>
<p>一般形式为<code>X[L:J]</code>,表示取出在X中从偏移量为I,直到但不包括偏移量为J的内容</p>
<p>在一个分片中,左边界默认为0,右边界默认为分片序列的长度</p>
<p>负偏移量为与字符串的长度相加</p>
<p>结果是返回一个新的对象</p>
<h4 id="合并与重复"><a href="#合并与重复" class="headerlink" title="合并与重复"></a>合并与重复</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S + <span class="string">'xyz'</span>		<span class="comment"># concatenation</span></span><br><span class="line"><span class="string">'Spamxyz'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S				<span class="comment"># S is unchanged</span></span><br><span class="line"><span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S * <span class="number">8</span>			<span class="comment"># Repetition</span></span><br><span class="line"><span class="string">'SpamSpamSpamSpamSpamSpamSpamSpam'</span></span><br></pre></td></tr></table></figure>

<p>序列支持使用<code>+</code>进行合并,使用<code>*</code>进行重复</p>
<h3 id="不可变性"><a href="#不可变性" class="headerlink" title="不可变性"></a>不可变性</h3><p>在Python中每一个对象都可以分为不可变性或者可变性</p>
<p>在核心类型中,数字、字符串和元组是不可变的，列表和字典是可变的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">0</span>] = <span class="string">'z'</span>			<span class="comment"># Immutable objects cannot be changed</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">'str'</span> object does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'z'</span> + S[<span class="number">1</span>:]		<span class="comment"># But we can run expressions to make new objects</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'zpam'</span></span><br></pre></td></tr></table></figure>

<p>字符串在Python中具有不可变性,在创建后不能改变</p>
<p>可以通过建立一个新的字符串并以同一个变量名对其进行复制</p>
<h3 id="类型特定的方法"><a href="#类型特定的方法" class="headerlink" title="类型特定的方法"></a>类型特定的方法</h3><p>字符串有独有的一些操作作为方法存在(对象的函数,将会通过一个调用表达式触发)</p>
<p>可作用于多种类型的通用型操作都是以内置函数或表达式的形式出现的</p>
<p>类型特定的操作都是以方法调用的形式出现的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.find(<span class="string">'pa'</span>)			<span class="comment"># Find the offset of a substring</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.replace(<span class="string">'pa'</span>,<span class="string">'XYZ'</span>)	<span class="comment"># Replace occurrences of a substring with another</span></span><br><span class="line"><span class="string">'SXYZm'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.upper()				<span class="comment"># Upper and lowercase conversions</span></span><br><span class="line"><span class="string">'SPAM'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.isalpha()				<span class="comment"># Content tests:isalpha,isdigit,etc.</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = <span class="string">'aaa,bbb,ccccc,dd\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.rstrip()			<span class="comment"># Remove whitespace characters on the right side</span></span><br><span class="line"><span class="string">'aaa,bbb,ccccc,dd'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.split(<span class="string">','</span>)			<span class="comment"># Split on a delimiter into a list of substrings</span></span><br><span class="line">[<span class="string">'aaa'</span>, <span class="string">'bbb'</span>, <span class="string">'cccc'</span>, <span class="string">'dd\n'</span>]</span><br></pre></td></tr></table></figure>

<p><code>find</code>方法是一个基本的子字符串查找的操作(返回一个传入子字符串的偏移量,没有找到的情况下返回-1)</p>
<p><code>replace</code>方法将会对全局进行搜索和替换</p>
<p><code>upper</code>方法进行大写变换</p>
<p><code>isalpha</code>测试字符串的内容是否为字母</p>
<p><code>rstrip</code>方法去掉字符串后的空格字符</p>
<p><code>split</code>方法通过分隔符将字符串拆分为子字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%s,eggs,and %s'</span> % (<span class="string">'spam'</span>,<span class="string">'SPAM!'</span>)			<span class="comment"># Formatting expression(all)</span></span><br><span class="line"><span class="string">'spam,eggs,and SPAM!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0&#125;,eggs,and &#123;1&#125;'</span>.format(<span class="string">'spam'</span>,<span class="string">'SPAM!'</span>)	<span class="comment"># Formatting method</span></span><br><span class="line"><span class="string">'spam,eggs,and SPAM!'</span></span><br></pre></td></tr></table></figure>

<p>字符串支持格式化的高级替代操作</p>
<p>可以以一个表达式的形式和一个字符串方法调用形式使用</p>
<h3 id="寻求帮助"><a href="#寻求帮助" class="headerlink" title="寻求帮助"></a>寻求帮助</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dir(S)</span><br><span class="line">[<span class="string">'__add__'</span>, <span class="string">'__class__'</span>, <span class="string">'__contains__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__dir__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>, <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__getitem__'</span>, <span class="string">'__getnewargs__'</span>, <span class="string">'__gt__'</span>, <span class="string">'__hash__'</span>, <span class="string">'__init__'</span>, <span class="string">'__init_subclass__'</span>, <span class="string">'__iter__'</span>, <span class="string">'__le__'</span>, <span class="string">'__len__'</span>, <span class="string">'__lt__'</span>, <span class="string">'__mod__'</span>, <span class="string">'__mul__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>, <span class="string">'__rmod__'</span>, <span class="string">'__rmul__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>, <span class="string">'capitalize'</span>, <span class="string">'casefold'</span>, <span class="string">'center'</span>, <span class="string">'count'</span>, <span class="string">'encode'</span>, <span class="string">'endswith'</span>, <span class="string">'expandtabs'</span>, <span class="string">'find'</span>, <span class="string">'format'</span>, <span class="string">'format_map'</span>, <span class="string">'index'</span>, <span class="string">'isalnum'</span>, <span class="string">'isalpha'</span>, <span class="string">'isdecimal'</span>, <span class="string">'isdigit'</span>, <span class="string">'isidentifier'</span>, <span class="string">'islower'</span>, <span class="string">'isnumeric'</span>, <span class="string">'isprintable'</span>, <span class="string">'isspace'</span>, <span class="string">'istitle'</span>, <span class="string">'isupper'</span>, <span class="string">'join'</span>, <span class="string">'ljust'</span>, <span class="string">'lower'</span>, <span class="string">'lstrip'</span>, <span class="string">'maketrans'</span>, <span class="string">'partition'</span>, <span class="string">'replace'</span>, <span class="string">'rfind'</span>, <span class="string">'rindex'</span>, <span class="string">'rjust'</span>, <span class="string">'rpartition'</span>, <span class="string">'rsplit'</span>, <span class="string">'rstrip'</span>, <span class="string">'split'</span>, <span class="string">'splitlines'</span>, <span class="string">'startswith'</span>, <span class="string">'strip'</span>, <span class="string">'swapcase'</span>, <span class="string">'title'</span>, <span class="string">'translate'</span>, <span class="string">'upper'</span>, <span class="string">'zfill'</span>]</span><br></pre></td></tr></table></figure>

<p>对于对象方法的更多细节,调用内置的dir函数,将会返回一个列表,其中包含了对象的所有属性</p>
<p>以双下划线开头并结尾的变量名是用来表示Python实现细节的命名模式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>help(S.replace)</span><br><span class="line"></span><br><span class="line">Help on built-<span class="keyword">in</span> function replace:</span><br><span class="line"></span><br><span class="line">replace(...) method of builtins.str instance</span><br><span class="line">    S.replace(old, new[, count]) -&gt; str</span><br><span class="line">    </span><br><span class="line">    Return a copy of S <span class="keyword">with</span> all occurrences of substring</span><br><span class="line">    old replaced by new.  If the optional argument count <span class="keyword">is</span></span><br><span class="line">    given, only the first count occurrences are replaced.</span><br><span class="line">(END)</span><br></pre></td></tr></table></figure>

<p>将方法的名称传递给<code>help</code>函数查询它们是做什么的</p>
<p>也能够对整个字符串提交帮助查询,将得到关于每一个字符串方法的详细信息</p>
<h3 id="编写字符串的其他方法"><a href="#编写字符串的其他方法" class="headerlink" title="编写字符串的其他方法"></a>编写字符串的其他方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'A\nB\tC'</span>	<span class="comment"># \n is end-of-line,\t is tab</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(S)			<span class="comment"># Each stands for just one character</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">'\n'</span>)		<span class="comment"># \n is a byte with the binary value 10 in ASCII</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'A\0B\0C'</span>	<span class="comment"># \0,a binary zero byte,does not terminate string</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(S)</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>反斜线转义序列表示特殊的字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg = <span class="string">""" aaaaaaaaaaaaa</span></span><br><span class="line"><span class="string"><span class="meta">... </span>bbb'''bbbbbbbbbb""bbbbbbb'bbbb</span></span><br><span class="line"><span class="string"><span class="meta">... </span>cccccccccccccc"""</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg</span><br><span class="line"><span class="string">' aaaaaaaaaaaaa\nbbb\'\'\'bbbbbbbbbb""bbbbbbb\'bbbb\ncccccccccccccc'</span></span><br></pre></td></tr></table></figure>

<p>Python允许字符串包括在单引号或双引号中</p>
<p>Python允许在三个引号(单引号或双引号)中包括多行字符串常量,这种形式中所有的行都合并在一起,并在每一行的末尾增加换行符</p>
<p>Python允许原始字符串常量,即去掉反斜线转义机制(以字母<code>r</code>开头)</p>
<p>Python允许Unicode字符串形式,并且用bytes类型表示原始字节字符串</p>
<h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p>字符串对象的方法能够支持基于模式的文本处理</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> re</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>match = re.match(<span class="string">'Hello[ \t]*(.*)world'</span>,<span class="string">'Hello    Python world'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>match.group(<span class="number">1</span>)</span><br><span class="line"><span class="string">'Python '</span></span><br></pre></td></tr></table></figure>

<p>搜索子字符串,这个子字符串以<code>Hello,</code>开始,后面跟着零个或几个制表符或空格,接着有任意字符并将其保存至匹配的group中,最后以<code>world.</code>结尾</p>
<p>找到子字符串与模式中括号包含的部分匹配的子字符串的对应部分保存为组</p>
<hr>
<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>列表是一个任意类型的对象的位置相关的有序集合,它没有固定的大小</p>
<h3 id="序列操作"><a href="#序列操作" class="headerlink" title="序列操作"></a>序列操作</h3><p>列表是序列的一种,支持所有的序列操作,其结果是列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">123</span>,<span class="string">'spam'</span>,<span class="number">1.23</span>]	<span class="comment"># A list of three different-type objects</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(L)					<span class="comment"># Number of items in the list</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">0</span>]					<span class="comment"># Indexing by position</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[:<span class="number">-1</span>]					<span class="comment"># Slicing a list returns a new list</span></span><br><span class="line">[<span class="number">123</span>, <span class="string">'spam'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L + [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]				<span class="comment"># Concatenation makes a new list too</span></span><br><span class="line">[<span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">1.23</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L * <span class="number">4</span></span><br><span class="line">[<span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">1.23</span>, <span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">1.23</span>, <span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">1.23</span>, <span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">1.23</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L						<span class="comment"># We're not changing the original list</span></span><br><span class="line">[<span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">1.23</span>]</span><br></pre></td></tr></table></figure>

<p>能够对列表进行索引、切片、合并、重复等操作</p>
<h3 id="类型特定的操作"><a href="#类型特定的操作" class="headerlink" title="类型特定的操作"></a>类型特定的操作</h3><p>Python的列表与其他语言中的数组有些类似</p>
<p>列表没有固定类型的约束,没有固定大小</p>
<p>因为列表是可变的,大多数列表的方法都会就地改变列表对象,而不是创建一个新的列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">1.23</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.append(<span class="string">'NI'</span>)			<span class="comment"># Growing:add object at end of list</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">1.23</span>, <span class="string">'NI'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.pop(<span class="number">2</span>)				<span class="comment"># Shrinking:delete an item in the middle</span></span><br><span class="line"><span class="number">1.23</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L						<span class="comment"># "del L[2]" deletes from a list too</span></span><br><span class="line">[<span class="number">123</span>, <span class="string">'spam'</span>, <span class="string">'NI'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.insert(<span class="number">2</span>,<span class="number">123</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">123</span>, <span class="string">'spam'</span>, <span class="number">123</span>, <span class="string">'NI'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.remove(<span class="number">123</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'spam'</span>, <span class="number">123</span>, <span class="string">'NI'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M = [<span class="string">'bb'</span>,<span class="string">'aa'</span>,<span class="string">'cc'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M</span><br><span class="line">[<span class="string">'aa'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M.reverse()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M</span><br><span class="line">[<span class="string">'cc'</span>, <span class="string">'bb'</span>, <span class="string">'aa'</span>]</span><br></pre></td></tr></table></figure>

<p><code>append</code>方法扩充了列表的大小并在列表的尾部插入一项</p>
<p><code>pop</code>方法(或等效的<code>del</code>语句)移除给定偏移量的一项,从而让列表减小</p>
<p><code>insert</code>方法可以在任意位置插入元素</p>
<p><code>remove</code>方法按照值移除第一个匹配元素</p>
<p><code>sort</code>方法,默认按照升序对列表进行排序</p>
<p><code>severse</code>方法对列表进行翻转</p>
<h3 id="边界检查"><a href="#边界检查" class="headerlink" title="边界检查"></a>边界检查</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">123</span>,<span class="string">'spam'</span>,<span class="string">'NI'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">99</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: list index out of range</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">99</span>] = <span class="number">1</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: list assignment index out of range</span><br></pre></td></tr></table></figure>

<p>超出列表末尾之外的索引会导致错误</p>
<p>对列表末尾范围之外赋值会导致错误</p>
<h3 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>M = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],	<span class="comment"># A 3 x 3 matrix,as nested lists</span></span><br><span class="line"><span class="meta">... </span>[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],		<span class="comment"># Code can spam lines if bracketed</span></span><br><span class="line"><span class="meta">... </span>[<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M[<span class="number">1</span>]			<span class="comment"># Get row 2</span></span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M[<span class="number">1</span>][<span class="number">2</span>]			<span class="comment"># Get row 2,then get item 3 within the row</span></span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>能够以任何的组合对其进行嵌套,并可以对多个层次进行嵌套</p>
<h3 id="列表解析"><a href="#列表解析" class="headerlink" title="列表解析"></a>列表解析</h3><p>列表解析表达式提供一种处理像矩阵这样结构的工具</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>M</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>col2 = [row[<span class="number">1</span>] <span class="keyword">for</span> row <span class="keyword">in</span> M]				<span class="comment"># Collect the items in column 2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>col2</span><br><span class="line">[<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M											<span class="comment"># The matrix is unchanged</span></span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[row[<span class="number">1</span>] + <span class="number">1</span> <span class="keyword">for</span> row <span class="keyword">in</span> M]					<span class="comment"># Add 1 to each item in columb 2</span></span><br><span class="line">[<span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[row[<span class="number">1</span>] <span class="keyword">for</span> row <span class="keyword">in</span> M <span class="keyword">if</span> row[<span class="number">1</span>] % <span class="number">2</span> == <span class="number">0</span>]	<span class="comment"># Filter out odd items</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure>

<p>通过对序列中的每一项运行一个表达式来创建一个新列表的方法,每次一个,从左至右</p>
<p>列表解析是编写在方括号中的,由使用了同一个变量名的<strong>表达式</strong>和<strong>循环结构</strong>组成</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>diag = [M[i][i] <span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]]	<span class="comment"># Collect a diagonal from matrix</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>diag</span><br><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>doubles = [c * <span class="number">2</span> <span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'spam'</span>]	<span class="comment"># Repeat characters in a string</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>doubles</span><br><span class="line">[<span class="string">'ss'</span>, <span class="string">'pp'</span>, <span class="string">'aa'</span>, <span class="string">'mm'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;sum(row) <span class="keyword">for</span> row <span class="keyword">in</span> M&#125;						<span class="comment"># Create a set of row sums</span></span><br><span class="line">&#123;<span class="number">24</span>, <span class="number">6</span>, <span class="number">15</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;i : sum(M[i]) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>)&#125;			<span class="comment"># Creates key/value table of row sums</span></span><br><span class="line">&#123;<span class="number">0</span>: <span class="number">6</span>, <span class="number">1</span>: <span class="number">15</span>, <span class="number">2</span>: <span class="number">24</span>&#125;</span><br></pre></td></tr></table></figure>

<p>列表解析创建了新的列表作为结果,但是能够在任何可迭代的对象上进行迭代</p>
<p>解析语法可以用来创建列表、集合和字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>M = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>G = (sum(row) <span class="keyword">for</span> row <span class="keyword">in</span> M)		<span class="comment"># Create a generator of row sums</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(G)</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(G)							<span class="comment"># Run the iteration protocol</span></span><br><span class="line"><span class="number">15</span></span><br></pre></td></tr></table></figure>

<p>括号中的解析语法可以用来创建产生所需结果的<strong>生成器</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>M = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(sum,M))	<span class="comment"># Map sum over items in M</span></span><br><span class="line">[<span class="number">6</span>, <span class="number">15</span>, <span class="number">24</span>]</span><br></pre></td></tr></table></figure>

<p><code>map</code>函数产生对各项运行一个函数的结果</p>
<hr>
<h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><p>字典不是序列,而是一种映射,映射通过键而不是相对位置来存储</p>
<p>字典具有可变性</p>
<p>字典编写在<code>{}</code>中,并包含一系列的<code>key:value</code>对</p>
<h3 id="映射操作"><a href="#映射操作" class="headerlink" title="映射操作"></a>映射操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'food'</span>:<span class="string">'Spam'</span>,<span class="string">'quantity'</span>:<span class="number">4</span>,<span class="string">'color'</span>:<span class="string">'pink'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'food'</span>]				<span class="comment"># Fetch value of key 'food'</span></span><br><span class="line"><span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'quantity'</span>] += <span class="number">1</span>		<span class="comment"># Add 1 to 'quantity' value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'food'</span>: <span class="string">'Spam'</span>, <span class="string">'quantity'</span>: <span class="number">5</span>, <span class="string">'color'</span>: <span class="string">'pink'</span>&#125;</span><br></pre></td></tr></table></figure>

<p>通过键对这个字典进行索引来读取或改变键所关联的值</p>
<p>字典的索引操作与序列具有相同的语法,但是在方括号中的元素是键</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'name'</span>] = <span class="string">'Bob'</span>	<span class="comment"># Create keys by assignment</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'job'</span>] = <span class="string">'dev'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'age'</span>] = <span class="number">40</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'name'</span>: <span class="string">'Bob'</span>, <span class="string">'job'</span>: <span class="string">'dev'</span>, <span class="string">'age'</span>: <span class="number">40</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'name'</span>]</span><br><span class="line"><span class="string">'Bob'</span></span><br></pre></td></tr></table></figure>

<p>字典可以每次以一个键来填写它,对一个新的字典的键赋值会创建该键</p>
<p>字典可以用来执行搜索</p>
<h3 id="重访嵌套"><a href="#重访嵌套" class="headerlink" title="重访嵌套"></a>重访嵌套</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec = &#123;<span class="string">'name'</span>:&#123;<span class="string">'first'</span>:<span class="string">'Bob'</span>,<span class="string">'last'</span>:<span class="string">'Smith'</span>&#125;,</span><br><span class="line"><span class="meta">... </span><span class="string">'job'</span>:[<span class="string">'dev'</span>,<span class="string">'mgr'</span>],</span><br><span class="line"><span class="meta">... </span><span class="string">'age'</span>:<span class="number">40.5</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec[<span class="string">'name'</span>]						<span class="comment"># 'name' is a nested dictionary</span></span><br><span class="line">&#123;<span class="string">'first'</span>: <span class="string">'Bob'</span>, <span class="string">'last'</span>: <span class="string">'Smith'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec[<span class="string">'name'</span>][<span class="string">'last'</span>]				<span class="comment"># index the nested dictionary</span></span><br><span class="line"><span class="string">'Smith'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec[<span class="string">'job'</span>]						<span class="comment"># 'job' is a nested list</span></span><br><span class="line">[<span class="string">'dev'</span>, <span class="string">'mgr'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec[<span class="string">'job'</span>][<span class="number">-1</span>]					<span class="comment"># Index the nested list</span></span><br><span class="line"><span class="string">'mgr'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec[<span class="string">'job'</span>].append(<span class="string">'janitor'</span>)	<span class="comment"># Expand Bob's job description in-place</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec</span><br><span class="line">&#123;<span class="string">'name'</span>: &#123;<span class="string">'first'</span>: <span class="string">'Bob'</span>, <span class="string">'last'</span>: <span class="string">'Smith'</span>&#125;, <span class="string">'job'</span>: [<span class="string">'dev'</span>, <span class="string">'mgr'</span>, <span class="string">'janitor'</span>], <span class="string">'age'</span>: <span class="number">40.5</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec = <span class="number">0</span>							<span class="comment"># Now the object's space is reclaimed</span></span><br></pre></td></tr></table></figure>

<p>可以通过字典的键索引这个嵌套结构的组件</p>
<p>当列表作为字典所包含的一部分时,可以自由地增加或减少</p>
<p>当最后一次引用对象后,对象锁占用的内存空间将会自动清理掉</p>
<h3 id="键的排序-for循环"><a href="#键的排序-for循环" class="headerlink" title="键的排序:for循环"></a>键的排序:for循环</h3><h4 id="键的排序"><a href="#键的排序" class="headerlink" title="键的排序"></a>键的排序</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>

<p>字典作为映射,仅支持通过键获取元素</p>
<p>字典作为映射,不包含任何可靠的从左至右的顺序,如果建立一个字典,并将它打印出来,它的键与我们输入时的顺序可能不同</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks = list(D.keys()) </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key <span class="keyword">in</span> Ks:</span><br><span class="line"><span class="meta">... </span>    print(key,<span class="string">'=&gt;'</span>,D[key])</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">a =&gt; 1</span><br><span class="line">b =&gt; 2</span><br><span class="line">c =&gt; 3</span><br></pre></td></tr></table></figure>

<p>当需要强调某种顺序时</p>
<blockquote>
<ul>
<li>通过字典的<code>keys</code>方法收集一个键的列表</li>
<li>使用列表的<code>sort</code>方法进行排序</li>
<li>使用Python的for循环逐个显示结果</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; D = &#123;&apos;a&apos;: 1, &apos;c&apos;: 3, &apos;b&apos;: 2&#125;</span><br><span class="line">&gt;&gt;&gt; for key in sorted(D):</span><br><span class="line">...     print(key,&apos;=&gt;&apos;,D[key])</span><br><span class="line">... </span><br><span class="line">a =&gt; 1</span><br><span class="line">b =&gt; 2</span><br><span class="line">c =&gt; 3</span><br></pre></td></tr></table></figure>

<p>通过使用<code>sorted</code>内置函数可以一步完成</p>
<p><code>sorted</code>调用返回结果并对各种对象类型进行排序</p>
<h4 id="for循环和while循环"><a href="#for循环和while循环" class="headerlink" title="for循环和while循环"></a>for循环和while循环</h4><p><code>for</code>循环以及<code>while</code>循环,是在脚本中编写重复性任务语句的主要方法</p>
<p><code>for</code>循环是一个序列操作,可以使用任意一个序列对象,甚至可以用在一些不是序列的对象中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'spam'</span>:</span><br><span class="line"><span class="meta">... </span>    print(c.upper())</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">S</span><br><span class="line">P</span><br><span class="line">A</span><br><span class="line">M</span><br></pre></td></tr></table></figure>

<p><code>for</code>循环可以步进循环字符串中的字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> x &gt; <span class="number">0</span>:</span><br><span class="line"><span class="meta">... </span>    print(<span class="string">'spam!'</span> * x)</span><br><span class="line"><span class="meta">... </span>    x -= <span class="number">1</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">spam!spam!spam!spam!</span><br><span class="line">spam!spam!spam!</span><br><span class="line">spam!spam!</span><br><span class="line">spam!</span><br></pre></td></tr></table></figure>

<p><code>while</code>循环为常见的循环工具,不仅限于遍历序列</p>
<h3 id="迭代和优化"><a href="#迭代和优化" class="headerlink" title="迭代和优化"></a>迭代和优化</h3><p>迭代协议表示在内存中物理存储的序列,或一个在迭代操作情况下每次产生一个元素的对象</p>
<p><code>for</code>循环和<code>列表解析表达式</code>都能够工作于遵守迭代协议的任意对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>squares = [x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>squares</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>squares = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]:		<span class="comment"># This is what a list comprahension does</span></span><br><span class="line"><span class="meta">... </span>    squares.append(x ** <span class="number">2</span>)		<span class="comment"># Both run the iteration protocol internally</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>squares</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br></pre></td></tr></table></figure>

<p><code>列表解析表达式</code>能够编写成一个等效的<code>for</code>循环</p>
<p><code>列表解析</code>和相关的函数编程工具(<code>map</code>和<code>filter</code>)通常运行得比<code>for</code>循环快</p>
<h3 id="不存在的键-if测试"><a href="#不存在的键-if测试" class="headerlink" title="不存在的键:if测试"></a>不存在的键:if测试</h3><h4 id="不存在的键"><a href="#不存在的键" class="headerlink" title="不存在的键"></a>不存在的键</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'e'</span>] = <span class="number">99</span>		<span class="comment"># Assigning new keys gorws dictionaries</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'e'</span>: <span class="number">99</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'f'</span>]			<span class="comment"># Referencing a nonexistent key is an error</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">KeyError: <span class="string">'f'</span></span><br></pre></td></tr></table></figure>

<p>获取一个不存在的键值是一个程序错误</p>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>获取不存在的键可以通过<code>if/else</code>语句、<code>get</code>方法、<code>try</code>语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'e'</span>: <span class="number">99</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'f'</span> <span class="keyword">in</span> D</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="keyword">not</span> <span class="string">'f'</span> <span class="keyword">in</span> D:</span><br><span class="line"><span class="meta">... </span>    print(<span class="string">'missing'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">missing</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>value = D.get(<span class="string">'x'</span>,<span class="number">0</span>)				<span class="comment"># Index but with a default</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>value</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>value = D[<span class="string">'x'</span>] <span class="keyword">if</span> <span class="string">'x'</span> <span class="keyword">in</span> D <span class="keyword">else</span> <span class="number">0</span>	<span class="comment"># if\else expression form</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>value</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><code>in</code>关系表达式允许我们查询字典中一个键是否存在,并可以通过使用Python的<code>if</code>语句对结果进行分支处理</p>
<h4 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h4><p>包含关键字<code>if</code>,紧跟着一个结果为<strong>真</strong>或<strong>假</strong>的表达式,测试结果为真的话将于宁一些代码</p>
<p><code>if</code>语句可以有<code>else</code>分句,以及一个或多个<code>elif</code>分句进行其他的测试</p>
<hr>
<h2 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h2><p>元组对象是序列,但是具有不可变性</p>
<p>元组对象基本上是一个不可以改变的列表</p>
<p>元组编写在<code>()</code>中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)	<span class="comment"># A 4-item tuple</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(T)				<span class="comment"># Length</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T + (<span class="number">5</span>,<span class="number">6</span>)			<span class="comment"># Concatenation</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T[<span class="number">0</span>]				<span class="comment"># Indexing,slicing,and more</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>元组支持任意类型、任意嵌套以及常见的序列操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T.index(<span class="number">4</span>)		<span class="comment"># Tuple methods:4 appears at offset 3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T.count(<span class="number">4</span>)		<span class="comment"># 4 appears once</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><code>index</code>方法返回元素的偏移</p>
<p><code>count</code>方法返回元素出现的次数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T[<span class="number">0</span>] = <span class="number">2</span>			<span class="comment"># Tuples are immutable</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">'tuple'</span> object does <span class="keyword">not</span> support item assignment</span><br></pre></td></tr></table></figure>

<p>元组是不可变的序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="string">'spam'</span>, <span class="number">3.0</span>, [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T[<span class="number">1</span>]</span><br><span class="line"><span class="number">3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T[<span class="number">2</span>][<span class="number">1</span>]</span><br><span class="line"><span class="number">22</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T.append(<span class="number">4</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'tuple'</span> object has no attribute <span class="string">'append'</span></span><br></pre></td></tr></table></figure>

<p>元组支持混合的类型和嵌套,但是不能增长或缩短</p>
<h3 id="为什么要用元组"><a href="#为什么要用元组" class="headerlink" title="为什么要用元组"></a>为什么要用元组</h3><p>元组提供了一种完整性的约束,这对于更大型的程序来说是方便的</p>
<hr>
<h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><p>文件对象是Python代码对电脑上外部文件的主要接口</p>
<p>文件没有特定的常量语法创建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = open(<span class="string">'data.txt'</span>,<span class="string">'w'</span>)				<span class="comment"># Make a new file in output mode</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">'Hello\n'</span>)						<span class="comment"># Write strings of bytes to it</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">'world\n'</span>)						<span class="comment"># Returns number of bytes written in Python 3.0</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.close()								<span class="comment"># Close to flush output buffers to disk</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = open(<span class="string">'data.txt'</span>)					<span class="comment"># 'r' is the default processing mode</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text = f.read()							<span class="comment"># Read entire file into a string</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text</span><br><span class="line"><span class="string">'Hello\nworld\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(text)								<span class="comment"># print interprets control characters</span></span><br><span class="line">Hello</span><br><span class="line">world</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text.split()							<span class="comment"># File content is always a string</span></span><br><span class="line">[<span class="string">'Hello'</span>, <span class="string">'world'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = open(<span class="string">'data.bin'</span>, <span class="string">'rb'</span>).read()	<span class="comment"># Open binary file</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data									<span class="comment"># bytes string holds binary data</span></span><br><span class="line"><span class="string">b'\x00\x00\x00\x07spam\x00\x08'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[<span class="number">4</span>:<span class="number">8</span>]</span><br><span class="line"><span class="string">b'spam'</span></span><br></pre></td></tr></table></figure>

<p>创建一个文本输出文件,需要调用内置的<code>open</code>函数传递给它一个<strong>外部的文件名</strong>的字符串以及一个<strong>处理模式</strong>的字符串</p>
<blockquote>
<p>文本文件把内容显示为字符串,并且自动执行Unicode编码和解码</p>
<ul>
<li><code>w</code>处理模式以文本形式写入数据</li>
<li><code>r</code>处理模式以文本形式读出数据(如果在调用时忽略模式的话,这将是默认的)</li>
</ul>
<p>二进制文件把内容显示为一个特定的字节字符串类型,并且不允许修改地访问文件内容</p>
<ul>
<li><code>wb</code>处理模式以二进制形式写入数据</li>
<li><code>rb</code>处理模式以二进制形式读出数据</li>
</ul>
</blockquote>
<p>对于脚本而言,文件的内容总是字符串,无论文件包含的数据是什么类型</p>
<h3 id="文件对象的方法"><a href="#文件对象的方法" class="headerlink" title="文件对象的方法"></a>文件对象的方法</h3><p><code>read</code>接受一个字节大小的选项</p>
<p><code>readline</code>每次读一行</p>
<p><code>seek</code>移动到一个新的文件位置</p>
<p>文件提供了一个迭代器,在<code>for</code>循环或其他环境中自动地一行一行地读取</p>
<h3 id="其他文件类工具"><a href="#其他文件类工具" class="headerlink" title="其他文件类工具"></a>其他文件类工具</h3><p>类文件工具:管道、先进先出队列(FIFO)、套接字、通过键访问文件、对象持久、基于描述符的文件、关系数据库和面向对象数据库接口等</p>
<hr>
<h2 id="其他核心类型"><a href="#其他核心类型" class="headerlink" title="其他核心类型"></a>其他核心类型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = set(<span class="string">'spam'</span>)						<span class="comment"># Make a set out of a squence in 2.6 and 3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Y = &#123;<span class="string">'h'</span>, <span class="string">'a'</span>, <span class="string">'m'</span>&#125;					<span class="comment"># Make a set with new 3.0 set literals</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X,Y</span><br><span class="line">(&#123;<span class="string">'p'</span>, <span class="string">'a'</span>, <span class="string">'s'</span>, <span class="string">'m'</span>&#125;, &#123;<span class="string">'h'</span>, <span class="string">'a'</span>, <span class="string">'m'</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X &amp; Y								<span class="comment"># Intersection</span></span><br><span class="line">&#123;<span class="string">'a'</span>, <span class="string">'m'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X | Y								<span class="comment"># Union</span></span><br><span class="line">&#123;<span class="string">'p'</span>, <span class="string">'h'</span>, <span class="string">'a'</span>, <span class="string">'s'</span>, <span class="string">'m'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X - Y								<span class="comment"># Difference</span></span><br><span class="line">&#123;<span class="string">'p'</span>, <span class="string">'s'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;		<span class="comment"># Set comprehensions in 3.0</span></span><br><span class="line">&#123;<span class="number">16</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>&#125;</span><br></pre></td></tr></table></figure>

<p>集合不是映射也不是序列</p>
<p>集合是不可变的对象的无序集合</p>
<p>集合可以通过调用内置<code>set</code>函数而创建,或使用集合常量和表达式<code>{}</code>创建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> / <span class="number">3</span>							<span class="comment"># Floating-point(use .0 in Python 2.6)</span></span><br><span class="line"><span class="number">0.33333333333333331</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">2</span>/<span class="number">3</span>) + (<span class="number">1</span>/<span class="number">2</span>)</span><br><span class="line"><span class="number">1.1666666666666665</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> decimal					<span class="comment"># Decimals:fixed precision</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = decimal.Decimal(<span class="string">'3.141'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d + <span class="number">1</span></span><br><span class="line">Decimal(<span class="string">'4.141'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>decimal.getcontext().prec = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>decimal.Decimal(<span class="string">'1.00'</span>) / decimal.Decimal(<span class="string">'3.00'</span>)</span><br><span class="line">Decimal(<span class="string">'0.33'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> fractions <span class="keyword">import</span> Fraction	<span class="comment"># Fractions:numerator + denominator</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = Fraction(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f + <span class="number">1</span></span><br><span class="line">Fraction(<span class="number">5</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f + Fraction(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">Fraction(<span class="number">7</span>, <span class="number">6</span>)</span><br></pre></td></tr></table></figure>

<p>十进制数(固定精度浮点数)和分数(有一个分子和一个分母的有理数)用来解决浮点数学的局限性和内在的不精确性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> &gt; <span class="number">2</span>,<span class="number">1</span> &lt; <span class="number">2</span></span><br><span class="line">(<span class="literal">False</span>, <span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bool(<span class="string">'spam'</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = <span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(X)</span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="literal">None</span>] * <span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>]</span><br></pre></td></tr></table></figure>

<p>布尔值以及特殊的占位符对象<code>None</code>(用来初始化名字和对象)</p>
<h3 id="如何破坏代码的灵活性"><a href="#如何破坏代码的灵活性" class="headerlink" title="如何破坏代码的灵活性"></a>如何破坏代码的灵活性</h3><p>在代码中检验特定的类型,实际上破坏了代码的灵活性,即限制了它只能使用一种类型工作,没有这样的检测,代码也许能够使用整个范围的类型工作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># In Python 2.6:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(L)						<span class="comment"># Types:type of L is list type object</span></span><br><span class="line">&lt;type <span class="string">'list'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(type(L))				<span class="comment"># Even types are objects</span></span><br><span class="line">&lt;type <span class="string">'type'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># In Python 3.0:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(L)						<span class="comment"># 3.0:types are classes,and vice versa</span></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">list</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">type</span><span class="params">(type<span class="params">(L)</span>)</span>				# <span class="title">See</span> <span class="title">Chapter</span> 31 <span class="title">for</span> <span class="title">more</span> <span class="title">on</span> <span class="title">class</span> <span class="title">types</span></span></span><br><span class="line"><span class="class">&lt;<span class="title">class</span> '<span class="title">type</span>'&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line">&gt;&gt;&gt; if type(L) == type([]):		# Type testing,if you must...</span><br><span class="line"><span class="meta">... </span>    print(<span class="string">'yes'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">yes</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> type(L) == list:			<span class="comment"># Using the type name</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="string">'yes'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">yes</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> isinstance(L,list):		<span class="comment"># Object-oriented tests</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="string">'yes'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">yes</span><br></pre></td></tr></table></figure>

<p>内置函数<code>type</code>返回的类型对象是赋给该类型的另一个对象的一个对象</p>
<p>内置函数<code>type</code>允许编写代码来检查他所处理的对象的类型</p>
<h3 id="用户定义的类"><a href="#用户定义的类" class="headerlink" title="用户定义的类"></a>用户定义的类</h3><p>类定义了新的对象类型,拓展了核心类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Worker</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, pay)</span>:</span>			<span class="comment"># Initialize when created</span></span><br><span class="line"><span class="meta">... </span>            self.name = name				<span class="comment"># self is the new object</span></span><br><span class="line"><span class="meta">... </span>            self.pay = pay</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">lastName</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>            <span class="keyword">return</span> self.name.split()[<span class="number">-1</span>]	<span class="comment"># Split string on blanks</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">giveRaise</span><span class="params">(self, percent)</span>:</span></span><br><span class="line"><span class="meta">... </span>            self.pay *= (<span class="number">1.0</span> + percent)		<span class="comment"># Update pay in-place</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bob = Worker(<span class="string">'Bob Smith'</span>, <span class="number">50000</span>)			<span class="comment"># Make two instances</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sue = Worker(<span class="string">'Sue Jones'</span>, <span class="number">60000</span>)			<span class="comment"># Each has name and pay attrs</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bob.lastName()								<span class="comment"># Call method:bob is self</span></span><br><span class="line"><span class="string">'Smith'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sue.lastName()								<span class="comment"># sue is the self subject</span></span><br><span class="line"><span class="string">'Jones'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sue.giveRaise(<span class="number">.10</span>)							<span class="comment"># Updates sue's pay</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sue.pay</span><br><span class="line"><span class="number">66000.0</span></span><br></pre></td></tr></table></figure>

<p>调用类会生成新类型的实例,并且类的方法调用时,类的方法自动获取被处理的实例</p>
<p>隐含的<code>self</code>对象是将其叫做<strong>面向对象模型</strong>的原因,即一个类中的函数总有一个隐含的对象</p>
<p>基于类的类型是基于并使用了核心类型的</p>
<p>通过编写新的类来拓展软件,而不是改变目前工作的类</p>
<h3 id="剩余的内容"><a href="#剩余的内容" class="headerlink" title="剩余的内容"></a>剩余的内容</h3><p>Python脚本中能够处理的所有的事情都是某种类型的对象</p>
<p>在Python中的每样东西都是一个对象</p>
<p>对象不是面向对象,面向对象是一种要求有继承和Python类声明的概念</p>
<hr>
<h2 id="本章习题"><a href="#本章习题" class="headerlink" title="本章习题"></a>本章习题</h2><ol>
<li><p>列举4个Python核心数据类型的名称</p>
<blockquote>
<p>数字、字符串、列表、字典、元组、文件和集合一般被认为是核心对象(数据)类型</p>
<p>类型、None和布尔型有时也被定义在这样的分类中</p>
<p>还有多种数字类型(整数、浮点数、复数、分数和十进制数)和多种字符串类型(Python 2.X中的一般字符串和Unicode字符串,以及Python 3.X中的文本字符串和字节字符串)</p>
</blockquote>
</li>
<li><p>为什么我们把它们称作是”核心”数据类型</p>
<blockquote>
<p>它们被认作是”核心”类型是因为它们是Python语言自身的一部分,并且总是有效的</p>
<p>为了建立其他的对象,通常必须调用被导入模块的函数</p>
<p>大多数核心类型都有特定的语法去生成其对象:例如,’spam’ 是一个创建字符串的表达式,而且决定了可以被应用的操作的集合,正是因为这一点,核心类型与Python的语法紧密地结合在一起</p>
<p>与之相比较,必须调用内置的open函数去创建一个文件对象</p>
</blockquote>
</li>
<li><p>“不可变性”代表了什么,哪三种Python的核心类型被认为是具有不可变性的</p>
<blockquote>
<p>一个具有”不可变性”的对象是一个在其创建以后不能够被改变的对象</p>
<p>Python中的数字、字符串和元组都属于这个分类</p>
<p>尽管无法就地改变一个不可变的对象,但是可以通过运行一个表达式创建一个新的对象</p>
</blockquote>
</li>
<li><p>“序列”是什么意思,哪三种Python的核心类型被认为是这个分类中的</p>
<blockquote>
<p>一个”序列”是一个对位置进行排序的对象的集合</p>
<p>字符串、列表和元组是Python中所有的序列</p>
<p>它们共同拥有一般的序列操作,例如，索引、合并以及分片,但又各自有自己的类型特定的方法调用</p>
</blockquote>
</li>
<li><p>“映射”是什么意,，哪种Python的核心类型是映射</p>
<blockquote>
<p>术语”映射”,表示将键与相关值相互关联映射的对象</p>
<p>Python的字典是其核心类型集中唯一的映射类型</p>
<p>映射没有从左至右的位置顺序;它们支持通过键获取数据,并包含了类型特定的方法调用</p>
</blockquote>
</li>
<li><p>什么是”多态”,为什么我们要关心多态?</p>
<blockquote>
<p>“多态”意味着一个操作符(如<code>+</code>)的意义取决于被操作的对象</p>
<p>这将变成使用好Python的关键思想之一:不要把代码限制在特定的类型上,使代码自动适用于多种类型</p>
</blockquote>
</li>
</ol>
<hr>
<h1 id="第五章-数字"><a href="#第五章-数字" class="headerlink" title="第五章 数字"></a>第五章 数字</h1><blockquote>
<p>学习Python数字对象类型和能够应用于它们的操作</p>
<p>学习标准的正数和浮点数类型,以及复数、分数和集合</p>
<p>学习Python的表达式语法、类型转换、位操作以及各种在脚本中编写数字的常量的形式</p>
</blockquote>
<hr>
<h2 id="Python的数字类型"><a href="#Python的数字类型" class="headerlink" title="Python的数字类型"></a>Python的数字类型</h2><p>在Python中,数字并不是一个真正的对象类型,而是一组类似类型的分类</p>
<p>Python不仅支持通常的数字类型(整数和浮点数),而且能够通过常量去直接创建数字以及处理数字的表达式</p>
<p>Python数字类型的完整工具</p>
<blockquote>
<ul>
<li>整数和浮点数</li>
<li>复数</li>
<li>固定精度的十进制数</li>
<li>有理分数</li>
<li>集合</li>
<li>布尔类型</li>
<li>无穷的整数精度</li>
<li>各种数字内置函数和模块</li>
</ul>
</blockquote>
<h3 id="数字常量"><a href="#数字常量" class="headerlink" title="数字常量"></a>数字常量</h3><p>在基本类型中,Python提供了<strong>整数</strong>(正整数和负整数)和<strong>浮点数</strong>(带有小数部分的数字)</p>
<p>Python允许整数具有无穷的精度</p>
<table>
<thead>
<tr>
<th>数字</th>
<th>常量</th>
</tr>
</thead>
<tbody><tr>
<td>整数(无穷大小)</td>
<td>1234,-24,0,99999999999999</td>
</tr>
<tr>
<td>浮点数</td>
<td>1.23,1.,3.14e-10,4E210,4.0e+210</td>
</tr>
<tr>
<td>Python 3.0中的八进制、十六进制和二进制常量</td>
<td>0o177,0x9ff,0b101010</td>
</tr>
<tr>
<td>复数常量</td>
<td>3+4j，3.0+4.0j，3J</td>
</tr>
</tbody></table>
<p>Python数字类型在程序中的显示方式</p>
<h4 id="十六进制数、八进制和二进制常量"><a href="#十六进制数、八进制和二进制常量" class="headerlink" title="十六进制数、八进制和二进制常量"></a>十六进制数、八进制和二进制常量</h4><p>整数可以编写为</p>
<ul>
<li>十进制</li>
<li>十六进制(0x或0X开头,后接十六进制数字0<del>9和A</del>F,十六进制数字编写成大写或小写都可以)</li>
<li>八进制(0o或0O开头,后接八进制数字0~7)</li>
<li>二进制(以0b或0B开头,后接二进制数字0~1)</li>
</ul>
<p>所有这些常量在程序代码中都产生一个整数对象,它们仅仅是特定值的不同语法表示而已</p>
<p>内置函数<code>hex(I)</code>、<code>oct(I)</code>和<code>bin(I)</code>把一个<strong>整数</strong>转换为这3种进制表示的<strong>字符串</strong></p>
<p>内置函数<code>int(str,base)</code>根据给定的进制把一个<strong>字符串</strong>转换为一个<strong>整数</strong></p>
<h4 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h4><p>Python的复数常量写成<code>实部+虚部</code>的写法,虚部以<code>j</code>或<code>J</code>结尾</p>
<p>实部从技术上讲可有可无,所以可能会单独表示虚部</p>
<p>从内部看来,复数是通过一对浮点数来表示的,但是对复数的所有的数字操作都会按照复数的运算法则进行</p>
<p>可以通过内置函数<code>complex(real,imag)</code>来创建复数</p>
<h4 id="编辑其他的数字类型"><a href="#编辑其他的数字类型" class="headerlink" title="编辑其他的数字类型"></a>编辑其他的数字类型</h4><p>其他的、更高级的数字类型有一些通过调用导入的模块中的函数来创建(例如,十进制数和分数),另一些拥有它们自己的常量语法(例如,集合)</p>
<h3 id="内置数学工具和拓展"><a href="#内置数学工具和拓展" class="headerlink" title="内置数学工具和拓展"></a>内置数学工具和拓展</h3><h4 id="表达式操作符"><a href="#表达式操作符" class="headerlink" title="表达式操作符"></a>表达式操作符</h4><p><code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>&gt;&gt;</code>、<code>**</code>、<code>&amp;</code></p>
<h4 id="内置数学函数"><a href="#内置数学函数" class="headerlink" title="内置数学函数"></a>内置数学函数</h4><p><code>pow</code>、<code>abs</code>、<code>round</code>、<code>int</code>、<code>hex</code>、<code>bin</code></p>
<h4 id="公用模块"><a href="#公用模块" class="headerlink" title="公用模块"></a>公用模块</h4><p><code>random</code>、<code>math</code></p>
<h4 id="特定于类型的方法"><a href="#特定于类型的方法" class="headerlink" title="特定于类型的方法"></a>特定于类型的方法</h4><p>浮点数拥有<code>as_integer_ratio</code>方法,对于分数数字类型很有用</p>
<p><code>is_integer</code>方法测试数字是否是一个整数</p>
<p><code>bit_length</code>方法给出表示对象的值所需要的位数</p>
<h3 id="Python表达式操作符"><a href="#Python表达式操作符" class="headerlink" title="Python表达式操作符"></a>Python表达式操作符</h3><p>表达式是处理数字的最基本的工具</p>
<p>表达式是使用通常的数学符号和操作符号写出来的</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>yield x</td>
<td>生成器函数发送协议</td>
</tr>
<tr>
<td>lambda args: expression</td>
<td>生成匿名函数</td>
</tr>
<tr>
<td>x if y else z</td>
<td>三元选择表达式</td>
</tr>
<tr>
<td>x or y</td>
<td>逻辑或(只有x为假,才会计算y)</td>
</tr>
<tr>
<td>x and y</td>
<td>逻辑与(只有x为真,才会计算y)</td>
</tr>
<tr>
<td>not x</td>
<td>逻辑非</td>
</tr>
<tr>
<td>x in y, x not in y</td>
<td>成员关系(可迭代对象、集合)</td>
</tr>
<tr>
<td>x is y, x is not y</td>
<td>对象实体测试</td>
</tr>
<tr>
<td>x &lt; y, x &lt;= y, x &gt; y, x &gt;= y, x == y, x != y</td>
<td>大小比较,集合子集和超集值相等性操作符</td>
</tr>
<tr>
<td>x | y</td>
<td>位或,集合并集</td>
</tr>
<tr>
<td>x ^ y</td>
<td>位异或,集合对称差</td>
</tr>
<tr>
<td>x &amp; y</td>
<td>位与,集合交集</td>
</tr>
<tr>
<td>x &lt;&lt; y, x &gt;&gt; y</td>
<td>左移或右移y位</td>
</tr>
<tr>
<td>x + y, x - y</td>
<td>加法/合并,减法,集合差集</td>
</tr>
<tr>
<td>x * y, x % y, x / y, x // y</td>
<td>乘法/重复,余数/格式化,除法:真除法或floor除法</td>
</tr>
<tr>
<td>-x, +x</td>
<td>一元减法,识别</td>
</tr>
<tr>
<td>~x</td>
<td>按位求补(取反)</td>
</tr>
<tr>
<td>x ** y</td>
<td>幂运算</td>
</tr>
<tr>
<td>x[i]</td>
<td>索引(序列、映射及其他)点号取属性运算,函数调用</td>
</tr>
<tr>
<td>x[i:j:k]</td>
<td>分片</td>
</tr>
<tr>
<td>x(…)</td>
<td>调用(函数、方法、类及其他可调用的)</td>
</tr>
<tr>
<td>x.attr</td>
<td>属性引用</td>
</tr>
<tr>
<td>(…)</td>
<td>元组、表达式、生成器表达式</td>
</tr>
<tr>
<td>[…]</td>
<td>列表、列表解析</td>
</tr>
<tr>
<td>{…}</td>
<td>字典、集合、集合和字典解析</td>
</tr>
</tbody></table>
<p>Python表达式操作符及程序</p>
<h4 id="混合操作所遵循的操作优先级"><a href="#混合操作所遵循的操作优先级" class="headerlink" title="混合操作所遵循的操作优先级"></a>混合操作所遵循的操作优先级</h4><p>当编写含有一个以上操作符的表达式时,Python将按照所谓的优先级法则对其进行分组,这个分组决定了表达式中各部分的计算顺序</p>
<ul>
<li>表中越靠后的优先级越高</li>
<li>表中位于同一行的表达式在组合的时候通常从左到右组合(幂运算从右向左组合,比较运算是从左到右连接的)</li>
</ul>
<h4 id="括号分组的子表达式"><a href="#括号分组的子表达式" class="headerlink" title="括号分组的子表达式"></a>括号分组的子表达式</h4><p>如果用括号将表达式各部分进行分组的话,就会超越Python的优先级规则,先行计算括号中的表达式</p>
<h4 id="混合类型自动升级"><a href="#混合类型自动升级" class="headerlink" title="混合类型自动升级"></a>混合类型自动升级</h4><p>在混合类型的表达式中,Python首先将被操作的对象转换成其中最复杂的操作对象的类型,然后再对相同类型的操作对象进行数学运算</p>
<p>Python数字类型复杂度:整数比浮点数简单,浮点数比复数简单</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="number">3.1415</span>)	<span class="comment"># Truncates filoat to integer</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(<span class="number">3</span>)	<span class="comment"># Converts integer to float</span></span><br><span class="line"><span class="number">3.0</span></span><br></pre></td></tr></table></figure>

<p>内置函数<code>int</code>和<code>float</code>可以强制转换类型</p>
<h4 id="预习-运算符重载"><a href="#预习-运算符重载" class="headerlink" title="预习:运算符重载"></a>预习:运算符重载</h4><p>所有的Python操作符可以通过Python的类或C拓展类型被重载,让它工作于自己创建的对象中</p>
<p>Python自身自动重载了某些操作符,能够根据所处理的内置对象的类型而执行不同的操作</p>
<hr>
<h2 id="在实际应用中的数字"><a href="#在实际应用中的数字" class="headerlink" title="在实际应用中的数字"></a>在实际应用中的数字</h2><h3 id="变量和基本的表达式"><a href="#变量和基本的表达式" class="headerlink" title="变量和基本的表达式"></a>变量和基本的表达式</h3><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><ul>
<li>变量在它第一次赋值时创建</li>
<li>变量在表达式中使用将被替换为它们的值</li>
<li>变量在表达式中使用以前必须已赋值</li>
<li>变量像对象一样不需要在一开始进行声明</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">3</span>					<span class="comment"># Name created</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a + <span class="number">1</span>, a - <span class="number">1</span>			<span class="comment"># Addition(3 + 1),subtraction(3 - 1)</span></span><br><span class="line">(<span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b * <span class="number">3</span>, b / <span class="number">2</span>			<span class="comment"># Multiplication(4 * 3),division(4 / 2)</span></span><br><span class="line">(<span class="number">12</span>, <span class="number">2.0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a % <span class="number">2</span>, b ** <span class="number">2</span>			<span class="comment"># Modulus(remainder),power(4 ** 2)</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">16</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> + <span class="number">4.0</span>, <span class="number">2.0</span> ** b		<span class="comment"># Mixed-type conversions</span></span><br><span class="line">(<span class="number">6.0</span>, <span class="number">16.0</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c * <span class="number">2</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">NameError: name <span class="string">'c'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br><span class="line">    &gt;&gt;&gt; b / <span class="number">2</span> + a			<span class="comment"># Same as((4/3) + 3)</span></span><br><span class="line"><span class="number">5.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b / (<span class="number">2.0</span> + a))	<span class="comment"># Same as(4/(2.0 + 3))</span></span><br><span class="line"><span class="number">0.8</span></span><br></pre></td></tr></table></figure>

<p>变量不需要预声明,而是在使用前,至少赋一次值</p>
<p>如果使用从未被赋值的不同的变量,Python将会报告有错误而不是赋给默认的值</p>
<p>没有括号时,Python自动根据运算符的优先级法则将各部分分组</p>
<p>整数相除时,<code>/</code>执行带有余数的真除法,<code>//</code>执行整数除法</p>
<h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><p>在#标记后直到本行末尾的文本会认作是一个注释并忽略</p>
<p>注释是为代码编写可读文档的方法</p>
<h3 id="数字显示的格式"><a href="#数字显示的格式" class="headerlink" title="数字显示的格式"></a>数字显示的格式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b / (<span class="number">2.0</span> + a)			<span class="comment"># Auto echo output:more digits</span></span><br><span class="line"><span class="number">0.800000000000000004</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(b / (<span class="number">2.0</span> + a))	<span class="comment"># print rounds off digits</span></span><br><span class="line"><span class="number">0.8</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> / <span class="number">2.0</span></span><br><span class="line"><span class="number">0.5</span></span><br></pre></td></tr></table></figure>

<p>浮点数除法由于浮点数的硬件限制,以及无法精确地表现一些值会出现更多的位数</p>
<p>在交互提示模式下结果显示计算机的浮点数硬件中所有数字</p>
<p>并不是所有的值都有更多的数字位数需要显示</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>num = <span class="number">1</span> / <span class="number">3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num						<span class="comment"># Echoes</span></span><br><span class="line"><span class="number">0.33333333333333331</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(num)				<span class="comment"># print rounds</span></span><br><span class="line"><span class="number">0.3333333333333333</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%e'</span> % num				<span class="comment"># String formatting expression</span></span><br><span class="line"><span class="string">'3.333333e-01'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%4.2f'</span> % num			<span class="comment"># Alternative floating-point format</span></span><br><span class="line"><span class="string">'0.33'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:4.2f&#125;'</span>.format(num)	<span class="comment"># String formatting methon</span></span><br><span class="line"><span class="string">'0.33'</span></span><br></pre></td></tr></table></figure>

<p>显示数字位数的方法有自动回显、打印、字符串格式化</p>
<h3 id="比较-一般的和连续的"><a href="#比较-一般的和连续的" class="headerlink" title="比较:一般的和连续的"></a>比较:一般的和连续的</h3><h4 id="一般的"><a href="#一般的" class="headerlink" title="一般的"></a>一般的</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> &lt; <span class="number">2</span>		<span class="comment"># Less than</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2.0</span> &gt;= <span class="number">1</span>	<span class="comment"># Greater than or equal:mixed-type 1 converted to 1.0</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2.0</span> == <span class="number">2.0</span>	<span class="comment"># Equal value</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2.0</span> != <span class="number">2.0</span>	<span class="comment"># Not equal value</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>一般的比较会比较操作数的相对大小,并且返回一个布尔类型的结果</p>
<h4 id="连续的"><a href="#连续的" class="headerlink" title="连续的"></a>连续的</h4><p>Python允许把大小比较测试连接起来,成为连续比较`</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Y = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Z = <span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X &lt; Y &lt; Z		<span class="comment"># Chained comparisons:range tests</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X &lt; Y <span class="keyword">and</span> Y &lt; Z</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X &lt; Y &lt; Z</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X &lt; Y <span class="keyword">and</span> Y &lt; Z</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X &lt; Y &gt; Z</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X &lt; Y <span class="keyword">and</span> Y &gt; Z</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> &lt; <span class="number">2</span> &lt; <span class="number">3.0</span> &lt; <span class="number">4</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> &gt; <span class="number">2</span> &gt; <span class="number">3.0</span> &gt; <span class="number">4</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> == <span class="number">2</span> &lt; <span class="number">3</span>		<span class="comment"># Same as:1 == 2 and 2 &lt; 3</span></span><br><span class="line"><span class="literal">False</span>				<span class="comment"># Not same as:Flase &lt; 3(which means 0 &lt; 3,which is true)</span></span><br></pre></td></tr></table></figure>

<p>表达式<code>(A &lt; B &lt; C)</code>等同于布尔测试`(A &lt; B and B &lt; C),但第一个表达式简单便于录入,并且运行起来可能略快</p>
<p>允许任意的连续长度</p>
<p>可以在连续测试中使用其他的比较,但是最终表达式可能会变的很晦涩</p>
<h3 id="str和repr显示格式"><a href="#str和repr显示格式" class="headerlink" title="str和repr显示格式"></a>str和repr显示格式</h3><p>默认的<strong>交互模式回显</strong>和<strong>打印</strong>的区别相当于内置<code>repr</code>和<code>str</code>函数的区别</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>num = <span class="number">1</span> / <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>repr(num)			<span class="comment"># Used by echoes:as-code form</span></span><br><span class="line"><span class="string">'0.33333333333333331'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(num)			<span class="comment"># Used by print:user-friendly form</span></span><br><span class="line"><span class="string">'0.333333333333'</span></span><br></pre></td></tr></table></figure>

<p>两个函数都会把任意对象变换成字符串表示</p>
<p><code>repr</code>产生的结果像是代码</p>
<p><code>str</code>转变为一种对用户更友好的格式</p>
<h3 id="除法-传统除法、Floor除法和真除法"><a href="#除法-传统除法、Floor除法和真除法" class="headerlink" title="除法:传统除法、Floor除法和真除法"></a>除法:传统除法、Floor除法和真除法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python 3.0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> / <span class="number">4</span>				<span class="comment"># Differs in 3.0:keeps reaminder</span></span><br><span class="line"><span class="number">2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> // <span class="number">4</span>				<span class="comment"># Same in 3.0:truncates remainder</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> / <span class="number">4.0</span>			<span class="comment"># Same in 3.0:keeps remainder</span></span><br><span class="line"><span class="number">2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> // <span class="number">4.0</span>			<span class="comment"># Same in 3.0:truncates to floor</span></span><br><span class="line"><span class="number">2.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 2.6</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> / <span class="number">4</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> // <span class="number">4</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> / <span class="number">4.0</span></span><br><span class="line"><span class="number">2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> // <span class="number">4.0</span></span><br><span class="line"><span class="number">2.0</span></span><br></pre></td></tr></table></figure>

<h4 id="真除法"><a href="#真除法" class="headerlink" title="真除法"></a>真除法</h4><p><code>X / Y</code></p>
<p>不管操作数的类型</p>
<p>返回包含任何余数的浮点结果</p>
<h4 id="Floor除法"><a href="#Floor除法" class="headerlink" title="Floor除法"></a>Floor除法</h4><p><code>X // Y</code></p>
<p>截除掉余数</p>
<p>针对整数操作数返回一个整数,如果有任何一个操作数是浮点类型,则返回一个浮点数</p>
<h4 id="传统除法"><a href="#传统除法" class="headerlink" title="传统除法"></a>传统除法</h4><p>在Python 2.6中,<code>/</code>表示传统除法</p>
<p>如果两个操作数都是整数的话,执行截断的整数除法,否则执行浮点除法</p>
<h4 id="支持两个Python版本"><a href="#支持两个Python版本" class="headerlink" title="支持两个Python版本"></a>支持两个Python版本</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Y = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Z = <span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = Y // Z			<span class="comment"># Always truncates,always an int result for ints in 2.6 and 3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = Y / float(Z)	<span class="comment"># Guaranrees float division with remainder in either 2.6 or 3.0</span></span><br></pre></td></tr></table></figure>

<p>如果依赖于截断整数除法,Python 2.6和Python 3.0中都使用<code>//</code></p>
<p>如果对于整数需要带有余数的浮点数结果,使用<code>/</code>并使用浮点数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> / <span class="number">4</span></span><br><span class="line"><span class="number">2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> // <span class="number">4</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>使用<code>__furure__``import</code>在Python 2.6中打开Python 3.0的<code>/</code></p>
<h4 id="Floor除法VS截断除法"><a href="#Floor除法VS截断除法" class="headerlink" title="Floor除法VS截断除法"></a>Floor除法VS截断除法</h4><p>Floor除法把结果向下截断到它的下层,即小于真正结果的最近整数,这对负数也有效</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.floor(<span class="number">2.5</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.floor(<span class="number">-2.5</span>)</span><br><span class="line"><span class="number">-3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.trunc(<span class="number">2.5</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.trunc(<span class="number">-2.5</span>)</span><br><span class="line"><span class="number">-2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> / <span class="number">2</span></span><br><span class="line"><span class="number">2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> / <span class="number">2</span>, <span class="number">5</span> / <span class="number">-2</span></span><br><span class="line">(<span class="number">2.5</span>, <span class="number">-2.5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> // <span class="number">2</span>, <span class="number">5</span> // <span class="number">-2</span>			<span class="comment"># Truncates to floor:rounds to first lower integer</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">-3</span>)						<span class="comment"># 2.5 becomes 2, -2.5 becomes -3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> / <span class="number">2.0</span>, <span class="number">5</span> / <span class="number">-2.0</span></span><br><span class="line">(<span class="number">2.5</span>, <span class="number">-2.5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> // <span class="number">2.0</span>, <span class="number">5</span> // <span class="number">-2.0</span>		<span class="comment"># Ditto for floats,though result is float too</span></span><br><span class="line">(<span class="number">2.0</span>, <span class="number">-3.0</span>)</span><br></pre></td></tr></table></figure>

<p>对于正数,<code>截断</code>除法和<code>Floor</code>除法是相同的</p>
<p>对于负数,<code>截断</code>除法直接舍弃余数,<code>Floor</code>除法截断到小于结果的最大整数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> / <span class="number">-2</span>				<span class="comment"># Keep remainder</span></span><br><span class="line"><span class="number">-2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">5</span> // <span class="number">-2</span>				<span class="comment"># Floor below result</span></span><br><span class="line"><span class="number">-3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.trunc(<span class="number">5</span> / <span class="number">-2</span>)	<span class="comment"># Truncate instead of floor</span></span><br><span class="line"><span class="number">-2</span></span><br></pre></td></tr></table></figure>

<p>通过<code>math.trunc</code>得到截断除法结果</p>
<h4 id="为什么Floor除法很重要"><a href="#为什么Floor除法很重要" class="headerlink" title="为什么Floor除法很重要"></a>为什么Floor除法很重要</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python 3.0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">5</span> / <span class="number">2</span>), (<span class="number">5</span> / <span class="number">2.0</span>), (<span class="number">5</span> / <span class="number">-2.0</span>), (<span class="number">5</span> / <span class="number">-2</span>)		<span class="comment"># 3.0 true division</span></span><br><span class="line">(<span class="number">2.5</span>, <span class="number">2.5</span>, <span class="number">-2.5</span>, <span class="number">-2.5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">5</span> // <span class="number">2</span>), (<span class="number">5</span> // <span class="number">2.0</span>), (<span class="number">5</span> // <span class="number">-2.0</span>), (<span class="number">5</span> // <span class="number">-2</span>)	<span class="comment"># 3.0 floor division</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">2.0</span>, <span class="number">-3.0</span>, <span class="number">-3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">9</span> / <span class="number">3</span>), (<span class="number">9.0</span> / <span class="number">3</span>), (<span class="number">9</span> // <span class="number">3</span>), (<span class="number">9</span> // <span class="number">3.0</span>)		<span class="comment"># Both</span></span><br><span class="line">(<span class="number">3.0</span>, <span class="number">3.0</span>, <span class="number">3</span>, <span class="number">3.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Python 2.6</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">5</span> / <span class="number">2</span>), (<span class="number">5</span> / <span class="number">2.0</span>), (<span class="number">5</span> / <span class="number">-2.0</span>), (<span class="number">5</span> / <span class="number">-2</span>)		<span class="comment"># 2.6 classic division</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">2.5</span>, <span class="number">-2.5</span>, <span class="number">-3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">5</span> // <span class="number">2</span>), (<span class="number">5</span> // <span class="number">2.0</span>), (<span class="number">5</span> //<span class="number">-2.0</span>), (<span class="number">5</span> // <span class="number">-2</span>)		<span class="comment"># 2.6 floor division(same)</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">2.0</span>, <span class="number">-3.0</span>, <span class="number">-3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">9</span> / <span class="number">3</span>), (<span class="number">9.0</span> / <span class="number">3</span>), (<span class="number">9</span> // <span class="number">3</span>), (<span class="number">9</span> // <span class="number">3.0</span>)		<span class="comment"># Both</span></span><br><span class="line">(<span class="number">3</span>, <span class="number">3.0</span>, <span class="number">3</span>, <span class="number">3.0</span>)</span><br></pre></td></tr></table></figure>

<p>Python 3.0中<code>/</code>的非截断行为可能会影响到大量的程序</p>
<h3 id="整数精度"><a href="#整数精度" class="headerlink" title="整数精度"></a>整数精度</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">999999999999999999999999999999</span> + <span class="number">1</span></span><br><span class="line"><span class="number">1000000000000000000000000000000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> ** <span class="number">200</span></span><br><span class="line"><span class="number">1606938044258990275541962092341162602522202993782792835301376</span></span><br></pre></td></tr></table></figure>

<p>Python 3.0整数支持无穷的大小</p>
<p>长整型数的数学运算通常比正常的整数运算更慢</p>
<h3 id="复数-1"><a href="#复数-1" class="headerlink" title="复数"></a>复数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1j</span> * <span class="number">1J</span></span><br><span class="line">(<span class="number">-1</span>+<span class="number">0j</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> + <span class="number">2j</span> * <span class="number">3</span></span><br><span class="line">(<span class="number">2</span>+<span class="number">6j</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1j</span> * <span class="number">1J</span></span><br><span class="line">(<span class="number">-1</span>+<span class="number">0j</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> + <span class="number">1j</span> * <span class="number">3</span></span><br><span class="line">(<span class="number">2</span>+<span class="number">3j</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">2</span> + <span class="number">1j</span>) * <span class="number">3</span></span><br><span class="line">(<span class="number">6</span>+<span class="number">3j</span>)</span><br></pre></td></tr></table></figure>

<p>复数表示为两个浮点数(实部和虚部),并在虚部增加<code>j</code>或<code>J</code>的后缀</p>
<p>可以把非零实部的复数写成由<code>+</code>连接起来的两部分</p>
<p>复数允许分解出它的实部和虚部作为属性,并支持所有一般的数学表达式,并且可以通过标准的<code>cmath</code>模块中的工具进行处理</p>
<h3 id="十六进制、八进制和二进制记数"><a href="#十六进制、八进制和二进制记数" class="headerlink" title="十六进制、八进制和二进制记数"></a>十六进制、八进制和二进制记数</h3><p>Python整数能够以十六进制、八进制和二进制计数法来编写,作为一般的以10位基数的十进制计数法的补充</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0o1</span>, <span class="number">0o20</span>, <span class="number">0o377</span>			<span class="comment"># Octal literals</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">16</span>, <span class="number">255</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0x01</span>, <span class="number">0x10</span>, <span class="number">0xFF</span>			<span class="comment"># Hex literals</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">16</span>, <span class="number">255</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0b1</span>, <span class="number">0b10000</span>, <span class="number">0b11111111</span>	<span class="comment"># Binary literals</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">16</span>, <span class="number">255</span>)</span><br></pre></td></tr></table></figure>

<p>Python默认地使用十进制值显示</p>
<h4 id="整数转换字符串"><a href="#整数转换字符串" class="headerlink" title="整数转换字符串"></a>整数转换字符串</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>oct(<span class="number">64</span>), hex(<span class="number">64</span>), bin(<span class="number">64</span>)</span><br><span class="line">(<span class="string">'0o100'</span>, <span class="string">'0x40'</span>, <span class="string">'0b1000000'</span>)</span><br></pre></td></tr></table></figure>

<p>Python提供了内置函数,把整数转换为其他进制的数字字符串</p>
<p><code>oct</code>函数将十进制数转换为八进制数的字符串</p>
<p><code>hex</code>函数将十进制数转换为十六进制数的字符串</p>
<p><code>bin</code>函数将十进制数转换为二进制数的字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:o&#125;, &#123;1:x&#125;, &#123;2:b&#125;'</span>.format(<span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>)</span><br><span class="line"><span class="string">'100, 40, 1000000'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%o, %x, %X'</span> % (<span class="number">64</span>, <span class="number">255</span>, <span class="number">255</span>)</span><br><span class="line"><span class="string">'100, ff, FF'</span></span><br></pre></td></tr></table></figure>

<p>使用字符串格式化方法将一个整数转换成八进制数和十六进制数的字符串</p>
<h4 id="字符串转换整数"><a href="#字符串转换整数" class="headerlink" title="字符串转换整数"></a>字符串转换整数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'64'</span>), int(<span class="string">'100'</span>, <span class="number">8</span>), int(<span class="string">'40'</span>, <span class="number">16</span>), int(<span class="string">'1000000'</span>, <span class="number">2</span>)</span><br><span class="line">(<span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'0x40'</span>, <span class="number">16</span>), int(<span class="string">'0b1000000'</span>, <span class="number">2</span>)	<span class="comment"># Literals okay too</span></span><br><span class="line">(<span class="number">64</span>, <span class="number">64</span>)</span><br></pre></td></tr></table></figure>

<p>内置的<code>int</code>函数会将一个数字的字符串变换为一个整数</p>
<p>第二个参数确定变换后的数字的进制</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>eval(<span class="string">'64'</span>), eval(<span class="string">'0o100'</span>), eval(<span class="string">'0x40'</span>), eval(<span class="string">'0b1000000'</span>)</span><br><span class="line">(<span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>, <span class="number">64</span>)</span><br></pre></td></tr></table></figure>

<p><code>eval</code>函数会把字符串作为Python代码,因此也可以将一个数字的字符串转换为一个整数</p>
<h3 id="位操作"><a href="#位操作" class="headerlink" title="位操作"></a>位操作</h3><p>Python可以把整数当做二进制位串操作</p>
<p>Python中有比位字符串更好的编码信息的方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">1</span>				<span class="comment"># 0001</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x &lt;&lt; <span class="number">2</span>				<span class="comment"># Shift left 2 bit:0100</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x | <span class="number">2</span>				<span class="comment"># Bitwise OR:0011</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x &amp; <span class="number">1</span>				<span class="comment"># Bitwise AND:0001</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = <span class="number">0b0001</span>			<span class="comment"># Binary literals</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X &lt;&lt; <span class="number">2</span>				<span class="comment"># Shift left</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(X &lt;&lt; <span class="number">2</span>)			<span class="comment"># Binaryy digits string</span></span><br><span class="line"><span class="string">'0b100'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(X | <span class="number">0b010</span>)		<span class="comment"># Bitwise OR</span></span><br><span class="line"><span class="string">'0b11'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(X &amp; <span class="number">0b1</span>)		<span class="comment"># Bitwise AND</span></span><br><span class="line"><span class="string">'0b1'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = <span class="number">0xFF</span>			<span class="comment"># Hex literals</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(X)</span><br><span class="line"><span class="string">'0b11111111'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X ^ <span class="number">0b10101010</span>		<span class="comment"># Bitwise XOR</span></span><br><span class="line"><span class="number">85</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(X ^ <span class="number">0b10101010</span>)</span><br><span class="line"><span class="string">'0b1010101'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'1010101'</span>, <span class="number">2</span>)	<span class="comment"># String to int per base</span></span><br><span class="line"><span class="number">85</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hex(<span class="number">85</span>)				<span class="comment"># Hex digit string</span></span><br><span class="line"><span class="string">'0x55'</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><code>&lt;&lt;</code>位左移</li>
<li><code>|</code>按位或</li>
<li><code>&amp;</code>按位与</li>
<li><code>^</code>按位异或</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = <span class="number">99</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(X), X.bit_length()</span><br><span class="line">(<span class="string">'0b1100011'</span>, <span class="number">7</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(<span class="number">256</span>), (<span class="number">256</span>).bit_length()</span><br><span class="line">(<span class="string">'0b100000000'</span>, <span class="number">9</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(bin(<span class="number">256</span>))<span class="number">-2</span></span><br><span class="line"><span class="number">9</span></span><br></pre></td></tr></table></figure>

<p><code>bit_length</code>方法允许查询以二进制表示一个数字的值所需要的位数</p>
<h3 id="其他的内置数学工具"><a href="#其他的内置数学工具" class="headerlink" title="其他的内置数学工具"></a>其他的内置数学工具</h3><p>Python支持用于数字处理的<strong>内置函数</strong>和<strong>内置模块</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.pi, math.e						<span class="comment"># Common constants</span></span><br><span class="line">(<span class="number">3.141592653589793</span>, <span class="number">2.718281828459045</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.sin(<span class="number">2</span> * math.pi / <span class="number">180</span>)			<span class="comment"># Sine,tangent,cosine</span></span><br><span class="line"><span class="number">0.03489949670250097</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.sqrt(<span class="number">144</span>), math.sqrt(<span class="number">2</span>)		<span class="comment"># Square root</span></span><br><span class="line">(<span class="number">12.0</span>, <span class="number">1.4142135623730951</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pow(<span class="number">2</span>, <span class="number">4</span>), <span class="number">2</span> ** <span class="number">4</span>					<span class="comment"># Exponentiation(power)</span></span><br><span class="line">(<span class="number">16</span>, <span class="number">16</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>abs(<span class="number">-42.0</span>), sum((<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))		<span class="comment"># Absolute value,summation</span></span><br><span class="line">(<span class="number">42.0</span>, <span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>min(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>), max(<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>)	<span class="comment"># Minimum,maximum</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p><code>sum</code>函数作用于数字的一个序列进行求和</p>
<p><code>min</code>和<code>max</code>函数接受一个参数序列或者单个的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.floor(<span class="number">2.567</span>), math.floor(<span class="number">-2.567</span>)		<span class="comment"># Floor(next-lower integer)</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">-3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.trunc(<span class="number">2.567</span>), math.trunc(<span class="number">-2.567</span>)		<span class="comment"># Truncate(drop decimal digits)</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">-2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="number">2.567</span>), int(<span class="number">-2.567</span>)						<span class="comment"># Truncate(integer conversion)</span></span><br><span class="line">(<span class="number">2</span>, <span class="number">-2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>round(<span class="number">2.567</span>), round(<span class="number">2.456</span>), round(<span class="number">2.567</span>,<span class="number">2</span>)	<span class="comment"># Round(Python 3.0 version)</span></span><br><span class="line">(<span class="number">3</span>, <span class="number">2</span>, <span class="number">2.5699999999999998</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%.1f'</span> % <span class="number">2.567</span>, <span class="string">'&#123;0:.2f&#125;'</span>.format(<span class="number">2.567</span>)		<span class="comment"># Round for display</span></span><br><span class="line">(<span class="string">'2.6'</span>, <span class="string">'2.57'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">1</span> / <span class="number">3</span>), round(<span class="number">1</span> / <span class="number">3</span>, <span class="number">2</span>),(<span class="string">'%.2f'</span> % (<span class="number">1</span> / <span class="number">3</span>))</span><br><span class="line">(<span class="number">0.33333333333333331</span>, <span class="number">0.3300000000000002</span>, <span class="string">'0.33'</span>)</span><br></pre></td></tr></table></figure>

<p>通过截断、floor、round删除一个浮点数的小数位</p>
<p><code>round</code>舍入一个浮点数但是仍然在内存中产生一个浮点数</p>
<p><code>字符串格式化</code>产生一个字符串并且不会得到一个修改后的数字</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> math</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.sqrt(<span class="number">144</span>)			<span class="comment"># Module</span></span><br><span class="line"><span class="number">12.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">144</span> ** <span class="number">.5</span>				<span class="comment"># Expression</span></span><br><span class="line"><span class="number">12.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pow(<span class="number">144</span>, <span class="number">.5</span>)			<span class="comment"># Built-in</span></span><br><span class="line"><span class="number">12.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>math.sqrt(<span class="number">1234567890</span>)	<span class="comment"># Larger numbers</span></span><br><span class="line"><span class="number">35136.41828644462</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1234567890</span> ** <span class="number">.5</span></span><br><span class="line"><span class="number">35136.41828644462</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pow(<span class="number">1234567890</span>, <span class="number">.5</span>)</span><br><span class="line"><span class="number">35136.41828644462</span></span><br></pre></td></tr></table></figure>

<p>Python有3种方法计算平方根:使用一个模块函数,一个表达式或一个内置函数</p>
<p>模块是外部的组件,必须先导入</p>
<p>内置函数位于一个隐性的命名空间(<code>builtins</code>)内,Python自动搜索程序的变量名,不需要导入就可以直接使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.random()</span><br><span class="line"><span class="number">0.6387170104190479</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.random()</span><br><span class="line"><span class="number">0.48633074825407063</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.randint(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.randint(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.choice([<span class="string">'life of Brian'</span>, <span class="string">'Holly Grail'</span>, <span class="string">'Meaning of Life'</span>])</span><br><span class="line"><span class="string">'Holly Grail'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.choice([<span class="string">'life of Brian'</span>, <span class="string">'Holly Grail'</span>, <span class="string">'Meaning of Life'</span>])</span><br><span class="line"><span class="string">'life of Brian'</span></span><br></pre></td></tr></table></figure>

<p><code>random</code>模块</p>
<blockquote>
<ul>
<li>选出一个在0和1之间的任意浮点数</li>
<li>选择在两个数字之间的任意整数</li>
<li>选择在一个序列中任意挑选一项</li>
</ul>
</blockquote>
<hr>
<h2 id="其他数字类型"><a href="#其他数字类型" class="headerlink" title="其他数字类型"></a>其他数字类型</h2><h3 id="小数数字"><a href="#小数数字" class="headerlink" title="小数数字"></a>小数数字</h3><p>通过调用<code>decimal</code>模块中的<code>Decimal</code>构造函数创建一个小数对象</p>
<p>通过导入decimal模块调用<code>declmal.Decimal.from_float(num)</code>形式创建</p>
<p>不能通过运行常量表达式创建的</p>
<p>小数是有固定的精度的浮点值</p>
<h4 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.1</span> + <span class="number">0.1</span> - <span class="number">0.3</span></span><br><span class="line"><span class="number">5.551115123125783e-17</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="number">0.1</span> + <span class="number">0.1</span> + <span class="number">0.1</span> - <span class="number">0.3</span>)</span><br><span class="line"><span class="number">5.551115123125783e-17</span></span><br></pre></td></tr></table></figure>

<p>浮点数学缺乏精确性,因为用来存储数值的空间有限,没有足够的位数去实现这样的精度</p>
<p>打印结果将会产生一个用户友好的显示格式但并不能完全解决问题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="string">'0.1'</span>) + Decimal(<span class="string">'0.1'</span>) + Decimal(<span class="string">'0.1'</span>) - Decimal(<span class="string">'0.3'</span>)</span><br><span class="line">Decimal(<span class="string">'0.0'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="string">'0.1'</span>) + Decimal(<span class="string">'0.10'</span>) + Decimal(<span class="string">'0.10'</span>) - Decimal(<span class="string">'0.30'</span>)</span><br><span class="line">Decimal(<span class="string">'0.00'</span>)</span><br></pre></td></tr></table></figure>

<p>创建一个小数对象,并传入一个字符串,这个字符串有我们希望在结果中显示的小数位数</p>
<p>当不同精度的小数在表达式中混编时,Python自动升级为小数位数最多的</p>
<h4 id="设置全局精度"><a href="#设置全局精度" class="headerlink" title="设置全局精度"></a>设置全局精度</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> decimal</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>decimal.Decimal(<span class="number">1</span>) / decimal.Decimal(<span class="number">7</span>)</span><br><span class="line">Decimal(<span class="string">'0.1428571428571428571428571429'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>decimal.getcontext().prec = <span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>decimal.Decimal(<span class="number">1</span>) / decimal.Decimal(<span class="number">7</span>)</span><br><span class="line">Decimal(<span class="string">'0.1429'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1999</span> + <span class="number">1.33</span></span><br><span class="line"><span class="number">2000.33</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>decimal.getcontext().prec = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pay = decimal.Decimal(str(<span class="number">199</span> + <span class="number">1.33</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pay</span><br><span class="line">Decimal(<span class="string">'200.33'</span>)</span><br></pre></td></tr></table></figure>

<p>上下文对象允许指定精度(小数位数)和舍入模式(舍去、进位)等</p>
<p>该精度全局性地适用于调用线程中创建的所有小数</p>
<h4 id="小数上下文管理器"><a href="#小数上下文管理器" class="headerlink" title="小数上下文管理器"></a>小数上下文管理器</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> decimal</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>decimal.Decimal(<span class="string">'1.00'</span>) / decimal.Decimal(<span class="string">'3.00'</span>)</span><br><span class="line">Decimal(<span class="string">'0.3333333333333333333333333333'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> decimal.localcontext() <span class="keyword">as</span> ctx:</span><br><span class="line"><span class="meta">... </span>    ctx.prec = <span class="number">2</span></span><br><span class="line"><span class="meta">... </span>    decimal.Decimal(<span class="string">'1.00'</span>) / decimal.Decimal(<span class="string">'3.00'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">Decimal(<span class="string">'0.33'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>decimal.Decimal(<span class="string">'1.00'</span>) / decimal.Decimal(<span class="string">'3.00'</span>)</span><br><span class="line">Decimal(<span class="string">'0.3333333333333333333333333333'</span>)</span><br></pre></td></tr></table></figure>

<p>使用上下文管理器语句来重新设置临时精度,在语句退出后,精度又重新设置为初始值</p>
<h3 id="分数类型"><a href="#分数类型" class="headerlink" title="分数类型"></a>分数类型</h3><p>实现了一个有理数对象</p>
<p>明确地保留一个分子和一个分母,从而避免了浮点数学的某些不准确性和局限性</p>
<p>通过调用<code>fractions</code>模块中的<code>Fraction</code>构造函数并传递一个分子和一个分母创建一个分数对象</p>
<h4 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> fractions <span class="keyword">import</span> Fraction</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = Fraction(<span class="number">1</span>, <span class="number">3</span>)		<span class="comment"># Numerator,denominator</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = Fraction(<span class="number">4</span>, <span class="number">6</span>)		<span class="comment"># Simplified to 2,3 by gcd</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">Fraction(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">Fraction(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(y)</span><br><span class="line"><span class="number">2</span>/<span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x + y</span><br><span class="line">Fraction(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x - y					<span class="comment"># Results are exact:numerator,denominator</span></span><br><span class="line">Fraction(<span class="number">-1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x * y</span><br><span class="line">Fraction(<span class="number">2</span>, <span class="number">9</span>)</span><br></pre></td></tr></table></figure>

<p>分数可以像平常一样用于数学表达式中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Fraction(<span class="string">'.25'</span>)</span><br><span class="line">Fraction(<span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Fraction(<span class="string">'1.25'</span>)</span><br><span class="line">Fraction(<span class="number">5</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Fraction(<span class="string">'.25'</span>) + Fraction(<span class="string">'1.25'</span>)</span><br><span class="line">Fraction(<span class="number">3</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>分数对象也可以从浮点数字符串来创建</p>
<h4 id="数值精度"><a href="#数值精度" class="headerlink" title="数值精度"></a>数值精度</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">1</span> / <span class="number">3</span>) + (<span class="number">6</span> / <span class="number">12</span>)		<span class="comment"># Use".0" in Python 2.6 for true "/"</span></span><br><span class="line"><span class="number">0.833333333333333326</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Fraction(<span class="number">6</span>, <span class="number">12</span>)			<span class="comment"># Automatically simplified</span></span><br><span class="line">Fraction(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Fraction(<span class="number">1</span>, <span class="number">3</span>) + Fraction(<span class="number">6</span>, <span class="number">12</span>)</span><br><span class="line">Fraction(<span class="number">5</span>, <span class="number">6</span>)</span><br></pre></td></tr></table></figure>

<p>分数保持精确性,并且自动简化结果</p>
<h4 id="转换和混合类型"><a href="#转换和混合类型" class="headerlink" title="转换和混合类型"></a>转换和混合类型</h4><h5 id="float-gt-fraction"><a href="#float-gt-fraction" class="headerlink" title="float -&gt; fraction"></a>float -&gt; fraction</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">2.5</span>).as_integer_ratio()						<span class="comment"># float object method</span></span><br><span class="line">(<span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = <span class="number">2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z = Fraction(*f.as_integer_ratio())				<span class="comment"># Convert float -&gt; fraction:two args</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z												<span class="comment"># Same as Fraction(5, 2)</span></span><br><span class="line">Fraction(<span class="number">5</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Fraction.from_float(<span class="number">1.75</span>)						<span class="comment"># Convert float -&gt; fraction:other way</span></span><br><span class="line">Fraction(<span class="number">7</span>, <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Fraction(*(<span class="number">1.75</span>).as_integer_ratio())</span><br><span class="line">Fraction(<span class="number">7</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>浮点数对象的方法<code>.as_integer_ratio()</code>将浮点数转换为分子和分母比</li>
<li>分数的方法<code>from_float</code>接受一个浮点数得到一个分数结果</li>
</ul>
<p><code>*</code>是一种特殊的语法,把一个元组拓展到单个的参数中</p>
<h5 id="fraction-gt-float"><a href="#fraction-gt-float" class="headerlink" title="fraction -&gt; float"></a>fraction -&gt; float</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = Fraction(<span class="number">1</span>, <span class="number">3</span>)								<span class="comment"># x from prior interaction</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z = Fraction(<span class="number">5</span>, <span class="number">2</span>)								<span class="comment"># Same as Fraction(5, 2)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x + z</span><br><span class="line">Fraction(<span class="number">17</span>, <span class="number">6</span>)										<span class="comment"># 5/2 + 1/3 = 15/6 + 2/6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(x)										<span class="comment"># Convert fraction -&gt; float</span></span><br><span class="line"><span class="number">0.33333333333333331</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(z)</span><br><span class="line"><span class="number">2.5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(x + z)</span><br><span class="line"><span class="number">2.8333333333333335</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">17</span> / <span class="number">6</span></span><br><span class="line"><span class="number">2.8333333333333335</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>float</code>接受一个<code>Fraction</code>作为参数,转换为浮点数</li>
</ul>
<h5 id="混合类型"><a href="#混合类型" class="headerlink" title="混合类型"></a>混合类型</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">Fraction(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x + <span class="number">2</span>											<span class="comment"># Fraction + int -&gt; Fraction</span></span><br><span class="line">Fraction(<span class="number">7</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x + <span class="number">2.0</span>											<span class="comment"># Fraction + float -&gt; float</span></span><br><span class="line"><span class="number">2.3333333333333335</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x + (<span class="number">1.</span>/<span class="number">3</span>)										<span class="comment"># Fraction + float -&gt; float</span></span><br><span class="line"><span class="number">0.6666666666666666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x + (<span class="number">4.</span>/<span class="number">3</span>)</span><br><span class="line"><span class="number">1.6666666666666665</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x + Fraction(<span class="number">4</span>, <span class="number">3</span>)								<span class="comment"># Fraction + Fraction -&gt; Fraction</span></span><br><span class="line">Fraction(<span class="number">5</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>Fraction + int -&gt; Fraction</li>
<li>Fraction + float -&gt; float</li>
<li>Fraction + fraction -&gt; Fraction</li>
</ul>
<h5 id="精度"><a href="#精度" class="headerlink" title="精度"></a>精度</h5><p>把浮点数转换为分数在某些情况下会有不可避免的精度损失</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">4.0</span> / <span class="number">3</span></span><br><span class="line"><span class="number">1.3333333333333333</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">4.0</span> / <span class="number">3</span>).as_integer_ratio()</span><br><span class="line">(<span class="number">6004799503160661</span>, <span class="number">4503599627370496</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = Fraction(<span class="number">1</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = x + Fraction(*(<span class="number">4.0</span> / <span class="number">3</span>).as_integer_ratio())	<span class="comment"># Precision loss from float</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">Fraction(<span class="number">22517998136852479</span>, <span class="number">13510798882111488</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">22517998136852479</span> / <span class="number">13510798882111488.</span>			<span class="comment"># 5 / 3(or close to it!)</span></span><br><span class="line"><span class="number">1.6666666666666667</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.limit_denominator(<span class="number">10</span>)							<span class="comment"># SiMplify to closet fraction</span></span><br><span class="line">Fraction(<span class="number">5</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>分数的<code>limit_denominator</code>方法通过限制最大分母值来简化结果</p>
<h3 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h3><p>唯一的、不可变的对象的无序集合</p>
<p>支持与数学集合理论相对应的操作]</p>
<p>通过向内置的<code>set</code>函数传递一个序列或其他的<strong>可迭代的对象</strong>创建集合对象</p>
<p>通过使用<code>{}</code>创建集合常量</p>
<h4 id="Python-2-6中的集合基础知识"><a href="#Python-2-6中的集合基础知识" class="headerlink" title="Python 2.6中的集合基础知识"></a>Python 2.6中的集合基础知识</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = set(<span class="string">'abcde'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = set(<span class="string">'bdxyz'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">set([<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'d'</span>])		<span class="comment"># 2.6 display format</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'e'</span> <span class="keyword">in</span> x						<span class="comment"># Membership</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x - y							<span class="comment"># Difference</span></span><br><span class="line">set([<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x | y							<span class="comment"># Union</span></span><br><span class="line">set([<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'d'</span>, <span class="string">'y'</span>, <span class="string">'x'</span>, <span class="string">'z'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x &amp; y							<span class="comment"># Intersection</span></span><br><span class="line">set([<span class="string">'b'</span>, <span class="string">'d'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x ^ y							<span class="comment"># Symmetric difference(XOR)</span></span><br><span class="line">set([<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'e'</span>, <span class="string">'y'</span>, <span class="string">'x'</span>, <span class="string">'z'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x &gt; y, x &lt; y					<span class="comment"># Superset,subset</span></span><br><span class="line">(<span class="literal">False</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>集合通过表达式操作符支持一般的数学集合运算<code>in</code>、<code>-</code>、<code>|</code>、<code>&amp;</code>、<code>^</code>、<code>&gt;</code>、<code>&lt;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = set([<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>, <span class="string">'e'</span>, <span class="string">'d'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = set([<span class="string">'y'</span>, <span class="string">'x'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'z'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z = x.intersection(y)			<span class="comment"># Same as x &amp; y</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">set([<span class="string">'b'</span>, <span class="string">'d'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.add(<span class="string">'SPAM'</span>)					<span class="comment"># Insert one item</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">set([<span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'SPAM'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.update(set([<span class="string">'X'</span>, <span class="string">'Y'</span>]))		<span class="comment"># Merge:in-place union</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">set([<span class="string">'Y'</span>, <span class="string">'X'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'SPAM'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z.remove(<span class="string">'b'</span>)					<span class="comment"># Delete one item</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>z</span><br><span class="line">set([<span class="string">'Y'</span>, <span class="string">'X'</span>, <span class="string">'d'</span>, <span class="string">'SPAM'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S | set([<span class="number">3</span>, <span class="number">4</span>])					<span class="comment"># Expressions require both to be sets</span></span><br><span class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S | [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> |: <span class="string">'set'</span> <span class="keyword">and</span> <span class="string">'list'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.union([<span class="number">3</span>, <span class="number">4</span>])					<span class="comment"># But their methods allow any iterable</span></span><br><span class="line">set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.intersection((<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>))</span><br><span class="line">set([<span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.issubset(range(<span class="number">-5</span>, <span class="number">5</span>))</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>intersection</code>方法求交集</li>
<li><code>union</code>方法求并集</li>
<li><code>issubset</code>判断子集</li>
<li><code>add</code>方法插入一个项目</li>
<li><code>update</code>方法按位置求并集</li>
<li><code>remove</code>方法根据值删除一个项目</li>
</ul>
<p>表达式通常需要两个集合,但是基于方法的对应形式往往对任何可迭代类型也有效</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> set(<span class="string">'abc'</span>):print(item * <span class="number">3</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">aaa</span><br><span class="line">ccc</span><br><span class="line">bbb</span><br></pre></td></tr></table></figure>

<p>集合支持<code>len</code>、<code>for</code>循环和列表解析操作</p>
<p>不支持索引和分片这样的操作</p>
<h4 id="Python-3-0中的集合常量"><a href="#Python-3-0中的集合常量" class="headerlink" title="Python 3.0中的集合常量"></a>Python 3.0中的集合常量</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])	<span class="comment"># Built-in call</span></span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;			<span class="comment"># 3.0 set literals</span></span><br></pre></td></tr></table></figure>

<p>Python 3.0添加了新的集合常量形式,使用为字典所保留的花括号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])		<span class="comment"># Built-in:same as in 2.6</span></span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>set(<span class="string">'spam'</span>)				<span class="comment"># Add all items in an iterable</span></span><br><span class="line">&#123;<span class="string">'m'</span>, <span class="string">'a'</span>, <span class="string">'s'</span>, <span class="string">'p'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;			<span class="comment"># Set literals:new in 3.0</span></span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S - &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;		<span class="comment"># Empty sets print differently</span></span><br><span class="line">set()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(&#123;&#125;)				<span class="comment"># Because &#123;&#125; is an empty dictionary</span></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">dict</span>'&gt;</span></span><br><span class="line">&gt;&gt;&gt; S = set()				# Initialize an empty set</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.add(<span class="number">1.23</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line">&#123;<span class="number">1.23</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = &#123;<span class="string">'s'</span>, <span class="string">'p'</span>, <span class="string">'a'</span>, <span class="string">'m'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.add(<span class="string">'alot'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line">&#123;<span class="string">'a'</span>, <span class="string">'m'</span>, <span class="string">'s'</span>, <span class="string">'p'</span>, <span class="string">'alot'</span>&#125;</span><br></pre></td></tr></table></figure>

<p>创建<strong>空的集合</strong>或<strong>从已有的可迭代对象</strong>构建集合还是需要内置的<code>set</code>函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S &amp; &#123;<span class="number">1</span>, <span class="number">3</span>&#125;			<span class="comment"># Intersection</span></span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">6</span>&#125; | S	<span class="comment"># Union</span></span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S - &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>&#125;		<span class="comment"># Difference</span></span><br><span class="line">&#123;<span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S &gt; &#123;<span class="number">1</span>, <span class="number">3</span>&#125;			<span class="comment"># Superset</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>Python 2.6所有的集合处理操作在Python 3.0中同样有效</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125; | &#123;<span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125; | [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> |: <span class="string">'set'</span> <span class="keyword">and</span> <span class="string">'list'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;.union([<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;.union(&#123;<span class="number">3</span>, <span class="number">4</span>&#125;)</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;.union(set([<span class="number">3</span>, <span class="number">4</span>]))</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;.intersection((<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>))</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;.issubset(range(<span class="number">-5</span>, <span class="number">5</span>))</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>Python 2.6集合支持的方法在Python 3.0中同样支持,其中的一些支持表达式所不支持的通用可迭代操作数</p>
<h4 id="不可变限制和冻结集合"><a href="#不可变限制和冻结集合" class="headerlink" title="不可变限制和冻结集合"></a>不可变限制和冻结集合</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = &#123;<span class="number">1.23</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.add([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])				<span class="comment"># Only mutable objects work in a set</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unhashable type: <span class="string">'list'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.add(&#123;<span class="string">'a'</span>:<span class="number">1</span>&#125;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unhashable type: <span class="string">'dict'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.add((<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S								<span class="comment"># Not list or dict,but tuple okay</span></span><br><span class="line">&#123;<span class="number">1.23</span>, (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S | &#123;(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)&#125;		<span class="comment"># Union:same as S.union(...)</span></span><br><span class="line">&#123;<span class="number">1.23</span>, (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>), (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>) <span class="keyword">in</span> S					<span class="comment"># Membership:by complete values</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>) <span class="keyword">in</span> S</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>集合只能包含不可变(即可散列的)的对象类型,列表和字典不能嵌入到集合中,元组可以嵌入到集合中</p>
<p>集合不能直接嵌入到其他集合中,需要调用<code>frozenset</code>创建一个不可变的集合</p>
<h4 id="Python-3-0中的集合解析"><a href="#Python-3-0中的集合解析" class="headerlink" title="Python 3.0中的集合解析"></a>Python 3.0中的集合解析</h4><p>集合解析运行一个循环并在每次迭代时收集一个表达式的结果,通过一个循环变量来访问当前的迭代值以用于集合表达式中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;	<span class="comment"># 3.0 set comprehension</span></span><br><span class="line">&#123;<span class="number">16</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">'spam'</span>&#125;				<span class="comment"># Same as:set('spam')</span></span><br><span class="line">&#123;<span class="string">'m'</span>, <span class="string">'a'</span>, <span class="string">'s'</span>, <span class="string">'p'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;c * <span class="number">4</span> <span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'spam'</span>&#125;			<span class="comment"># Set of collected expression results</span></span><br><span class="line">&#123;<span class="string">'aaaa'</span>, <span class="string">'ssss'</span>, <span class="string">'pppp'</span>, <span class="string">'mmmm'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;c * <span class="number">4</span> <span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'spamham'</span>&#125;</span><br><span class="line">&#123;<span class="string">'aaaa'</span>, <span class="string">'mmmm'</span>, <span class="string">'pppp'</span>, <span class="string">'hhhh'</span>, <span class="string">'ssss'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = &#123;c * <span class="number">4</span> <span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'spam'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S | &#123;<span class="string">'mmmm'</span>,<span class="string">'xxxx'</span>&#125;</span><br><span class="line">&#123;<span class="string">'pppp'</span>, <span class="string">'aaaa'</span>, <span class="string">'ssss'</span>, <span class="string">'xxxx'</span>, <span class="string">'mmmm'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S &amp; &#123;<span class="string">'mmmm'</span>, <span class="string">'xxxx'</span>&#125;</span><br><span class="line">&#123;<span class="string">'mmmm'</span>&#125;</span><br></pre></td></tr></table></figure>

<p>循环部分编写在右边,集合表达式编写在左边</p>
<p>解析可以迭代序列、字符串或其他类型的对象</p>
<h4 id="为什么使用集合"><a href="#为什么使用集合" class="headerlink" title="为什么使用集合"></a>为什么使用集合</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span> ,<span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>set(L)</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = list(set(L))		<span class="comment"># Remove duplicates</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<ul>
<li>集合用来过滤掉重复项</li>
<li>集合用来记录已经访问过的位置</li>
<li>两个集合的交集包含了共有的对象,并集包含了两个集合中的所有对象</li>
</ul>
<h3 id="布尔型"><a href="#布尔型" class="headerlink" title="布尔型"></a>布尔型</h3><p>布尔型数据类型的值为<code>True</code>和<code>False</code>,是整数类型<code>int</code>的子类,其行为和整数<code>1</code>和<code>0</code>相同</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(<span class="literal">True</span>)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">bool</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">isinstance</span><span class="params">(True,int)</span></span></span><br><span class="line"><span class="class"><span class="title">True</span></span></span><br><span class="line">&gt;&gt;&gt; True == 1		# Same value</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">True</span> <span class="keyword">is</span> <span class="number">1</span>		<span class="comment"># But different object:see the next chapter</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">True</span> <span class="keyword">or</span> <span class="literal">False</span>	<span class="comment"># Same as:1 or 0</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">True</span> + <span class="number">4</span>		<span class="comment"># (Hmmm)</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>可以将<code>True</code>和<code>Flase</code>看做是预定义的设置为整数<code>1</code>和<code>0</code></p>
<hr>
<h2 id="数字拓展"><a href="#数字拓展" class="headerlink" title="数字拓展"></a>数字拓展</h2><p>可选的Python拓展<code>NumPy</code>提供了高级的数字编程工具,例如矩阵数据类型、向量处理和高级的计算库</p>
<hr>
<h2 id="本章习题-1"><a href="#本章习题-1" class="headerlink" title="本章习题"></a>本章习题</h2><ol>
<li><p>Python中表达式<code>2 * (3 + 4)</code>的值是多少</p>
<blockquote>
<p>结果的值将会是<code>14</code>,即<code>2*7</code>的结果,因为括号强制让加法在乘法前进行运算</p>
</blockquote>
</li>
<li><p>Python中表达式<code>2 * 3 + 4</code>的值是多少</p>
<blockquote>
<p>这里结果会是<code>10</code>,即<code>6 + 4</code>的结果</p>
<p>Python的操作符优先级法则应用在没有括号存在的场合,乘法的优先级要比加法的优先级高(先进行运算)</p>
</blockquote>
</li>
<li><p>Python中表达式<code>2 + 3 * 4</code>的值是多少</p>
<blockquote>
<p>表达式将得到<code>14</code>,即<code>2 + 12</code>的结果,正如前一个问题一样是优先级的原因</p>
</blockquote>
</li>
<li><p>通过什么工具你可以找到一个数字的平方根以及它的平方</p>
<blockquote>
<p>求平方根、pi以及正切等等函数,在导入<code>math</code>模块后即可使用</p>
<p>为了找到一个数字的平方根,<code>import math</code>后调用<code>math. sqrt(N)</code></p>
<p>为了得到一个数字的平方，使用指数表达式<code>X **2</code>,或者内置函数<code>pow(X, 2)</code></p>
<p>上述两种方式的任何一种也可以用来计算一个数的0.5次方(例如，<code>X ** .5</code>)</p>
</blockquote>
</li>
<li><p>表达式<code>1+2.0+3</code>的结果是什么类型</p>
<blockquote>
<p>结果将是一个浮点数:整数将会变换升级成浮点数,这个表达式中最复杂的类型,然后使用浮点数的运算法则进行计算</p>
</blockquote>
</li>
<li><p>怎样能够截断或舍去浮点数的小数部分</p>
<blockquote>
<p><code>int(N)</code>函数和<code>math. trunc(N)</code>函数会省略小数部分,而<code>round(N， digit)</code>函数做四舍五人</p>
<p>可以使用<code>math. floor(N)</code>来计算<code>floor</code>,并且使用字符串格式化操作来舍入以便于显示</p>
</blockquote>
</li>
<li><p>怎样将-一个整数转换为浮点数</p>
<blockquote>
<p><code>float(I)</code>将整数转换为浮点数</p>
<p>在表达式中混合整数和浮点数也会实现转换</p>
<p>在某种意义上,Python 3.0的<code>/</code>除法也会转换,它总是返回一个包含余数的浮点数结果,即便两个操作数都是整数</p>
</blockquote>
</li>
<li><p>如何将一个整数显示成八进制、十六进制或二进制的形式</p>
<blockquote>
<p>内置函数<code>oct(I)</code>、<code>hex(I)</code>和<code>bin(I)</code>会将整数以八进制数、十六进制数和二进制数字符串的形式返回,%字符串格式化表达式和字符串格式化方法也为这样的转换提供方法</p>
</blockquote>
</li>
<li><p>如何将一个八进制、十六进制或二进制数的字符串转换成平常的整数</p>
<blockquote>
<p><code>int(S，base)</code>函数能够用来让一个八进制和十六进制数的字符串转换为正常的整数(传入8、16或2作为base的参数)</p>
<p><code>eval(S)</code>函数也能够用作这个目的,但是运行起来开销更大也有可能导致安全问题</p>
<p>注意整数总是在计算机内存中以二进制保存的,这些只不过是显示的字符串格式的转换而已</p>
</blockquote>
</li>
</ol>
<hr>
<h1 id="第六章-动态类型简介"><a href="#第六章-动态类型简介" class="headerlink" title="第六章 动态类型简介"></a>第六章 动态类型简介</h1><blockquote>
<p>本章对动态类型进行了深入的学习</p>
<blockquote>
<ul>
<li>学习了Python中变量和对象是如何通过引用关联在一起的</li>
<li>探索了垃圾收集的概念</li>
<li>学到了对象共享引用是如何影响多个变量的</li>
<li>看到了Python中引用是如何影响相等的概念</li>
</ul>
</blockquote>
</blockquote>
<hr>
<h2 id="缺少类型声明语句的情况"><a href="#缺少类型声明语句的情况" class="headerlink" title="缺少类型声明语句的情况"></a>缺少类型声明语句的情况</h2><p>在Python中,类型是在运行过程中自动决定的,而不是通过代码声明</p>
<h3 id="变量、对象和引用"><a href="#变量、对象和引用" class="headerlink" title="变量、对象和引用"></a>变量、对象和引用</h3><h4 id="变量创建"><a href="#变量创建" class="headerlink" title="变量创建"></a>变量创建</h4><p>当代码第一次给一个变量赋值时就创建了它</p>
<p>之后的赋值将会改变已创建的变量名的值</p>
<h4 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h4><p>变量永远不会有任何的和它关联的类型信息或约束</p>
<p>类型的概念是存在于对象中而不是变量名中</p>
<h4 id="变量使用"><a href="#变量使用" class="headerlink" title="变量使用"></a>变量使用</h4><p>当变量出现在表达式中时,它会马上被当前引用的对象所代替,无论这个对象是什么类型</p>
<p>所有的变量必须在使用前明确地赋值,使用未赋值的变量会产生错误</p>
<h4 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h4><p>对象有两个标准的头部信息:</p>
<ul>
<li>一个类型标志符去标识这个对象的类型</li>
<li>一个引用的计数器,用来决定是不是可以回收这个对象</li>
</ul>
<h4 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h4><p>从变量到对象的连接称作<strong>引用</strong></p>
<blockquote>
<ul>
<li>变量是一个系统表的元素,拥有指向对象的连接的空间</li>
<li>对象是分配的一块内存,有足够的空间去表示它们所代表的值</li>
<li>引用是自动形成的从变量到对象的指针</li>
</ul>
</blockquote>
<h3 id="类型属于对象-而不是变量"><a href="#类型属于对象-而不是变量" class="headerlink" title="类型属于对象,而不是变量"></a>类型属于对象,而不是变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">3</span>		<span class="comment"># It's an integer</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">'spam'</span>	<span class="comment"># Now it's a string</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1.23</span>	<span class="comment"># Now it's a floating point</span></span><br></pre></td></tr></table></figure>

<p>变量名没有类型,修改变量只是修改为对不同的对象的引用</p>
<p>类型属于对象,对象的头部信息标记了对象的类型</p>
<h3 id="对象的垃圾收集"><a href="#对象的垃圾收集" class="headerlink" title="对象的垃圾收集"></a>对象的垃圾收集</h3><p>当一个变量名被赋予了一个新的对象时,如果之前的对象没有被其他的变量名或对象引用,就会被回收</p>
<p>回收的对象的空间自动放入自由内存空间池,等待后来的对象使用</p>
<p>每个对象都保持了一个计数器,计数器记录了当前指向该对象的引用的数目,一旦这个计数器被设置为零,这个对象的内存空间就会自动回收</p>
<p>垃圾收集使脚本任意使用对象而不需要考虑释放内存空间</p>
<hr>
<h2 id="共享引用"><a href="#共享引用" class="headerlink" title="共享引用"></a>共享引用</h2><p>一个变量赋值为另一个变量后,实际的效果是两个变量引用相同的对象,即<strong>共享引用</strong></p>
<p>当其中一个变量引用了新的对象后,另一个变量并不会被改变,仍然引用原始的对象</p>
<h3 id="共享引用和在原处修改"><a href="#共享引用和在原处修改" class="headerlink" title="共享引用和在原处修改"></a>共享引用和在原处修改</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1 = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]	<span class="comment"># A mutable object</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L2 = L1			<span class="comment"># Make a reference to the same object</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1[<span class="number">0</span>] = <span class="number">24</span>		<span class="comment"># An in-place change</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1</span><br><span class="line">[<span class="number">24</span>, <span class="number">3</span>, <span class="number">4</span>]			<span class="comment"># L1 is different</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L2</span><br><span class="line">[<span class="number">24</span>, <span class="number">3</span>, <span class="number">4</span>]			<span class="comment"># But so is L2!</span></span><br></pre></td></tr></table></figure>

<p>对于支持在原处修改的对象,共享引用时对一个变量名的修改会影响其他的变量</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1 = [<span class="number">2</span> , <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L2 = L1[:]		<span class="comment"># Make a copy of L1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1[<span class="number">0</span>] = <span class="number">24</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1</span><br><span class="line">[<span class="number">24</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L2				<span class="comment"># L2 is not changed</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>如果修改不想影响到另一个变量,需要Python拷贝对象,而不是创建引用</p>
<p>拷贝列表的方法</p>
<blockquote>
<ul>
<li><p>内置列表函数</p>
</li>
<li><p>标注库的<code>copy</code>模块</p>
<p>适用于复制任意对象类型的调用</p>
<p>拷贝嵌套对象结构的调用</p>
</li>
<li><p>从头到尾切片</p>
</li>
</ul>
</blockquote>
<h3 id="共享引用和相等"><a href="#共享引用和相等" class="headerlink" title="共享引用和相等"></a>共享引用和相等</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M = L			<span class="comment"># M and L reference the same object</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L == M			<span class="comment"># Same value</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L <span class="keyword">is</span> M			<span class="comment"># Same object</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]	<span class="comment"># M and L reference different objects</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L == M			<span class="comment"># Same values</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L <span class="keyword">is</span> M			<span class="comment"># Different objects</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p><code>==</code>操作符测试两个被引用的对象是否有相同的值</p>
<p><code>is</code>操作符检查对象的同一性,是检测共享引用的一种方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = <span class="number">42</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Y = <span class="number">42</span>		<span class="comment"># Should be two different objects</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X == Y</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X <span class="keyword">is</span> Y		<span class="comment"># Same object anyhow:caching at work!</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p>Python缓存并复用了小的整数和小的字符串,不会被回收</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.getrefcount(<span class="number">1</span>)	<span class="comment"># 749 pointers to this shared piece of memory</span></span><br><span class="line"><span class="number">749</span></span><br></pre></td></tr></table></figure>

<p><code>sys</code>模块中的<code>getrefcount</code>函数会返回对象的引用次数</p>
<hr>
<h2 id="动态类型随处可见"><a href="#动态类型随处可见" class="headerlink" title="动态类型随处可见"></a>动态类型随处可见</h2><p>Python中任何东西都是通过赋值和引用工作的</p>
<hr>
<h2 id="本章习题-2"><a href="#本章习题-2" class="headerlink" title="本章习题"></a>本章习题</h2><ol>
<li><p>思考下面三条语句,它们会改变A打印出的值吗</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A =<span class="string">"spam"</span></span><br><span class="line">B =A</span><br><span class="line">B =<span class="string">"shrubbery"</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>不: </p>
<p>A仍会作为<code>spam</code>进行打印</p>
<p>当B赋值为字符串<code>shrubbery</code>时,所发生的只是变量B被重新设置为指向了新的字符串对象,A和B最初共享(即引用或指向)了同一个字符串对象<code>spam,</code>但是在Python中这两个变量名从未连接在一起,因此,设置B为另一个不同的对象对A没有影响</p>
<p>如果这里最后的语句变为<code>B=B+&#39;shrubbery&#39;</code>,也会发生同样的事情<br>另外,合并操作创建了一个新的对象作为其结果,并将这个值只赋值给了B,我们永远都不会在原处覆盖一个字符串(数字或元组),因为字符串是不可变的</p>
</blockquote>
</li>
<li><p>思考下面三条语句,它们会改变A的值吗</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A =[<span class="string">"spam"</span> ]</span><br><span class="line">B =A</span><br><span class="line">B[<span class="number">0</span>] = <span class="string">"shrubbery"</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>是:</p>
<p>A现在打印为<code>[&quot;shrubbery&quot;]</code></p>
<p>从技术上讲,我们既没有改变A也没有改变B,我们改变的是这两个变量共同引用(指向)的对象的一部分</p>
<p>通过变量B在原处覆盖了这个对象的一部分内容,因为A像B一样引用了同一个对象,这个改变也会对A产生影响</p>
</blockquote>
</li>
<li><p>这样如何,A会改变吗</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"spam"</span>]</span><br><span class="line">B = A[:]</span><br><span class="line">B[<span class="number">0</span>] = <span class="string">"shrubbery"</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>不会: </p>
<p>A仍然会打印为<code>[&quot;spam&quot;]</code> </p>
<p>由于分片表达式语句会在被赋值给B前创建一个拷贝,这次对B在原处赋值就不会有影响了</p>
<p>在第二个赋值语句后,就有了两个拥有相同值的不同列表对象了(在Python中, 我们说它们是<code>==</code>的,却不是<code>is</code>的)<br>第三条赋值语句会改变指向B的列表对象,而不会改变指向A的列表对象</p>
</blockquote>
</li>
</ol>
<hr>
<h1 id="第七章-字符串"><a href="#第七章-字符串" class="headerlink" title="第七章 字符串"></a>第七章 字符串</h1><blockquote>
<p>本章深入学习字符串这个对象类型</p>
<blockquote>
<ul>
<li>学习如何编写字符串常量</li>
<li>探索字符串操作,包括序列表达式、字符串格式化以及字符串方法调用<ul>
<li>学习各种概念,例如,分片、方法调用、三重引号字符串</li>
<li>定义一些关于变量类型的核心概念,例如,序列会共享整个操作的集合</li>
</ul>
</li>
</ul>
</blockquote>
</blockquote>
<p>常见字符串常量和操作</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>S = ‘’</td>
<td>空字符串</td>
</tr>
<tr>
<td>S = “spam’s”</td>
<td>双引号和单引号相同</td>
</tr>
<tr>
<td>S = ‘s\np\ta\x00m’</td>
<td>转义序列</td>
</tr>
<tr>
<td>S = “””…”””</td>
<td>三重引号字符串块</td>
</tr>
<tr>
<td>S = r’\temp\spam’</td>
<td>Raw字符串</td>
</tr>
<tr>
<td>S = b’spam’</td>
<td>Python 3.0中的字节字符串</td>
</tr>
<tr>
<td>S = u’spam’</td>
<td>仅在Python 2.6中使用的Unicode字符串</td>
</tr>
<tr>
<td>S1 + S2</td>
<td>合并</td>
</tr>
<tr>
<td>S * 3</td>
<td>重复</td>
</tr>
<tr>
<td>S[i]</td>
<td>索引</td>
</tr>
<tr>
<td>S[i:j]</td>
<td>分片</td>
</tr>
<tr>
<td>len(S)</td>
<td>求长度</td>
</tr>
<tr>
<td>“a %s parrot” % kind</td>
<td>字符串格式化表达式</td>
</tr>
<tr>
<td>“a {0} parrot”.format(kind)</td>
<td>python 2.6和Python 3.0中的字符串格式化方法</td>
</tr>
<tr>
<td>S.find(‘pa’)</td>
<td>字符串方法调用:搜索</td>
</tr>
<tr>
<td>S.rstrip()</td>
<td>移除空格</td>
</tr>
<tr>
<td>S.replace(‘pa’,’xx’)</td>
<td>替换</td>
</tr>
<tr>
<td>S.split(‘,’)</td>
<td>用占位符分割</td>
</tr>
<tr>
<td>S.isdigit()</td>
<td>内容测试</td>
</tr>
<tr>
<td>S.lower()</td>
<td>短信息转换</td>
</tr>
<tr>
<td>S.endswith(‘spam’)</td>
<td>结束测试</td>
</tr>
<tr>
<td>‘spam’.join(strlist)</td>
<td>插入分隔符</td>
</tr>
<tr>
<td>S.encode(‘latin-1’)</td>
<td>Unicode编码</td>
</tr>
<tr>
<td>for x in S:print(x)</td>
<td>迭代</td>
</tr>
<tr>
<td>‘spam’ in S</td>
<td>成员关系</td>
</tr>
<tr>
<td>[c * 2 for c in S]</td>
<td>列表解析表达式</td>
</tr>
<tr>
<td>map(ord, S)</td>
<td></td>
</tr>
</tbody></table>
<hr>
<h2 id="字符串常量"><a href="#字符串常量" class="headerlink" title="字符串常量"></a>字符串常量</h2><p>编写</p>
<blockquote>
<ul>
<li>单引号:<code>&#39;spa&#39;&#39;m&#39;</code></li>
<li>双引号:<code>&quot;spa&#39;m&quot;</code></li>
<li>三引号:’’’…spam…’’’,”””…spam…”””</li>
<li>转义字符:”s\tp\na\0m”</li>
<li>Raw字符串:r”C:\new\test.spm”</li>
<li>Byte字符串:b’sp\x01am’</li>
<li>仅在Python 2.6中使用的Unicode字符串:u’eggs\u0020spam’</li>
</ul>
</blockquote>
<h3 id="单双引号字符串是一样的"><a href="#单双引号字符串是一样的" class="headerlink" title="单双引号字符串是一样的"></a>单双引号字符串是一样的</h3><p>在Python字符串中,单引号和双引号字符是可以互换的,两种形式同样有效并返回相同类型的对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'kight"s'</span>, <span class="string">"knight's"</span></span><br><span class="line">(<span class="string">'kight"s'</span>, <span class="string">"knight's"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'knight\'s'</span>, <span class="string">"knight\"s"</span></span><br><span class="line">(<span class="string">"knight's"</span>, <span class="string">'knight"s'</span>)</span><br></pre></td></tr></table></figure>

<p>两种形式可以不用<code>\</code>转义字符就实现在一个字符串中包含另一种引号</p>
<p>可以通过反斜杠转义字符嵌入引号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>title = <span class="string">"Meaning "</span> <span class="string">'of'</span> <span class="string">" Life"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>title</span><br><span class="line"><span class="string">'Meaning of Life'</span></span><br></pre></td></tr></table></figure>

<p>Python自动在任意的表达式中<strong>合并</strong>相邻的字符串常量</p>
<p>可以在字符串之间增加<code>+</code>操作符进行<strong>合并</strong></p>
<h3 id="用转义序列代表特殊字节"><a href="#用转义序列代表特殊字节" class="headerlink" title="用转义序列代表特殊字节"></a>用转义序列代表特殊字节</h3><p><code>\</code>用来引入特殊的字符编码,即转义序列</p>
<p>字符串常量中字符<code>\</code>及它后边的一个或多个字符会被一个单个字符所替代,这个字符通过转义序列定义了一个二进制值</p>
<p><code>\n</code>被替换为一个换行字符(<code>ASCII</code>编码为10)</p>
<table>
<thead>
<tr>
<th>转义</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>\newline</td>
<td>忽视(连续)</td>
</tr>
<tr>
<td>\</td>
<td>反斜杠(保留\)</td>
</tr>
<tr>
<td>\‘</td>
<td>单引号(保留’)</td>
</tr>
<tr>
<td>\‘’</td>
<td>双引号(保留”)</td>
</tr>
<tr>
<td>\a</td>
<td>响铃</td>
</tr>
<tr>
<td>\b</td>
<td>倒退</td>
</tr>
<tr>
<td>\f</td>
<td>换页</td>
</tr>
<tr>
<td>\n</td>
<td>新行</td>
</tr>
<tr>
<td>\r</td>
<td>返回</td>
</tr>
<tr>
<td>\t</td>
<td>水平制表符</td>
</tr>
<tr>
<td>\v</td>
<td>垂直制表符</td>
</tr>
<tr>
<td>\N{id}</td>
<td>Unicode数据库ID</td>
</tr>
<tr>
<td>\uhhhh</td>
<td>Unicode 16位的十六进制值</td>
</tr>
<tr>
<td>\xhhhhhhhh</td>
<td>Unicode 32位的十六进制值</td>
</tr>
<tr>
<td>\xhh</td>
<td>十六进制值</td>
</tr>
<tr>
<td>\000</td>
<td>八进制值</td>
</tr>
<tr>
<td>\0</td>
<td>Null</td>
</tr>
<tr>
<td>\other</td>
<td>不转义(保留)</td>
</tr>
</tbody></table>
<p>转义字符列表</p>
<p>Python允许嵌入绝对的二进制值(以八进制编码嵌入)</p>
<p>Python没有字符串结尾标志符</p>
<p>没有合法的转义编码识别出现在<code>\</code>后时会保留反斜杠</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'a\nb\tc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="string">'a\nb\tc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(s)</span><br><span class="line">a</span><br><span class="line">b	c</span><br></pre></td></tr></table></figure>

<p>交互模式下以转义字符形式回显,<code>print</code>将其解释出来</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">'a\nb\tc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(s)</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>内置<code>len</code>函数返回一个字符串字节数而非显示的字符数</p>
<h3 id="raw字符串抑制转义"><a href="#raw字符串抑制转义" class="headerlink" title="raw字符串抑制转义"></a>raw字符串抑制转义</h3><p>在字符串的引号前输入<code>r</code>会关闭转义机制,<code>\</code>作为常量保持</p>
<p>raw字符串也可用于正则表达式</p>
<p>在Windows下使用<code>/</code>与<code>\</code>表示路径同样有效</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>path = <span class="string">r'C:\new\text.dat'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>path			<span class="comment"># Show as Python code</span></span><br><span class="line"><span class="string">'C:\\new\\text.dat'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(path)		<span class="comment"># User-friendly format</span></span><br><span class="line">C:\new\text.dat</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(path)		<span class="comment"># String length</span></span><br><span class="line"><span class="number">15</span></span><br></pre></td></tr></table></figure>

<p>交互提示模式下Python会显示转义序列</p>
<p>打印语句提供了对用户友好的格式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">r"...\"</span></span><br><span class="line"><span class="string">  File "</span>&lt;stdin&gt;<span class="string">", line 1</span></span><br><span class="line"><span class="string">    r"</span>...\<span class="string">"</span></span><br><span class="line"><span class="string">          ^</span></span><br><span class="line"><span class="string">SyntaxError: EOL while scanning string literal</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; r'1\nb\tc\\'[:-1]</span></span><br><span class="line"><span class="string">'1\\nb\\tc\\'</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; r'1\nb\tc' + '\\'</span></span><br><span class="line"><span class="string">'1\\nb\\tc\\'</span></span><br></pre></td></tr></table></figure>

<p>raw字符串不能以<strong>单个</strong>的<strong>反斜杠</strong>结尾</p>
<p>可以使用两个反斜杠分片掉第二个反斜杠或手动添加一个反斜杠</p>
<h3 id="三重引号编写多行字符串块"><a href="#三重引号编写多行字符串块" class="headerlink" title="三重引号编写多行字符串块"></a>三重引号编写多行字符串块</h3><p>以三重引号(单引号或双引号)开始,紧跟任意行数的文本,以开始时的同样的三重引号结尾</p>
<blockquote>
<ul>
<li>三重引号可以输入多行文本</li>
<li>三重引号可用作多行注释</li>
<li>三重引号可以在开发过程中废除一些代码</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>mantra = <span class="string">"""Always look</span></span><br><span class="line"><span class="string"><span class="meta">... </span>on the bright</span></span><br><span class="line"><span class="string"><span class="meta">... </span>side of life."""</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mantra</span><br><span class="line"><span class="string">'Always look\non the bright\nside of life.'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(mantra)</span><br><span class="line">Always look</span><br><span class="line">on the bright</span><br><span class="line">side of life.</span><br></pre></td></tr></table></figure>

<p>嵌入在这个字符串文本中的单引号和双引号可以转义也可以不转义</p>
<p>代码折行处会被替换为<code>\n</code></p>
<hr>
<h2 id="实际应用中的字符串"><a href="#实际应用中的字符串" class="headerlink" title="实际应用中的字符串"></a>实际应用中的字符串</h2><h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(<span class="string">'abc'</span>)		<span class="comment"># Length:number of items</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'abc'</span> + <span class="string">'def'</span>	<span class="comment"># Concatenation:a new string</span></span><br><span class="line"><span class="string">'abcdef'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Ni!'</span> * <span class="number">4</span>		<span class="comment"># Repetition:like "Ni!" + "Ni!" + ...</span></span><br><span class="line"><span class="string">'Ni!Ni!Ni!Ni!'</span></span><br></pre></td></tr></table></figure>

<p><code>+</code>操作符进行合并</p>
<p><code>*</code>操作符进行重复</p>
<p><code>len</code>函数返回一个字符串的长度</p>
<p>结果是创建了一个新的字符串对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>myjob = <span class="string">"hacker"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> c <span class="keyword">in</span> myjob:print(c, end=<span class="string">' '</span>)	<span class="comment"># Step through items</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">h a c k e r </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"k"</span> <span class="keyword">in</span> myjob						<span class="comment"># Found</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"z"</span> <span class="keyword">in</span> myjob						<span class="comment"># Not found</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'spam'</span> <span class="keyword">in</span> <span class="string">'abcspamdef'</span>				<span class="comment"># Substring saerch,no position returned</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p><code>for</code>语句可以在字符串中进行循环迭代</p>
<p><code>in</code>表达式操作符对字符和子字符串进行成员关系测试,返回布尔结果</p>
<h3 id="索引和切片"><a href="#索引和切片" class="headerlink" title="索引和切片"></a>索引和切片</h3><p>字符串中的字符通过索引提取</p>
<blockquote>
<ul>
<li>第一个元素的偏移量为0</li>
<li>负偏移索引意味着从右边反向计数</li>
</ul>
</blockquote>
<p>分片是索引的一种通用形式,返回部分字符串而不是单个字符</p>
<blockquote>
<ul>
<li>以冒号分割上下边界</li>
<li>上边界不包含在内</li>
<li>没有给出时,下边界默认为0,上边界默认为序列长度</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">0</span>], S[<span class="number">-2</span>]				<span class="comment"># Indexing from front or end</span></span><br><span class="line">(<span class="string">'s'</span>, <span class="string">'a'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">1</span>:<span class="number">3</span>], S[<span class="number">1</span>:], S[:<span class="number">-1</span>]	<span class="comment"># Slicing:extract a section</span></span><br><span class="line">(<span class="string">'pa'</span>, <span class="string">'pam'</span>, <span class="string">'spa'</span>)</span><br></pre></td></tr></table></figure>

<p><code>负偏移+字符串长度=正偏移值</code></p>
<h4 id="拓展分片-第三个限制值"><a href="#拓展分片-第三个限制值" class="headerlink" title="拓展分片:第三个限制值"></a>拓展分片:第三个限制值</h4><p><code>X[I:J:K]</code></p>
<p>第三个索引用作步进,表示索引X对象中从偏移为<code>I</code>到偏移为<code>J-1</code>,每隔<code>K</code>元素索引一次,K默认为</p>
<p>负值表示从右到左步进</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'spam'</span>[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line"><span class="string">'pa'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'spam'</span>[slice(<span class="number">1</span>,<span class="number">3</span>)]	<span class="comment"># Slicing syntax</span></span><br><span class="line"><span class="string">'pa'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'spam'</span>[::<span class="number">-1</span>]		<span class="comment"># Slice objects</span></span><br><span class="line"><span class="string">'maps'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'spam'</span>[slice(<span class="literal">None</span>,<span class="literal">None</span>,<span class="number">-1</span>)]</span><br><span class="line"><span class="string">'maps'</span></span><br></pre></td></tr></table></figure>

<p>分片等同于用一个分片对象进行索引</p>
<h3 id="为什么要在意-分片"><a href="#为什么要在意-分片" class="headerlink" title="为什么要在意:分片"></a>为什么要在意:分片</h3><ul>
<li>分片可以仅返回需要的项</li>
<li>分片可以清除每行字符的换行符,但是采用<code>line.rstrip()</code>更好,因为可以留下没有换行符的行的最后一个字符</li>
</ul>
<h3 id="字符串转换工具"><a href="#字符串转换工具" class="headerlink" title="字符串转换工具"></a>字符串转换工具</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: must be str, <span class="keyword">not</span> int</span><br></pre></td></tr></table></figure>

<p>Python中不能让数字与字符串相加</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">"42"</span>),str(<span class="number">42</span>)	<span class="comment"># Convert from/to string</span></span><br><span class="line">(<span class="number">42</span>, <span class="string">'42'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>repr(<span class="number">42</span>)			<span class="comment"># Convert to as-code string</span></span><br><span class="line"><span class="string">'42'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(str(<span class="string">'spam'</span>),repr(<span class="string">'spam'</span>))</span><br><span class="line">spam <span class="string">'spam'</span></span><br></pre></td></tr></table></figure>

<p><code>int</code>函数将字符串转换为数字</p>
<p><code>str</code>函数将数字转换为字符串表达式</p>
<p><code>repr</code>函数将一个对象转换为字符串形式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">"42"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>I = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S + I</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: must be str, <span class="keyword">not</span> int</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(S) + I		<span class="comment"># Force addition</span></span><br><span class="line"><span class="number">43</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S + str(I)		<span class="comment"># Force concatenation</span></span><br><span class="line"><span class="string">'421'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(<span class="number">3.1415</span>),float(<span class="string">"1.5"</span>)</span><br><span class="line">(<span class="string">'3.1415'</span>, <span class="number">1.5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text = <span class="string">"1.234E-10"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(text)</span><br><span class="line"><span class="number">1.234e-10</span></span><br></pre></td></tr></table></figure>

<p>对字符串和数字类型使用<code>+</code>运算时可以手动转换</p>
<p><code>str</code>函数可以把浮点数转换成字符串</p>
<p><code>int</code>函数可以把字符串转换成整数</p>
<p><code>float</code>函数可以把字符串转换成浮点数</p>
<p><code>eval</code>将会运行一个包含了Python表达式代码的字符串,并能够将字符串转换为任意类型的对象</p>
<h4 id="字符串代码转换"><a href="#字符串代码转换" class="headerlink" title="字符串代码转换"></a>字符串代码转换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ord(<span class="string">'s'</span>)</span><br><span class="line"><span class="number">115</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chr(<span class="number">115</span>)</span><br><span class="line"><span class="string">'s'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'5'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = chr(ord(S) + <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'6'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = chr(ord(S) + <span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'7'</span></span><br></pre></td></tr></table></figure>

<p><code>ord</code>函数将单个字符转换为对应的<code>ASCII</code>码</p>
<p><code>chr</code>函数获取ASCII码并将其转换为对应的字符</p>
<p>配合使用可以生成下一个字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>B = <span class="string">'1101'</span>		<span class="comment"># Convert binary digits to integer with ord</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>I = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> B != <span class="string">''</span>:</span><br><span class="line"><span class="meta">... </span>    I = I * <span class="number">2</span> + (ord(B[<span class="number">0</span>]) - ord(<span class="string">'0'</span>))</span><br><span class="line"><span class="meta">... </span>    B = B[<span class="number">1</span>:]</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>I</span><br><span class="line"><span class="number">13</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'1101'</span>, <span class="number">2</span>)	<span class="comment"># Convert binary to integer:built-in</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(<span class="number">13</span>)			<span class="comment"># Convert integer to binary</span></span><br><span class="line"><span class="string">'0b1101'</span></span><br></pre></td></tr></table></figure>

<p>与循环语句一起配合使用,可以将一个表示二进制数的字符串转化为等值的整数</p>
<h3 id="修改字符串"><a href="#修改字符串" class="headerlink" title="修改字符串"></a>修改字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S[<span class="number">0</span>] = <span class="string">"x"</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">'str'</span> object does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = S + <span class="string">"SPAM!"</span>		<span class="comment"># To change a string,make a new one</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'spamSPAM!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = S[:<span class="number">4</span>] + <span class="string">'Burger'</span> + S[<span class="number">-1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'spamBurger!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'spamBurger!'</span></span><br><span class="line"><span class="string">'spamBurger!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'splot'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = S.replace(<span class="string">'pl'</span>,<span class="string">'pamal'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'spamalot'</span></span><br></pre></td></tr></table></figure>

<p>字符串不能在原处修改,需要利用合并、分片这样的工具来建立并赋值给一个新的字符串</p>
<p><strong>字符串方法</strong>每次都生成新的字符串对象</p>
<p><code>str.replace(arg1,arg2)</code>方法将指定字符串进行替换并生成新的字符串对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'That is %d %s bird!'</span> % (<span class="number">1</span>, <span class="string">'dead'</span>)			<span class="comment"># Format expression</span></span><br><span class="line"><span class="string">'That is 1 dead bird!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'That is &#123;0&#125; &#123;1&#125; bird!'</span>.format(<span class="number">1</span>, <span class="string">'dead'</span>)	<span class="comment"># Format method in 2.6 and 3.0</span></span><br><span class="line"><span class="string">'That is 1 dead bird!'</span></span><br></pre></td></tr></table></figure>

<p>可以通过字符串格式化表达式来创建新的文本值</p>
<p>格式化的结果是根据指定的格式创建新的字符串对象</p>
<hr>
<h2 id="字符串方法"><a href="#字符串方法" class="headerlink" title="字符串方法"></a>字符串方法</h2><p>表达式和内置函数可能在不同范围的类型有效,方法特定于对象类型</p>
<p>方法调用同时进行了两次操作:获取属性和函数调用</p>
<blockquote>
<ul>
<li><p>属性读取</p>
<p><code>object.attribute</code>格式的表达式可以理解为读取<code>object</code>对象的<code>attribute</code>的值</p>
</li>
<li><p>函数调用表达式</p>
<p>具有函数(参数)格式的表达式意味着调用函数代码,传递0或更多用都好隔开的参数对象,最后返回函数的返回值</p>
</li>
</ul>
</blockquote>
<p>Python 3.0中的字符串方法调用</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>S.capitalize()</td>
<td></td>
</tr>
<tr>
<td>S.ljust(width [, fill])</td>
<td></td>
</tr>
<tr>
<td>S.center(width [, fill])</td>
<td></td>
</tr>
<tr>
<td>S.lower()</td>
<td></td>
</tr>
<tr>
<td>S.count(sub [, start [, end]])</td>
<td></td>
</tr>
<tr>
<td>S.lstrip([chars])</td>
<td></td>
</tr>
<tr>
<td>S.encode([encoding [, errors]])</td>
<td></td>
</tr>
<tr>
<td>S.maketrans(x[, y[, z]])</td>
<td></td>
</tr>
<tr>
<td>S.endswith()</td>
<td></td>
</tr>
<tr>
<td>S.partition(sep)</td>
<td></td>
</tr>
<tr>
<td>S.expandtabs([tabsize])</td>
<td></td>
</tr>
<tr>
<td>S.replace(old, new [, count])</td>
<td></td>
</tr>
<tr>
<td>S.find(sub [, start [, end]])</td>
<td></td>
</tr>
<tr>
<td>S.rfind(sub [,start [, end]])</td>
<td></td>
</tr>
<tr>
<td>S.format(fmtstr, <em>args, *</em>kwargs)</td>
<td></td>
</tr>
<tr>
<td>S.rindex(sub [, start [, end]])</td>
<td></td>
</tr>
<tr>
<td>S.index(sub [, start [, end]])</td>
<td></td>
</tr>
<tr>
<td>S.rjust(width [, fill])</td>
<td></td>
</tr>
<tr>
<td>S.isalnum()</td>
<td></td>
</tr>
<tr>
<td>S.isalpha()</td>
<td></td>
</tr>
<tr>
<td>S.isdecimai()</td>
<td></td>
</tr>
<tr>
<td>S.isdigit()</td>
<td></td>
</tr>
<tr>
<td>S.isidentifier()</td>
<td></td>
</tr>
<tr>
<td>S.islower()</td>
<td></td>
</tr>
<tr>
<td>S.isnumeric()</td>
<td></td>
</tr>
<tr>
<td>S.isprintable()</td>
<td></td>
</tr>
<tr>
<td>S.isspace()</td>
<td></td>
</tr>
<tr>
<td>S.istitle()</td>
<td></td>
</tr>
<tr>
<td>S.isupper()</td>
<td></td>
</tr>
<tr>
<td>S.join(iterable)</td>
<td></td>
</tr>
<tr>
<td>S.rpartition(sep)</td>
<td></td>
</tr>
<tr>
<td>S.rsplit([sep[, maxsplit]])</td>
<td></td>
</tr>
<tr>
<td>S.rstrip([chars])</td>
<td></td>
</tr>
<tr>
<td>S.split([sep [,maxsplit]])</td>
<td></td>
</tr>
<tr>
<td>S.splitlines([keepends])</td>
<td></td>
</tr>
<tr>
<td>S.startswith(prefix [. start [. end]])</td>
<td></td>
</tr>
<tr>
<td>S.strip([chars])</td>
<td></td>
</tr>
<tr>
<td>S.swapcase()</td>
<td></td>
</tr>
<tr>
<td>S.title()</td>
<td></td>
</tr>
<tr>
<td>S.translate(map)</td>
<td></td>
</tr>
<tr>
<td>S.upper()</td>
<td></td>
</tr>
<tr>
<td>S.zfill(width)</td>
<td></td>
</tr>
</tbody></table>
<h3 id="字符串方法实例-修改字符串"><a href="#字符串方法实例-修改字符串" class="headerlink" title="字符串方法实例:修改字符串"></a>字符串方法实例:修改字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'spammy'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = S[:<span class="number">3</span>] + <span class="string">'xx'</span> + S[<span class="number">5</span>:]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'spaxxy'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S  = <span class="string">'spammy'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = S.replace(<span class="string">'mm'</span>, <span class="string">'xx'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'spaxxy'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'aa$bb$cc$dd'</span>.replace(<span class="string">'$'</span>, <span class="string">'SPAM'</span>)</span><br><span class="line"><span class="string">'aaSPAMbbSPAMccSPAMdd'</span></span><br></pre></td></tr></table></figure>

<p><code>replace</code>方法的参数是原始子字符串和替换原始子字符串的字符串,之后进行全局搜索并替换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'xxxxSPAMxxxxSPAMxxxx'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.replace(<span class="string">'SPAM'</span>, <span class="string">'EGGS'</span>)		<span class="comment"># Replace all</span></span><br><span class="line"><span class="string">'xxxxEGGSxxxxEGGSxxxx'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S.replace(<span class="string">'SPAM'</span>, <span class="string">'EGGS'</span>, <span class="number">1</span>)	<span class="comment"># Replace one</span></span><br><span class="line"><span class="string">'xxxxEGGSxxxxSPAMxxxx'</span></span><br></pre></td></tr></table></figure>

<p>第三个参数可以只替换溢出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'xxxxSPAMxxxxSPAMxxxx'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>where = S.find(<span class="string">'SPAM'</span>)		<span class="comment"># Search for position</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>where						<span class="comment"># Occurs at offset 4</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = S[:where] + <span class="string">'EGGS'</span> + S[(where+<span class="number">4</span>):]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'xxxxEGGSxxxxSPAMxxxx'</span></span><br></pre></td></tr></table></figure>

<p><code>find</code>方法返回子字符串出现的偏移,未找到时返回-1</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'spammy'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = list(S)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'s'</span>, <span class="string">'p'</span>, <span class="string">'a'</span>, <span class="string">'m'</span>, <span class="string">'m'</span>, <span class="string">'y'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">3</span>] = <span class="string">'x'</span>		<span class="comment"># Works for lists, not strings</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">4</span>] = <span class="string">'x'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'s'</span>, <span class="string">'p'</span>, <span class="string">'a'</span>, <span class="string">'x'</span>, <span class="string">'x'</span>, <span class="string">'y'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">''</span>.join(L)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S</span><br><span class="line"><span class="string">'spaxxy'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'SPAM'</span>.join([<span class="string">'eggs'</span>, <span class="string">'sausage'</span>, <span class="string">'ham'</span>, <span class="string">'toast'</span>])</span><br><span class="line"><span class="string">'eggsSPAMsausageSPAMhamSPAMtoast'</span></span><br></pre></td></tr></table></figure>

<p>当对一个超长字符串进行修改较多时,可能需要将字符串转换为一个支持原处修改的对象</p>
<p><code>list</code>函数以任意序列中的元素创立一个新的列表</p>
<p><code>str.join()</code>方法将列表字符串连在一起并用分隔符隔开</p>
<h3 id="字符串方法实例-文本解析"><a href="#字符串方法实例-文本解析" class="headerlink" title="字符串方法实例:文本解析"></a>字符串方法实例:文本解析</h3><p>文本解析:分析结构并提取子串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = <span class="string">'aaa bbb ccc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cols = line.split()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cols</span><br><span class="line">[<span class="string">'aaa'</span>, <span class="string">'bbb'</span>, <span class="string">'ccc'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = <span class="string">'bob,hacker,40'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.split(<span class="string">','</span>)</span><br><span class="line">[<span class="string">'bob'</span>, <span class="string">'hacker'</span>, <span class="string">'40'</span>]</span><br><span class="line">&gt;&gt; line = <span class="string">"i'mSPAMaSPAMlumberjack"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.split(<span class="string">"SPAM"</span>)</span><br><span class="line">[<span class="string">"i'm"</span>, <span class="string">'a'</span>, <span class="string">'lumberjack'</span>]</span><br></pre></td></tr></table></figure>

<p><code>str.split()</code>方法将一个字符串分割为一个子字符串的列表,以分隔符字符串为标准</p>
<p>分隔符默认为空格(空格、制表符、换行符)</p>
<p>分隔符可以是多个字符的字符串</p>
<h3 id="实际应用中的其他常见字符串方法"><a href="#实际应用中的其他常见字符串方法" class="headerlink" title="实际应用中的其他常见字符串方法"></a>实际应用中的其他常见字符串方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = <span class="string">"The knights who say Ni!\n"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.rstrip()</span><br><span class="line"><span class="string">'The knights who say Ni!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.upper()</span><br><span class="line"><span class="string">'THE KNIGHTS WHO SAY NI!\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.isalpha()</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.endswith(<span class="string">'Ni!\n'</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.startswith(<span class="string">'The'</span>)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<p><code>str.strip()</code>方法清除每行末尾的空格(空格、换行符、制表符)</p>
<p><code>str.upper()</code>将字母转换为大写</p>
<p><code>str.isalpha()</code>测试是否所有字符都为字母</p>
<p><code>str.endswith()</code>测试末尾的子字符串</p>
<p><code>str.startswith()</code>测试起始的子字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = <span class="string">'The knights who say Ni!\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.find(<span class="string">'Ni'</span>) != <span class="number">-1</span>	<span class="comment"># Search via method call or expression</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'Ni'</span> <span class="keyword">in</span> line</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sub = <span class="string">'Ni!\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.endswith(sub)		<span class="comment"># End test via method call or slice</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line[-len(sub):] == sub</span><br><span class="line"><span class="literal">True</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>成员操作符<code>in</code>能够用来检测一个子字符串是否存在</p>
<p><code>len</code>和分片操作能够用来做字符串末尾的检测</p>
<h3 id="最初的字符串模块-在Python-3-0中删除"><a href="#最初的字符串模块-在Python-3-0中删除" class="headerlink" title="最初的字符串模块(在Python 3.0中删除)"></a>最初的字符串模块(在Python 3.0中删除)</h3><p>Python出现的前十年,只提供<code>string</code>标准库模块处理字符串,其中包含的函数大约相当于目前的字符串对象方法集</p>
<p>Python 2.0时,增加字符串对象方法,为了保持兼容性仍保留<code>string</code>模块</p>
<p>Python 3.0中已删除<code>string</code>模块中同等的字符串方法,只保留了预定义的字符串常数以及模板对象系统</p>
<p>Python 2.6中有两种方法启用高级字符串操作</p>
<blockquote>
<ul>
<li><p>调用对象方法</p>
<p><code>str.method(arguments)</code></p>
</li>
<li><p>调用<code>string</code>模块,把对象当成自变量传递进去</p>
<p><code>string.method(str,arguments)</code></p>
</li>
</ul>
</blockquote>
<p>使用方法调用而不是模块调用的理由</p>
<blockquote>
<ul>
<li>模块调用已从Python 3.0版删除</li>
<li>模块调用法需要导入<code>string</code>模块</li>
<li>模块调用需要多打几个字符(以<code>import</code>加载模块而不是<code>from</code>时)</li>
<li>模块运行速度比方法慢</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'a+b+c+'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = S.replace(<span class="string">'+'</span>, <span class="string">'spam'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line"><span class="string">'aspambspamcspam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> string</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = string.replace(S, <span class="string">'+'</span>, <span class="string">'spam'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line"><span class="string">'aspambspamcspam'</span></span><br></pre></td></tr></table></figure>

<p>要通过<code>string</code>模块获取相同的操作,需要先导入该模块并传入对象</p>
<hr>
<h2 id="字符串格式化表达式"><a href="#字符串格式化表达式" class="headerlink" title="字符串格式化表达式"></a>字符串格式化表达式</h2><p>字符串格式化允许在一个单个的步骤中对一个字符串执行多个特定类型的替换</p>
<p>格式化会返回新的字符串作为结果而不是对原始的格式化字符串进行修改</p>
<h3 id="字符串格式化实现形式"><a href="#字符串格式化实现形式" class="headerlink" title="字符串格式化实现形式"></a>字符串格式化实现形式</h3><blockquote>
<ul>
<li>字符串格式化表达式</li>
<li>字符串格式化方法调用</li>
</ul>
</blockquote>
<h3 id="字符串格式化表达式-1"><a href="#字符串格式化表达式-1" class="headerlink" title="字符串格式化表达式"></a>字符串格式化表达式</h3><p><code>%</code>提供了简单的方法对字符串的值进行格式化,这一操作取决于格式化定义的字符串</p>
<p>格式化字符串</p>
<blockquote>
<ul>
<li><code>%</code>操作符左侧放置一个需要进行格式化的字符串,这个字符串带有一个或多个嵌入的转换目标,都以<code>%</code>开头</li>
<li><code>%</code>操作符右侧放置一个对象,这个对象将会插入到左侧想让Python进行格式化字符串的一个(或多个)转换目标的位置上去</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'That is %d %s bird!'</span> % (<span class="number">1</span>, <span class="string">'dead'</span>)		<span class="comment"># Format expression</span></span><br><span class="line"><span class="string">'That is 1 dead bird!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>exclamation = <span class="string">"Ni"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"The knights who say %s!"</span> % exclamation</span><br><span class="line"><span class="string">'The knights who say Ni!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"%d %s %d you"</span> % (<span class="number">1</span>, <span class="string">'spam'</span>, <span class="number">4</span>)</span><br><span class="line"><span class="string">'1 spam 4 you'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"%s -- %s -- %s"</span> % (<span class="number">42</span>, <span class="number">3.14159</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="string">'42 -- 3.14159 -- [1, 2, 3]'</span></span><br></pre></td></tr></table></figure>

<p>当不止一个值待插入时,<code>%</code>右侧应放置包含多个值的元组对象</p>
<p><code>%s</code>将其对应的不同类型的对象转换为字符串类型打印</p>
<h3 id="更高级的字符串格式化表达式"><a href="#更高级的字符串格式化表达式" class="headerlink" title="更高级的字符串格式化表达式"></a>更高级的字符串格式化表达式</h3><h4 id="字符串格式化代码"><a href="#字符串格式化代码" class="headerlink" title="字符串格式化代码"></a>字符串格式化代码</h4><table>
<thead>
<tr>
<th>代码</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>s</td>
<td>字符串(或任何对象)</td>
</tr>
<tr>
<td>r</td>
<td>s,但是用repr,而不是str</td>
</tr>
<tr>
<td>c</td>
<td>字符</td>
</tr>
<tr>
<td>d</td>
<td>十进制整数</td>
</tr>
<tr>
<td>i</td>
<td>整数</td>
</tr>
<tr>
<td>u</td>
<td>无符号整数</td>
</tr>
<tr>
<td>o</td>
<td>八进制整数</td>
</tr>
<tr>
<td>x</td>
<td>十六进制整数</td>
</tr>
<tr>
<td>X</td>
<td>x,但打印大写</td>
</tr>
<tr>
<td>e</td>
<td>浮点指数</td>
</tr>
<tr>
<td>E</td>
<td>e,但打印大写</td>
</tr>
<tr>
<td>f</td>
<td>浮点十进制</td>
</tr>
<tr>
<td>F</td>
<td>浮点十进制</td>
</tr>
<tr>
<td>g</td>
<td>浮点e或f</td>
</tr>
<tr>
<td>G</td>
<td>浮点E或F</td>
</tr>
<tr>
<td>%</td>
<td>常量%</td>
</tr>
</tbody></table>
<h4 id="转换目标的通用结构"><a href="#转换目标的通用结构" class="headerlink" title="转换目标的通用结构"></a>转换目标的通用结构</h4><p><code>%[(name)][flags][width][.precision]typecode</code></p>
<blockquote>
<ul>
<li><p>width</p>
<p>字符最小宽度</p>
</li>
<li><p>.precision</p>
<p>字符最大宽度</p>
</li>
<li><p>typecode</p>
<p>字符串格式化代码</p>
</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">1234</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = <span class="string">"integers:...%d...%-6d...%06d"</span> % (x, x, x)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line"><span class="string">'integers:...1234...1234  ...001234'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">1.23456789</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line"><span class="number">1.2345678899999999</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%e | %f | %g'</span> % (x, x, x)</span><br><span class="line"><span class="string">'1.234568e+00 | 1.234568 | 1.23457'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%E'</span> % x</span><br><span class="line"><span class="string">'1.234568E+00'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%-6.2f | %05.2f | %+6.1f'</span> % (x, x, x)</span><br><span class="line"><span class="string">'1.23   | 01.23 |   +1.2'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"%s"</span> % x, str(x)</span><br><span class="line">(<span class="string">'1.23456789'</span>, <span class="string">'1.23456789'</span>)</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><code>-</code>左对齐</li>
<li><code>+</code>正负号</li>
<li><code>0</code>补零</li>
<li>数字为位数(浮点数包括小数点及小数点后的位数)</li>
<li>小数点后的数字为小数点后的位数</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%f, %.2f, %.*f'</span> % (<span class="number">1</span>/<span class="number">3.0</span>, <span class="number">1</span>/<span class="number">3.0</span>, <span class="number">4</span>, <span class="number">1</span>/<span class="number">3.0</span>)</span><br><span class="line"><span class="string">'0.333333, 0.33, 0.3333'</span></span><br></pre></td></tr></table></figure>

<p>使用<code>*</code>指定通过计算得出的<code>width</code>和<code>.precision</code>,其对应值为<code>%</code>运算符右边输出的下一项</p>
<h3 id="基于字典的字符串格式化"><a href="#基于字典的字符串格式化" class="headerlink" title="基于字典的字符串格式化"></a>基于字典的字符串格式化</h3><p>字符串格式化允许左边的转换目标来引用右边字典中的键来提取对应的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="string">"%(n)d %(x)s"</span> % &#123;<span class="string">"n"</span>:<span class="number">1</span>, <span class="string">"x"</span>:<span class="string">"spam"</span>&#125;</span><br><span class="line"><span class="string">'1 spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"%(n)d %(x)s"</span> % &#123;<span class="string">"n"</span>:<span class="number">1</span>, <span class="string">"x"</span>:<span class="string">"spam"</span>&#125;</span><br><span class="line"><span class="string">'1 spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reply = <span class="string">"""								# Template with substitution targets</span></span><br><span class="line"><span class="string"><span class="meta">... </span>Greetings...</span></span><br><span class="line"><span class="string"><span class="meta">... </span>Hello %(name)s!</span></span><br><span class="line"><span class="string"><span class="meta">... </span>Your age squared is %(age)s</span></span><br><span class="line"><span class="string"><span class="meta">... </span>"""</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>values = &#123;<span class="string">'name'</span>: <span class="string">'Bob'</span>, <span class="string">'age'</span>: <span class="number">40</span>&#125;		<span class="comment"># Build up values to substitute</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(reply % values)					<span class="comment"># Preform substitutions</span></span><br><span class="line"></span><br><span class="line">Greetings...</span><br><span class="line">Hello Bob!</span><br><span class="line">Your age squared <span class="keyword">is</span> <span class="number">40</span></span><br></pre></td></tr></table></figure>

<p>格式化字符串<code>%(key)</code>括号引用<code>%</code>操作符右边字典中的键,并提取出它们相应的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>food = <span class="string">'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>age = <span class="number">40</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>vars()</span><br><span class="line">&#123;'__name__': '__main__', '__doc__': None, '__package__': None, '__loader__': &lt;class '_frozen_importlib.BuiltinImporter'&gt;, '__spec__': None, '__annotations__': &#123;&#125;, '__builtins__': &lt;module 'builtins' (built-in)&gt;, 'food': 'spam', 'age': 40&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"%(age)d %(food)s"</span> % vars()</span><br><span class="line"><span class="string">'40 spam'</span></span><br></pre></td></tr></table></figure>

<p>内置函数`vars返回所有在本函数调用时存在的变量的字典对象,可以让格式化字符串通过变量名来访问变量</p>
<hr>
<h2 id="字符串格式化调用方法"><a href="#字符串格式化调用方法" class="headerlink" title="字符串格式化调用方法"></a>字符串格式化调用方法</h2><h3 id="基础知识-1"><a href="#基础知识-1" class="headerlink" title="基础知识"></a>基础知识</h3><p>字符串对象的<code>format</code>方法使用主体字符串作为模板,接受任意多个表示将要根据模板替换的值的参数</p>
<p>主体字符串中,<code>{}</code>通过<code>position</code>或<code>keyword</code>指出替换目标及将要插入的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>template = <span class="string">'&#123;0&#125;, &#123;1&#125; and &#123;2&#125;'</span>				<span class="comment"># By position</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>template.format(<span class="string">'spam'</span>, <span class="string">'ham'</span>, <span class="string">'eggs'</span>)</span><br><span class="line"><span class="string">'spam, ham and eggs'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>template = <span class="string">'&#123;motto&#125;, &#123;pork&#125; and &#123;food&#125;'</span>		<span class="comment"># By  keyword</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>template.format(motto=<span class="string">'spam'</span>, pork=<span class="string">'ham'</span>, food=<span class="string">'eggs'</span>)</span><br><span class="line"><span class="string">'spam, ham and eggs'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>template = <span class="string">'&#123;motto&#125;, &#123;0&#125; and &#123;food&#125;'</span>		<span class="comment"># By both</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>template.format(<span class="string">'ham'</span>, motto=<span class="string">'spam'</span>, food=<span class="string">'eggs'</span>)</span><br><span class="line"><span class="string">'spam, ham and eggs'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;motto&#125;, &#123;0&#125; and &#123;food&#125;'</span>.format(<span class="number">42</span>, motto=<span class="number">3.14</span>, food=[<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="string">'3.14, 42 and [1, 2]'</span></span><br></pre></td></tr></table></figure>

<p>函数和方法的参数可以使用<code>position</code>或<code>keyword</code>来传递</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>somelist = list(<span class="string">'SPAM'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>somelist</span><br><span class="line">[<span class="string">'S'</span>, <span class="string">'P'</span>, <span class="string">'A'</span>, <span class="string">'M'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'first=&#123;0[0]&#125;, third=&#123;0[2]&#125;'</span>.format(somelist)</span><br><span class="line"><span class="string">'first=S, third=A'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'first=&#123;0&#125;, last=&#123;1&#125;'</span>.format(somelist[<span class="number">0</span>], somelist[<span class="number">-1</span>])		<span class="comment"># [-1] fails in fmt</span></span><br><span class="line"><span class="string">'first=S, last=M'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>parts = somelist[<span class="number">0</span>], somelist[<span class="number">-1</span>], somelist[<span class="number">1</span>:<span class="number">3</span>]			<span class="comment"># [1:3] fails in fmt</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'first=&#123;0&#125;, last=&#123;1&#125;, middle=&#123;2&#125;'</span>.format(*parts)</span><br><span class="line"><span class="string">"first=S, last=M, middle=['P', 'A']"</span></span><br></pre></td></tr></table></figure>

<p><code>format</code>创建并返回一个新的字符串对象</p>
<h3 id="添加键、属性和偏移量"><a href="#添加键、属性和偏移量" class="headerlink" title="添加键、属性和偏移量"></a>添加键、属性和偏移量</h3><p>格式化字符串可以指定对象属性和字典键</p>
<blockquote>
<ul>
<li>方括号指定字典键或序列偏移量</li>
<li>点表示’position<code>&#39;或</code>keyword`所引用对象的对象属性</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'My &#123;1[spam]&#125; runs &#123;0.platform&#125;'</span>.format(sys, &#123;<span class="string">'spam'</span>:<span class="string">'laptop'</span>&#125;)</span><br><span class="line"><span class="string">'My laptop runs darwin'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'My &#123;config[spam]&#125; runs &#123;sys.platform&#125;'</span>.format(sys=sys, config=&#123;<span class="string">'spam'</span>: <span class="string">'laptop'</span>&#125;)</span><br><span class="line"><span class="string">'My laptop runs darwin'</span></span><br></pre></td></tr></table></figure>

<p>只有单个的正的偏移才能在格式化字符串的语法中生效</p>
<p>必须在格式化字符串之外才能指定负的偏移或分片</p>
<h3 id="添加具体格式化"><a href="#添加具体格式化" class="headerlink" title="添加具体格式化"></a>添加具体格式化</h3><p>替换目标的标识之后使用一个冒号,后面跟着可以指定字段大小、对齐方式和一个特定类型编码的格式化声明</p>
<p>格式化字符串形式</p>
<p><code>{fieldname!conversionflag:formatspec}</code></p>
<p>其中<code>formatspec</code>组成形式(方括号表示可选的组成,并且不能编写为常量)</p>
<p><code>[[fill]align][sign][#][0][width][/precision][typecode]</code></p>
<blockquote>
<ul>
<li><p>fieldname</p>
<p>指定参数的一个数字或关键字,后面跟着可选的<code>.name</code>或<code>[index]</code></p>
</li>
<li><p>conversionflag</p>
<p>可以是<code>r</code>、<code>s</code>或<code>a</code>分别是在该值上对<code>repr</code>、<code>str</code>或<code>ascii</code>内置函数的一次调用</p>
</li>
<li><p><code>Formatspec</code></p>
<p>指定如何表示该值,包括字段宽度、对齐方式、补零、小数点精度等</p>
<p>可以包含嵌套的、只带有<code>{}</code>的格式化字符串,它从参数列表动态地获取值</p>
<ul>
<li><p><code>align</code></p>
<p>可以是<code>&lt;</code>、<code>&gt;</code>、<code>=</code>或’^`,表示左对齐、右对齐、一个标记字符后的补充或居中对齐’</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:10&#125; = &#123;1:10&#125;'</span>.format(<span class="string">'spam'</span>, <span class="number">123.4567</span>)</span><br><span class="line"><span class="string">'spam       =   123.4567'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:&gt;10&#125; = &#123;1:&lt;10&#125;'</span>.format(<span class="string">'spam'</span>, <span class="number">123.4567</span>)</span><br><span class="line"><span class="string">'      spam = 123.4567  '</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0.platform:&gt;10&#125; = &#123;1[item]:&lt;10&#125;'</span>.format(sys, dict(item=<span class="string">'laptop'</span>))</span><br><span class="line"><span class="string">'    darwin = laptop    '</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:e&#125;, &#123;1:.3&#125;, &#123;2:g&#125;'</span>.format(<span class="number">3.14159</span>,<span class="number">3.14159</span>,<span class="number">3.14159</span>)</span><br><span class="line"><span class="string">'3.141590e+00, 3.14, 3.14159'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:e&#125;, &#123;1:.3e&#125;, &#123;2:8&#125;'</span>.format(<span class="number">3.14159</span>, <span class="number">3.14159</span>, <span class="number">3.14159</span>)</span><br><span class="line"><span class="string">'3.141590e+00, 3.142e+00,  3.14159'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:f&#125;, &#123;1:.2f&#125;, &#123;2:06.2f&#125;'</span>.format(<span class="number">3.14159</span>, <span class="number">3.14159</span>, <span class="number">3.14159</span>)</span><br><span class="line"><span class="string">'3.141590, 3.14, 003.14'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:X&#125;, &#123;1:o&#125;, &#123;2:b&#125;'</span>.format(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)	<span class="comment"># Hex,octal,binary</span></span><br><span class="line"><span class="string">'FF, 377, 11111111'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(<span class="number">255</span>), int(<span class="string">'11111111'</span>, <span class="number">2</span>), <span class="number">0b11111111</span>	<span class="comment"># Other to/from binary</span></span><br><span class="line">(<span class="string">'0b11111111'</span>, <span class="number">255</span>, <span class="number">255</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hex(<span class="number">255</span>), int(<span class="string">'FF'</span>,<span class="number">16</span>), <span class="number">0xFF</span>				<span class="comment"># Other to/from hex</span></span><br><span class="line">(<span class="string">'0xff'</span>, <span class="number">255</span>, <span class="number">255</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>oct(<span class="number">255</span>), int(<span class="string">'377'</span>, <span class="number">8</span>), <span class="number">0o377</span>				<span class="comment"># Other to/from octal</span></span><br><span class="line">(<span class="string">'0o377'</span>, <span class="number">255</span>, <span class="number">255</span>)								<span class="comment"># 0377 works in 2.6, not 3.0!</span></span><br></pre></td></tr></table></figure>

<p>以<code>%</code>类型编码显示百分比</p>
<p><code>b</code>类型编码用来以二进制格式显示整数</p>
<p><code>d</code>唯一表示十进制整数而不是<code>i</code>或<code>u</code></p>
<p>浮点数支持与<code>%</code>表达式中相同的类型代码和格式化声明</p>
<p>格式化方法支持十六进制、八进制值和二进制格式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:.2f&#125;'</span>.format(<span class="number">1</span> / <span class="number">3.0</span>)		<span class="comment"># Paramenters hardcoded</span></span><br><span class="line"><span class="string">'0.33'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%.2f'</span> % (<span class="number">1</span> / <span class="number">3.0</span>)</span><br><span class="line"><span class="string">'0.33'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:.&#123;1&#125;f&#125;'</span>.format(<span class="number">1</span> / <span class="number">3.0</span>, <span class="number">4</span>)	<span class="comment"># Take value from arguments</span></span><br><span class="line"><span class="string">'0.3333'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%.*f'</span> % (<span class="number">4</span>, <span class="number">1</span> / <span class="number">3.0</span>)			<span class="comment"># Ditto for expression</span></span><br><span class="line"><span class="string">'0.3333'</span></span><br></pre></td></tr></table></figure>

<p>格式化参数可以通过嵌套的格式化语法从参数列表动态获取</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:.2f&#125;'</span>,format(<span class="number">1.2345</span>)	<span class="comment"># String method</span></span><br><span class="line">(<span class="string">'&#123;0:.2f&#125;'</span>, <span class="string">'1.2345'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>format(<span class="number">1.2345</span>, <span class="string">'.2f'</span>)		<span class="comment"># Built-in function</span></span><br><span class="line"><span class="string">'1.23'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%.2f'</span> % <span class="number">1.2345</span>				<span class="comment"># Expression</span></span><br><span class="line"><span class="string">'1.23'</span></span><br></pre></td></tr></table></figure>

<p>内置<code>format</code>函数可以用来格式化一个单独的项</p>
<h3 id="与-格式化表达式比较"><a href="#与-格式化表达式比较" class="headerlink" title="与%格式化表达式比较"></a>与%格式化表达式比较</h3><ul>
<li>字符串格式化方法与<code>%</code>格式化表达式很像</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'%s=%s'</span> % (<span class="string">'spam'</span>, <span class="number">42</span>))</span><br><span class="line">spam=<span class="number">42</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">'&#123;0&#125;=&#123;1&#125;'</span>.format(<span class="string">'spam'</span>, <span class="number">42</span>))</span><br><span class="line">spam=<span class="number">42</span></span><br></pre></td></tr></table></figure>

<ul>
<li>通常情况下格式化表达式比格式化方法调用更容易编写</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hardcoded references in both</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'My &#123;1[spam]:&lt;8&#125; runs &#123;0.platform:&gt;8&#125;'</span>.format(sys, &#123;<span class="string">'spam'</span>: <span class="string">'laptop'</span>&#125;)</span><br><span class="line"><span class="string">'My laptop   runs   darwin'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'My %(spam)-8s runs %(plat)8s'</span> % dict(spam=<span class="string">'laptop'</span>, plat=sys.platform)</span><br><span class="line"><span class="string">'My laptop   runs   darwin'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Building data ahead of time in both</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = dict(platform=sys.platform, spam=<span class="string">'laptop'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'My &#123;spam:&lt;8&#125; runs &#123;platform:&gt;8&#125;'</span>.format(**data)</span><br><span class="line"><span class="string">'My laptop   runs   darwin'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'My %(spam)-8s runs %(platform)8s'</span> % data</span><br><span class="line"><span class="string">'My laptop   runs   darwin'</span></span><br></pre></td></tr></table></figure>

<ul>
<li>格式化方法拥有<code>%</code>表达式所没有的很多高级功能,更复杂的格式化也能降低复杂度</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:d&#125;'</span>.format(<span class="number">999999999999</span>)</span><br><span class="line"><span class="string">'999999999999'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:,d&#125;'</span>.format(<span class="number">999999999999</span>)</span><br><span class="line"><span class="string">'999,999,999,999'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;:,d&#125;'</span>.format(<span class="number">999999999999</span>)</span><br><span class="line"><span class="string">'999,999,999,999'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;:,d&#125; &#123;:,d&#125;'</span>.format(<span class="number">9999999</span>,<span class="number">8888888</span>)</span><br><span class="line"><span class="string">'9,999,999 8,888,888'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;:,.2f&#125;'</span>.format(<span class="number">296999.2567</span>)</span><br><span class="line"><span class="string">'296,999.26'</span></span><br></pre></td></tr></table></figure>

<p>字符串格式化方法支持针对数字的千分位隔位法</p>
<h3 id="为什么用新的格式化方法"><a href="#为什么用新的格式化方法" class="headerlink" title="为什么用新的格式化方法"></a>为什么用新的格式化方法</h3><h4 id="格式化方法"><a href="#格式化方法" class="headerlink" title="格式化方法"></a>格式化方法</h4><blockquote>
<ul>
<li>拥有<code>%</code>表达式所没有的一些额外功能</li>
<li>可以更明确地进行替代值引用</li>
<li>考虑到操作符会有一个更容易记住的方法名</li>
<li>不支持用于单个和多个替代之大小写的不同语法</li>
</ul>
</blockquote>
<h4 id="额外功能"><a href="#额外功能" class="headerlink" title="额外功能"></a>额外功能</h4><p>方法调用支持表达式所没有的一些额外功能,例如<strong>二进制类型编码</strong>和<strong>千分位分组</strong></p>
<p>方法调用支持直接的键和属性引用,格式化表达式以其他方法实现同样效果</p>
<h4 id="显示值引用"><a href="#显示值引用" class="headerlink" title="显示值引用"></a>显示值引用</h4><p>当很多值需要替换到格式化字符串中时,方法的<code>position</code>的<code>{}</code>比表达式的<code>%s</code>更易读</p>
<p>当省略方法’position’的’{}’中的替换值时,可读性同样会变差</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:f&#125;, &#123;1:.2f&#125;, &#123;2:05.2f&#125;'</span>.format(<span class="number">3.14159</span>, <span class="number">3.14159</span>, <span class="number">3.14159</span>)</span><br><span class="line"><span class="string">'3.141590, 3.14, 03.14'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;:f&#125;, &#123;:.2f&#125;, &#123;:06.2f&#125;'</span>.format(<span class="number">3.14159</span>, <span class="number">3.14159</span>, <span class="number">3.14159</span>)</span><br><span class="line"><span class="string">'3.141590, 3.14, 003.14'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%f, %.2f, %06.2f'</span> % (<span class="number">3.14159</span>, <span class="number">3.14159</span>, <span class="number">3.14159</span>)</span><br><span class="line"><span class="string">'3.141590, 3.14, 003.14'</span></span><br></pre></td></tr></table></figure>

<p>在浮点数格式化上,格式化表达式更为精准且更为整齐</p>
<h4 id="方法名和通用参数"><a href="#方法名和通用参数" class="headerlink" title="方法名和通用参数"></a>方法名和通用参数</h4><p>格式化方法用一个更加方便于记忆的格式化方法名<code>format</code>替代了<code>%</code>操作符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'1.23'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%s'</span> % (<span class="number">1.23</span>,)</span><br><span class="line"><span class="string">'1.23'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%s'</span> % ((<span class="number">1.23</span>,),)</span><br><span class="line"><span class="string">'(1.23,)'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:.2f&#125;'</span>.format(<span class="number">1.2345</span>)</span><br><span class="line"><span class="string">'1.23'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0:.2f&#125; &#123;1&#125;'</span>.format(<span class="number">1.2345</span>,<span class="number">99</span>)</span><br><span class="line"><span class="string">'1.23 99'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0&#125;'</span>.format(<span class="number">1.2345</span>)</span><br><span class="line"><span class="string">'1.2345'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'&#123;0&#125;'</span>.format((<span class="number">1.2345</span>,))</span><br><span class="line"><span class="string">'(1.2345,)'</span></span><br></pre></td></tr></table></figure>

<p>使用格式化表达式单个值可以独自给定,但多个值必须收入一个元组中,而格式化方法不区分单个和多个替代值</p>
<p>格式化表达式单个值可以在元组中给定,格式化的元组必须作为嵌套的元组提供</p>
<h4 id="将来可能废弃"><a href="#将来可能废弃" class="headerlink" title="将来可能废弃"></a>将来可能废弃</h4><p>Python开发者可能在将来废弃<code>%</code>表达式而使用<code>format</code>方法</p>
<p>在可以预见的未来,任何一种都不太可能废弃</p>
<hr>
<h2 id="通常意义下的类型分类"><a href="#通常意义下的类型分类" class="headerlink" title="通常意义下的类型分类"></a>通常意义下的类型分类</h2><h3 id="同样分类的类型共享其操作集合"><a href="#同样分类的类型共享其操作集合" class="headerlink" title="同样分类的类型共享其操作集合"></a>同样分类的类型共享其操作集合</h3><p>三个主要类型的分类</p>
<blockquote>
<ul>
<li><p>数字(整数、浮点数、二进制、分数)</p>
<p>支持加法和乘法等</p>
</li>
<li><p>序列(字符串、列表、元组)</p>
<p>支持索引、分片合并等</p>
</li>
<li><p>映射(字典)</p>
<p>支持通过键的索引等</p>
</li>
</ul>
<p>集合是自成一体的一个分类,集合不会把键映射到值,没有逐位的排序顺序</p>
</blockquote>
<h3 id="可变类型能够在原处修改"><a href="#可变类型能够在原处修改" class="headerlink" title="可变类型能够在原处修改"></a>可变类型能够在原处修改</h3><blockquote>
<ul>
<li><p>不可变类型(数字、字符串、元组、不可变集合)</p>
<p>不可变的分类中的对象不支持原处修改,可以运行表达式来创建新的对象并将其结果分配给变量</p>
</li>
<li><p>可变类型(列表、字典、可变集合)</p>
<p>可变的类型可以通过操作原处修改,而不需要创建新的对</p>
</li>
</ul>
</blockquote>
<hr>
<h2 id="本章习题-3"><a href="#本章习题-3" class="headerlink" title="本章习题"></a>本章习题</h2><ol>
<li><p>字符串find方法能用于搜索列表吗</p>
<blockquote>
<p>不行<br>因为方法是类型特定的,只能用于单一数据类型上</p>
<p>像<code>X+Y</code>这样的表达式和<code>len(X)</code>这样的内置函数是通用的,可以用于多种类型上</p>
<p>在这个例子中,<code>in</code>关系表达式和字符串查找具有类似的效果,但它可以用来查找字符串和列表</p>
<p>在Python 3.0中,有一些对方法分组的尝试(例如,不可变序列类型list和bytearray具有类似的方法集合),但方法仍然比其他的操作集更特定于类型</p>
</blockquote>
</li>
<li><p>字符串切片表达式能用于列表吗</p>
<blockquote>
<p>可以</p>
<p>和方法不同的是,表达式是通用的,可用于多种类型</p>
<p>就这一点来说,切片表达式其实是序列运算,可用于任何类型的序列对象上,包括字符串、列表以及元<br>组</p>
<p>唯一的差别就是当你对列表进行切片时,你得到的是新列表</p>
</blockquote>
</li>
<li><p>如何将字符转成其<code>ASCII</code>码,如何反向转换,从整数转换成字符</p>
<blockquote>
<p>内置的<code>ord(S)</code>函数可将单个字符的字符串转换成整数字符编码</p>
<p><code>chr(I)</code>则是从整数代码转换回字符串</p>
</blockquote>
</li>
<li><p>在Python中,怎么修改字符串</p>
<blockquote>
<p>字符串无法被修改,字符串是不可变的</p>
<p>尽管这样,可以通过合并、切片运算、执行格式化表达式、方法调用(例如,<code>replace</code>)创建新的字符串,再将结果赋值给最初的变量名,从而达到相似的效果</p>
</blockquote>
</li>
<li><p>已知字符串S的值为”s ,pa,m”,提出两种从中间抽取两个字符的方式</p>
<blockquote>
<p>使用<code>S[2:4]</code>对字符串进行切片</p>
<p>使用<code>S.split(&#39;,&#39;)[1]</code>以逗号分隔字符串,再进行索引运算</p>
</blockquote>
</li>
<li><p>字符串”a\nb\x1f\o00d”之中有多少字符</p>
<blockquote>
<p>6个</p>
<p>字符串<code>a\nb\x1f\000d</code>包含一些字节<code>a</code>、新行<code>\n</code>、<code>b</code>、二进制值<code>31</code>(十六进制转义<code>\x1f</code>) 、二进制值<code>0</code> (八进制转义<code>\000</code>)以及<code>d</code></p>
<p>把字符串传给内置的<code>1en</code>函数可以验证它,然后印出每个字符的ord结果,从而查看实际的字节值</p>
</blockquote>
</li>
<li><p>你为什么要使用string模块，而不使用字符串方法调用</p>
<blockquote>
<p>如今不应该使用string模块,而应该使用字符串对象方法调用</p>
<p>string模块已经弃用,Python 3.0完全删除其调用</p>
<p>使用string模块的唯一原因就是可以使用其他工具,例如,预定义的常数</p>
<p>现在,在非常陈旧的Python代码中,它才会出现</p>
</blockquote>
</li>
</ol>
<hr>
<h1 id="第八章-列表和字典"><a href="#第八章-列表和字典" class="headerlink" title="第八章 列表和字典"></a>第八章 列表和字典</h1><blockquote>
<p>本章探讨了列表和字典类型</p>
<blockquote>
<ul>
<li>列表类型支持任意对象和以位置排序的集合体,可以任意嵌套,按需要增长和缩短</li>
<li>字典类型是以键来存储元素,不会保持元素之间的由左至右的顺序</li>
</ul>
</blockquote>
<p>列表和字典都是可变的,列表通过<code>append</code>调用进行增长,字典通过赋值给新键的方法实现</p>
</blockquote>
<hr>
<h2 id="列表-1"><a href="#列表-1" class="headerlink" title="列表"></a>列表</h2><h3 id="列表的主要特性"><a href="#列表的主要特性" class="headerlink" title="列表的主要特性"></a>列表的主要特性</h3><blockquote>
<ul>
<li><p>任意对象的有序集合</p>
<p>列表是收集其他对象的地方</p>
<p>列表保持了每一项从左到右的位置顺序</p>
</li>
<li><p>通过偏移读取</p>
<p>通过列表对象的偏移对其进行索引</p>
<p>可以执行分片和合并之类的任务</p>
</li>
<li><p>可变长度、异构以及任意嵌套</p>
<ul>
<li><p>长度可变</p>
<p>列表可以在原处增长或缩短</p>
</li>
<li><p>异构</p>
<p>列表可以包含任何类型的对象</p>
</li>
<li><p>任意嵌套</p>
<p>列表可以支持任意深度的嵌套</p>
</li>
</ul>
</li>
<li><p>属于可变序列的分类</p>
<p>列表支持在原处的修改</p>
<p>列表在应用合并和分片操作时返回新的列表</p>
</li>
<li><p>对象引用数组</p>
<p>列表是支持位置读取的对象引用数组</p>
<p>列表包含了零个或多个其他对象的引用</p>
</li>
</ul>
</blockquote>
<h3 id="常用列表常量和操作"><a href="#常用列表常量和操作" class="headerlink" title="常用列表常量和操作"></a>常用列表常量和操作</h3><table>
<thead>
<tr>
<th>操作</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>L = []</td>
<td>一个空的列表</td>
</tr>
<tr>
<td>L = [0, 1, 2, 3]</td>
<td>四项,索引为0到3</td>
</tr>
<tr>
<td>L = [‘abc’, [‘def’, ‘ghi’]]</td>
<td>嵌套的子列表</td>
</tr>
<tr>
<td>L = list(‘spam’)</td>
<td>可迭代项目的列表</td>
</tr>
<tr>
<td>L = list(range(-4, 4))</td>
<td>连续整数的列表</td>
</tr>
<tr>
<td>L[i]</td>
<td>索引</td>
</tr>
<tr>
<td>L[i][j]</td>
<td>索引的索引</td>
</tr>
<tr>
<td>L[i:j]</td>
<td>分片</td>
</tr>
<tr>
<td>len(L)</td>
<td>求长度</td>
</tr>
<tr>
<td>L1 + L2</td>
<td>合并</td>
</tr>
<tr>
<td>L * 3</td>
<td>重复</td>
</tr>
<tr>
<td>for x in L: print(x)</td>
<td>迭代</td>
</tr>
<tr>
<td>3 in L</td>
<td>成员关系</td>
</tr>
<tr>
<td>L.append(4)</td>
<td>增长</td>
</tr>
<tr>
<td>L.extend([5, 6, 7])</td>
<td>添加迭代</td>
</tr>
<tr>
<td>L.insert(I,X)</td>
<td>插入</td>
</tr>
<tr>
<td>L.index(1)</td>
<td>搜索</td>
</tr>
<tr>
<td>L.count(X)</td>
<td>统计</td>
</tr>
<tr>
<td>L.sort()</td>
<td>排序</td>
</tr>
<tr>
<td>L.reverse()</td>
<td>反转</td>
</tr>
<tr>
<td>del L[k]</td>
<td>移除元素</td>
</tr>
<tr>
<td>del L[i:j]</td>
<td>移除片段</td>
</tr>
<tr>
<td>L.pop()</td>
<td>移除最后一项</td>
</tr>
<tr>
<td>L.remove(2)</td>
<td>移除元素</td>
</tr>
<tr>
<td>L[i:j] = []</td>
<td>移除片段</td>
</tr>
<tr>
<td>L[i] = 1</td>
<td>索引赋值</td>
</tr>
<tr>
<td>L[i:j = [4, 5, 6]</td>
<td>分片赋值</td>
</tr>
<tr>
<td>L = [x**2 for x in range(5)]</td>
<td>列表解析</td>
</tr>
<tr>
<td>list(map(ord, ‘spam’))</td>
<td></td>
</tr>
</tbody></table>
<p>作为常量表达式编写时返回列表对象</p>
<hr>
<h2 id="实际应用中的列表"><a href="#实际应用中的列表" class="headerlink" title="实际应用中的列表"></a>实际应用中的列表</h2><h3 id="基本列表操作"><a href="#基本列表操作" class="headerlink" title="基本列表操作"></a>基本列表操作</h3><p>列表是序列,支持所有的操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>len([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])				<span class="comment"># Length</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] + [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]		<span class="comment"># Concatenation</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">'Ni!'</span>] * <span class="number">4</span>					<span class="comment"># Repetition</span></span><br><span class="line">[<span class="string">'Ni!'</span>, <span class="string">'Ni!'</span>, <span class="string">'Ni!'</span>, <span class="string">'Ni!'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str([<span class="number">1</span>, <span class="number">2</span>]) + <span class="string">"34"</span></span><br><span class="line"><span class="string">'[1, 2]34'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="number">1</span>, <span class="number">2</span>] + list(<span class="string">"34"</span>)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="string">'3'</span>, <span class="string">'4'</span>]</span><br></pre></td></tr></table></figure>

<p><code>+</code>的操作是合并</p>
<p><code>*</code>的操作是重复</p>
<p>结果是一个新的列表</p>
<p><code>+</code>两边必须是相同类型的对象</p>
<h3 id="列表迭代和解析"><a href="#列表迭代和解析" class="headerlink" title="列表迭代和解析"></a>列表迭代和解析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]						<span class="comment"># Membership</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]:</span><br><span class="line"><span class="meta">... </span>    print(x, end=<span class="string">' '</span>)				<span class="comment"># Iteration</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = [c * <span class="number">4</span> <span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'SPAM'</span>]		<span class="comment"># List comprehensions</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">[<span class="string">'SSSS'</span>, <span class="string">'PPPP'</span>, <span class="string">'AAAA'</span>, <span class="string">'MMMM'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'SPAM'</span>:					<span class="comment"># List comprehension equivalent</span></span><br><span class="line"><span class="meta">... </span>    res.append(c * <span class="number">4</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">[<span class="string">'SSSS'</span>, <span class="string">'PPPP'</span>, <span class="string">'AAAA'</span>, <span class="string">'MMMM'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(abs,[<span class="number">-1</span>, <span class="number">-2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]))	<span class="comment"># map function across sequence</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br></pre></td></tr></table></figure>

<p>序列能够对迭代工具做出响应</p>
<p><code>for</code>循环从左到右遍历任何虚列中的项</p>
<p>列表解析是通过对序列中的每一项应用一个表达式来构建一个新的列表的方式</p>
<p><code>map</code>函数对序列中的各项应用一个函数并把结果收集到一个新的列表中</p>
<h3 id="索引、分片和矩阵"><a href="#索引、分片和矩阵" class="headerlink" title="索引、分片和矩阵"></a>索引、分片和矩阵</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'spam'</span>, <span class="string">'Spam'</span>, <span class="string">'SPAM!'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">2</span>]			<span class="comment"># Offsets start at zero</span></span><br><span class="line"><span class="string">'SPAM!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">-2</span>]			<span class="comment"># Negative:count from the right</span></span><br><span class="line"><span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">1</span>:]			<span class="comment"># Slicing fetches sections</span></span><br><span class="line">[<span class="string">'Spam'</span>, <span class="string">'SPAM!'</span>]</span><br></pre></td></tr></table></figure>

<p>对列表索引返回指定偏移处对象</p>
<p>对列表分片返回新的列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>matrix = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>matrix[<span class="number">1</span>]</span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>matrix[<span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>matrix[<span class="number">2</span>][<span class="number">0</span>]</span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>matrix = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line"><span class="meta">... </span>            [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line"><span class="meta">... </span>            [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>matrix[<span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>对于嵌套列表,使用一次索引会得到嵌套的一个子列表,多次索引才会深入到深入到数据结构中</p>
<h3 id="原处修改列表"><a href="#原处修改列表" class="headerlink" title="原处修改列表"></a>原处修改列表</h3><p>列表是可变的,支持原处改变列表对象的操作</p>
<p>需要将原处修改一个对象与生成一个新对象区分开,否则可能同时影响一个以上指向它的引用</p>
<h4 id="索引与分片的赋值"><a href="#索引与分片的赋值" class="headerlink" title="索引与分片的赋值"></a>索引与分片的赋值</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'spam'</span>, <span class="string">'Spam'</span>, <span class="string">'SPAM!'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">1</span>] = <span class="string">'eggs'</span>				<span class="comment"># Index assignment</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L							</span><br><span class="line">[<span class="string">'spam'</span>, <span class="string">'eggs'</span>, <span class="string">'SPAM!'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">0</span>:<span class="number">2</span>] = [<span class="string">'eat'</span>, <span class="string">'more'</span>]	<span class="comment"># Slice assignment:delete+insert</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L							<span class="comment"># Replaces items 0,1</span></span><br><span class="line">[<span class="string">'eat'</span>, <span class="string">'more'</span>, <span class="string">'SPAM!'</span>]</span><br></pre></td></tr></table></figure>

<p>可以通过特定性(偏移)或整个片段(分片)对列表进行赋值</p>
<p>当赋值的值与分片重叠时,需要分析是否可行</p>
<p>分片赋值操作</p>
<blockquote>
<ul>
<li><p>删除</p>
<p>删除等号左边指定的分片</p>
</li>
<li><p>插入</p>
<p>将包含在等号左边对象中的片段插入旧分片被删除的位置</p>
</li>
</ul>
</blockquote>
<h4 id="列表方法调用"><a href="#列表方法调用" class="headerlink" title="列表方法调用"></a>列表方法调用</h4><p>方法是附属于特定对象的函数.提供特定类型的工具</p>
<p>列表对象支持特定类型方法调用,其中很多调用可以在原处修改主体列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.append(<span class="number">1</span>)								<span class="comment"># Append method call:add item at end</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.append(<span class="number">2</span>)								<span class="comment"># Push onto stack</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.pop()									<span class="comment"># Pop off stack</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.extend([<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])						<span class="comment"># Add many items at end</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.pop()									<span class="comment"># Delete and return last item</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'spam'</span>, <span class="string">'eggs'</span>, <span class="string">'ham'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.index(<span class="string">'eggs'</span>)							<span class="comment"># Index of an object</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.insert(<span class="number">1</span>, <span class="string">'toast'</span>)					<span class="comment"># Insert at position</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'spam'</span>, <span class="string">'toast'</span>, <span class="string">'eggs'</span>, <span class="string">'ham'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.remove(<span class="string">'eggs'</span>)						<span class="comment"># Delete by value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'spam'</span>, <span class="string">'toast'</span>, <span class="string">'ham'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.pop(<span class="number">1</span>)								<span class="comment"># Delete by position</span></span><br><span class="line"><span class="string">'toast'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'spam'</span>, <span class="string">'ham'</span>]</span><br></pre></td></tr></table></figure>

<p><code>append</code>方法将一个单项(对象引用)加至列表末端</p>
<p><code>pop</code>方法根据偏移删除对应的项并返回它的值,该偏移默认值为最后一个</p>
<p><code>qppend</code>方法与<code>pop</code>方法联用可以实现<code>后进先出</code>堆栈结构</p>
<p><code>extend</code>能够在末端插入多个元素</p>
<p><code>index</code>方法查找元素的偏移</p>
<p><code>insert</code>方法在偏移处插入元素</p>
<p><code>remove</code>方法通过值删除元素</p>
<p><code>append</code>方法、<code>extend</code>方法、<code>insert</code>方法<code>remove</code>方法的返回值为<code>None</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'eat'</span>, <span class="string">'more'</span>, <span class="string">'SPAM!'</span>, <span class="string">'please'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.sort()								<span class="comment"># Sort list items('S' &lt; 'e')</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'SPAM!'</span>, <span class="string">'eat'</span>, <span class="string">'more'</span>, <span class="string">'please'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'abc'</span>, <span class="string">'ABD'</span>, <span class="string">'aBe'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.sort()								<span class="comment"># Sort with mixed case</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'ABD'</span>, <span class="string">'aBe'</span>, <span class="string">'abc'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'abc'</span>, <span class="string">'ABD'</span>, <span class="string">'aBe'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.sort(key=str.lower)					<span class="comment"># Normalize to lowercase</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'abc'</span>, <span class="string">'ABD'</span>, <span class="string">'aBe'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'abc'</span>, <span class="string">'ABD'</span>, <span class="string">'aBe'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.sort(key=str.lower, reverse=<span class="literal">True</span>)		<span class="comment"># Change sort order</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'aBe'</span>, <span class="string">'ABD'</span>, <span class="string">'abc'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'abc'</span>, <span class="string">'ABD'</span>, <span class="string">'aBe'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(L, key=str.lower, reverse=<span class="literal">True</span>)			<span class="comment"># Sorting built-in</span></span><br><span class="line">[<span class="string">'aBe'</span>, <span class="string">'ABD'</span>, <span class="string">'abc'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'abc'</span>, <span class="string">'ABD'</span>, <span class="string">'aBe'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted([x.lower() <span class="keyword">for</span> x <span class="keyword">in</span> L], reverse=<span class="literal">True</span>)	<span class="comment"># Pretransform items:differs!</span></span><br><span class="line">[<span class="string">'abe'</span>, <span class="string">'abd'</span>, <span class="string">'abc'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.reverse()								<span class="comment"># In-place reversal method</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(reversed(L))						<span class="comment"># Reversal built-in with a result</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<p><code>sort</code>方法在原始对列表进行排序,使用Python标准的比较检验作为默认值,以递增顺序排序</p>
<p><code>sort</code>可以通过传入关键字参数来修改排序行为,<code>key</code>参数给出了排序使用的值,<code>reverse</code>参数允许逆序排序</p>
<p><code>sort</code>方法只对列表中相同类型对象排序,不同类型发生异常</p>
<p><code>sorted</code>内置函数可以排序任何可迭代对象,返回一个新的列表</p>
<p><code>reverse</code>方法在原处反转列表</p>
<p><code>reversed</code>内置函数返回一个迭代器,需要装在<code>list</code>调用中</p>
<h4 id="其他常见列表操作"><a href="#其他常见列表操作" class="headerlink" title="其他常见列表操作"></a>其他常见列表操作</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'SPAM!'</span>, <span class="string">'eat'</span>, <span class="string">'more'</span>, <span class="string">'please'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> L[<span class="number">0</span>]				<span class="comment"># Delete an entire section</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'eat'</span>, <span class="string">'more'</span>, <span class="string">'please'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> l[<span class="number">1</span>:]				<span class="comment"># Delete an entire section</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L						<span class="comment"># Same as L[1:]=[]</span></span><br><span class="line">[<span class="string">'eat'</span>]</span><br></pre></td></tr></table></figure>

<p><code>del</code>语句在原处删除某项或某片段</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'Already'</span>, <span class="string">'got'</span>, <span class="string">'one'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">1</span>:] = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'Already'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">0</span>] = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[[]]</span><br></pre></td></tr></table></figure>

<p>可以通过将<code>空列表</code>赋值给<strong>分片</strong>来删除列表片段</p>
<p>将<code>空列表</code>赋值给一个<strong>索引</strong>只会在指定的位置存储空列表的引用,而不是删除</p>
<hr>
<h2 id="字典-1"><a href="#字典-1" class="headerlink" title="字典"></a>字典</h2><h3 id="字典的主要特性"><a href="#字典的主要特性" class="headerlink" title="字典的主要特性"></a>字典的主要特性</h3><blockquote>
<ul>
<li><p>通过键而不是偏移量来读取</p>
<p>字典又叫关联数组(associative array)或者散列表(hash)</p>
<p>字典通过<code>键</code>将一系列<code>值</code>联系起来</p>
<p>可以通过<code>键</code>使用索引操作从字典中获得<code>值</code></p>
</li>
<li><p>任意对象的无序集合</p>
<p>字典中的项没有特定的顺序</p>
<p>Python将各项从左到右随机排序,以便快速查找</p>
</li>
<li><p>可变长、异构、任意嵌套</p>
<ul>
<li><p>可变长</p>
<p>字典可以在原处增长或缩短</p>
</li>
<li><p>异构</p>
<p>字典可以包含任何类型的对象</p>
</li>
<li><p>任意嵌套</p>
<p>字典可以支持任意深度的嵌套</p>
</li>
</ul>
</li>
<li><p>属于可变映射类型</p>
<p>通过给索引赋值,字典可以在原处修改</p>
<p>不支持用于字符串和列表中的序列操作</p>
<p>字典是唯一内置的映射类型</p>
</li>
<li><p>对象引用表(散列表)</p>
<p>字典是支持键读取的无序对象引用表</p>
<p>字典是作为散列表(支持快速检索的数据结构)</p>
<p>字典存储的是对象引用</p>
</li>
</ul>
</blockquote>
<h3 id="常见字典常量和操作"><a href="#常见字典常量和操作" class="headerlink" title="常见字典常量和操作"></a>常见字典常量和操作</h3><table>
<thead>
<tr>
<th>操作</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>D = {}</td>
<td>空字典</td>
</tr>
<tr>
<td>D = {‘spam’: 2, ‘eggs’: 3}</td>
<td>两项目字典</td>
</tr>
<tr>
<td>D = {‘food’: {‘ham’: 1, ‘egg’: 2}}</td>
<td>嵌套</td>
</tr>
<tr>
<td>D = dict.fromkeys([‘a’, ‘b’])</td>
<td>其他构造技术</td>
</tr>
<tr>
<td>D = dict(zip(keyslist, valslist))</td>
<td>关键字、对应的对、键列表</td>
</tr>
<tr>
<td>D = dict(name=’Bob’, age=42)</td>
<td></td>
</tr>
<tr>
<td>D[‘eggs’]</td>
<td>以键进行索引运算</td>
</tr>
<tr>
<td>D[‘food’][‘ham’]</td>
<td></td>
</tr>
<tr>
<td>‘eggs’ in D</td>
<td>成员关系:键存在测试</td>
</tr>
<tr>
<td>D.keys()</td>
<td>方法:键</td>
</tr>
<tr>
<td>D.values()</td>
<td>值</td>
</tr>
<tr>
<td>D.items()</td>
<td>键+值</td>
</tr>
<tr>
<td>D.copy()</td>
<td>副本</td>
</tr>
<tr>
<td>D.get(key, default)</td>
<td>默认</td>
</tr>
<tr>
<td>D.update(D2)</td>
<td>合并</td>
</tr>
<tr>
<td>D.pop(key)</td>
<td>删除</td>
</tr>
<tr>
<td>len(D)</td>
<td>长度(储存的元素的数目)</td>
</tr>
<tr>
<td>D[key] = 42</td>
<td>新增/修改键,删除键</td>
</tr>
<tr>
<td>del D [key]</td>
<td>根据键删除条目</td>
</tr>
<tr>
<td>list(D.keys())</td>
<td>字典视图</td>
</tr>
<tr>
<td>D1.keys() &amp; D2.keys()</td>
<td></td>
</tr>
<tr>
<td>Dictionary views</td>
<td></td>
</tr>
<tr>
<td>D = {x: x*2 for x in range(10)}</td>
<td>字典解析</td>
</tr>
</tbody></table>
<hr>
<h2 id="实际应用中的字典"><a href="#实际应用中的字典" class="headerlink" title="实际应用中的字典"></a>实际应用中的字典</h2><p>字典通过键进行索引,被嵌套的字典项是由一系列索引表示的</p>
<h3 id="字典的基本操作"><a href="#字典的基本操作" class="headerlink" title="字典的基本操作"></a>字典的基本操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'spam'</span>:<span class="number">2</span>, <span class="string">'ham'</span>:<span class="number">1</span>, <span class="string">'eggs'</span>:<span class="number">3</span>&#125;	<span class="comment"># Make a dictionary</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'spam'</span>]							<span class="comment"># Fetch a value by key</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D									<span class="comment"># Order is scrambled</span></span><br><span class="line">&#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: <span class="number">1</span>, <span class="string">'eggs'</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>

<p>通常创建字典并通过键来存储、访问其中的某项</p>
<p>字典内键由左至右的次序几乎总是和原先输入的顺序不同</p>
<h3 id="原处修改字典"><a href="#原处修改字典" class="headerlink" title="原处修改字典"></a>原处修改字典</h3><p>字典可以在原处修改、拓展或缩短而不需生成新字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: <span class="number">1</span>, <span class="string">'eggs'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'ham'</span>] = [<span class="string">'grill'</span>, <span class="string">'bake'</span>, <span class="string">'fry'</span>]		<span class="comment"># Change entry</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: [<span class="string">'grill'</span>, <span class="string">'bake'</span>, <span class="string">'fry'</span>], <span class="string">'eggs'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> D[<span class="string">'eggs'</span>]							<span class="comment"># Delete entry</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: [<span class="string">'grill'</span>, <span class="string">'bake'</span>, <span class="string">'fry'</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'brunch'</span>] = <span class="string">'Bacon'</span>					<span class="comment"># Add new entry</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: [<span class="string">'grill'</span>, <span class="string">'bake'</span>, <span class="string">'fry'</span>], <span class="string">'brunch'</span>: <span class="string">'Bacon'</span>&#125;</span><br></pre></td></tr></table></figure>

<p>向字典中已存在的索引赋值可以改变与索引相关联的值</p>
<p>对字典中没有被赋值的键赋值会生成一个新的元素</p>
<p>Python中所有集合数据类型都可以彼此任意嵌套</p>
<p><code>del</code>语句可以删除作为索引的键相关联的元素</p>
<h3 id="其他字典方法"><a href="#其他字典方法" class="headerlink" title="其他字典方法"></a>其他字典方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: <span class="number">1</span>, <span class="string">'eggs'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>len(D)			<span class="comment"># Number of entries in dictionary</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'ham'</span> <span class="keyword">in</span> D		<span class="comment"># Key membership test alternative</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(D.keys())	<span class="comment"># Create a new list of my keys</span></span><br><span class="line">[<span class="string">'spam'</span>, <span class="string">'ham'</span>, <span class="string">'eggs'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(D.values())</span><br><span class="line">[<span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(D.items())</span><br><span class="line">[(<span class="string">'spam'</span>, <span class="number">2</span>), (<span class="string">'ham'</span>, <span class="number">1</span>), (<span class="string">'eggs'</span>, <span class="number">3</span>)]</span><br></pre></td></tr></table></figure>

<p>内置函数<code>len</code>能够返回存储在字典里的元素的数目</p>
<p><code>in</code>成员关系操作符提供了键存在与否的测试方法</p>
<p><code>keys</code>方法返回字典的键列表</p>
<p><code>values</code>方法返回字典的值列表</p>
<p><code>items</code>方法返回(key,values)元组</p>
<p><code>keys</code>方法、<code>values</code>方法和<code>items</code>返回包含所有键的迭代器,需要装在<code>list</code>调用中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: <span class="number">1</span>, <span class="string">'eggs'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.get(<span class="string">'spam'</span>)			<span class="comment"># A key that is there</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(D.get(<span class="string">'toast'</span>))	<span class="comment"># A key that is missing</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.get(<span class="string">'toast'</span>,<span class="number">88</span>)</span><br><span class="line"><span class="number">88</span></span><br></pre></td></tr></table></figure>

<p>读取不存在的键会返回错误</p>
<p><code>get</code>方法返回键的值,键不存在返回默认值(<code>None</code>或自定义的默认值)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: <span class="number">1</span>, <span class="string">'eggs'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D2 = &#123;<span class="string">'toast'</span>: <span class="number">4</span>, <span class="string">'muffin'</span>: <span class="number">5</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.update(D2)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: <span class="number">1</span>, <span class="string">'eggs'</span>: <span class="number">3</span>, <span class="string">'toast'</span>: <span class="number">4</span>, <span class="string">'muffin'</span>: <span class="number">5</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># pop a dictionary by key</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.pop(<span class="string">'muffin'</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.pop(<span class="string">'toast'</span>)		<span class="comment"># Delete and return from a key</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'spam'</span>: <span class="number">2</span>, <span class="string">'ham'</span>: <span class="number">1</span>, <span class="string">'eggs'</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># pop a list by position</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'aa'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>, <span class="string">'dd'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.pop()		<span class="comment"># Delete and return from the end</span></span><br><span class="line"><span class="string">'dd'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'aa'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.pop(<span class="number">1</span>)	<span class="comment"># Delete from a specific position</span></span><br><span class="line"><span class="string">'bb'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'aa'</span>, <span class="string">'cc'</span>]</span><br></pre></td></tr></table></figure>

<p><code>update</code>方法把一个字典的键和值合并到另一个字典中,盲目地覆盖相同的值</p>
<p><code>pop</code>方法从字典中删除一个键并返回它的值</p>
<h3 id="语言表"><a href="#语言表" class="headerlink" title="语言表"></a>语言表</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>table = &#123;<span class="string">'Python'</span>: <span class="string">'Guido van Rossum'</span>,</span><br><span class="line"><span class="meta">... </span>            <span class="string">'Prel'</span>: <span class="string">'Larry Wall'</span>,</span><br><span class="line"><span class="meta">... </span>            <span class="string">'Tcl'</span>: <span class="string">'John Ousterhout'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>language = <span class="string">'Python'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>creator = table[language]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>creator</span><br><span class="line"><span class="string">'Guido van Rossum'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> lang <span class="keyword">in</span> table:		<span class="comment"># Same as:for lang in table.keys()</span></span><br><span class="line"><span class="meta">... </span>    print(lang, <span class="string">'\t'</span>, table[lang])</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">Python 	 Guido van Rossum</span><br><span class="line">Prel 	 Larry Wall</span><br><span class="line">Tcl 	 John Ousterhout</span><br></pre></td></tr></table></figure>

<p>字典不是序列,无法直接通过<code>for</code>语句迭代,可以通过<code>keys</code>方法得到排序后的键的列表,再用<code>for</code>循环得到从键到值的引用</p>
<p><code>for key in D:</code>与<code>key in D.keys()</code>效果相同</p>
<h3 id="字典用法注意事项"><a href="#字典用法注意事项" class="headerlink" title="字典用法注意事项"></a>字典用法注意事项</h3><blockquote>
<ul>
<li><p>序列运算无效</p>
</li>
<li><p>对新索引赋值会添加项</p>
</li>
<li><p>键不一定总是字符串</p>
<p>所有的<strong>不可变对象</strong>都可作为键</p>
</li>
</ul>
</blockquote>
<h4 id="使用字典模拟灵活的列表"><a href="#使用字典模拟灵活的列表" class="headerlink" title="使用字典模拟灵活的列表"></a>使用字典模拟灵活的列表</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">99</span>] = <span class="string">'spam'</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">IndexError: list assignment index out of range</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="number">99</span>] = <span class="string">'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="number">99</span>]</span><br><span class="line"><span class="string">'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="number">99</span>: <span class="string">'spam'</span>&#125;</span><br></pre></td></tr></table></figure>

<p>列表在末尾外的偏移赋值是非法的,可以使用整数键的字典模仿列表对偏移赋值</p>
<h4 id="字典用于稀疏数据结构"><a href="#字典用于稀疏数据结构" class="headerlink" title="字典用于稀疏数据结构"></a>字典用于稀疏数据结构</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix[(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)] = <span class="number">88</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix[(<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>)] = <span class="number">99</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix[(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)] = <span class="number">88</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix[(<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)] = <span class="number">99</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = <span class="number">2</span>; Y = <span class="number">3</span>; Z = <span class="number">4</span>			<span class="comment"># ;separates statements</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix[(X, Y, Z)]</span><br><span class="line"><span class="number">88</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix</span><br><span class="line">&#123;(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>): <span class="number">88</span>, (<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>): <span class="number">99</span>&#125;</span><br></pre></td></tr></table></figure>

<p>字典键常用于实现稀疏数据结构</p>
<h4 id="避免missing-key错误"><a href="#避免missing-key错误" class="headerlink" title="避免missing-key错误"></a>避免missing-key错误</h4><p>读取不存在的键会返回异常</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix = &#123;(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>): <span class="number">88</span>, (<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>): <span class="number">99</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix[(<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>)]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">KeyError: (<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span>(<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>)<span class="keyword">in</span> Matrix:			<span class="comment"># Check for key before fetch</span></span><br><span class="line"><span class="meta">... </span>    print(Matrix[(<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>)])</span><br><span class="line"><span class="meta">... </span><span class="keyword">else</span>:</span><br><span class="line"><span class="meta">... </span>    print(<span class="number">0</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">try</span>:</span><br><span class="line"><span class="meta">... </span>    print(Matrix[(<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>)])	<span class="comment"># Try to index</span></span><br><span class="line"><span class="meta">... </span><span class="keyword">except</span> KeyError:				<span class="comment"># Catch and recover</span></span><br><span class="line"><span class="meta">... </span>    print(<span class="number">0</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix.get((<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>), <span class="number">0</span>)		<span class="comment"># Exists:fetch and  return</span></span><br><span class="line"><span class="number">88</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Matrix.get((<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>), <span class="number">0</span>)		<span class="comment"># Doesn't excist:use default arg</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>填入默认值而不返回错误的方式</p>
<blockquote>
<ul>
<li>在<code>if</code>语句中预先对键进行测试</li>
<li>使用<code>try</code>语句捕获并修复异常</li>
<li>使用<code>get</code>方法为不存在的键提供默认值</li>
</ul>
</blockquote>
<h4 id="使用字典作为”记录”"><a href="#使用字典作为”记录”" class="headerlink" title="使用字典作为”记录”"></a>使用字典作为”记录”</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec = &#123;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec[<span class="string">'name'</span>] = <span class="string">'mel'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec[<span class="string">'age'</span>] = <span class="number">45</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>rec[<span class="string">'job'</span>] = <span class="string">'trainer/writer'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(rec[<span class="string">'name'</span>])</span><br><span class="line">mel</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mel = &#123;<span class="string">'name'</span>: <span class="string">'Mark'</span>,</span><br><span class="line"><span class="meta">... </span>    <span class="string">'jobs'</span>: [<span class="string">'trainer'</span>, <span class="string">'writer'</span>],</span><br><span class="line"><span class="meta">... </span>    <span class="string">'web'</span>: <span class="string">'www.rmi.net/~lutz'</span>,</span><br><span class="line"><span class="meta">... </span>    <span class="string">'home'</span>: &#123;<span class="string">'state'</span>: <span class="string">'CO'</span>, <span class="string">'zip'</span>: <span class="number">80513</span>&#125;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mel[<span class="string">'name'</span>]</span><br><span class="line"><span class="string">'Mark'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mel[<span class="string">'jobs'</span>]</span><br><span class="line">[<span class="string">'trainer'</span>, <span class="string">'writer'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mel[<span class="string">'jobs'</span>][<span class="number">1</span>]</span><br><span class="line"><span class="string">'writer'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mel[<span class="string">'home'</span>][<span class="string">'zip'</span>]</span><br><span class="line"><span class="number">80513</span></span><br></pre></td></tr></table></figure>

<p>字典可以表示多种结构化信息的类型</p>
<h3 id="为什么要在意字典接口"><a href="#为什么要在意字典接口" class="headerlink" title="为什么要在意字典接口"></a>为什么要在意字典接口</h3><p>有些Python的拓展程序提供了外表类似并且实际工作都和字典一样的接口</p>
<blockquote>
<ul>
<li>PythonDBM接口通过键来获取文件</li>
<li>shelve是通过键来访问的Python持久对象的数据库</li>
<li>Python的CGI脚本支持的一个接口也和字典类似</li>
</ul>
</blockquote>
<h3 id="创建字典的其他方法"><a href="#创建字典的其他方法" class="headerlink" title="创建字典的其他方法"></a>创建字典的其他方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="string">'name'</span>: <span class="string">'mel'</span>, <span class="string">'age'</span>: <span class="number">45</span>&#125;					<span class="comment"># Traditional literal expression</span></span><br><span class="line">&#123;<span class="string">'name'</span>: <span class="string">'mel'</span>, <span class="string">'age'</span>: <span class="number">45</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;&#125;										<span class="comment"># Assign by keys dynamically</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'name'</span>] = <span class="string">'mel'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D[<span class="string">'age'</span>] = <span class="number">45</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict(name=<span class="string">'mel'</span>, age=<span class="number">45</span>)</span><br><span class="line">&#123;<span class="string">'name'</span>: <span class="string">'mel'</span>, <span class="string">'age'</span>: <span class="number">45</span>&#125;						<span class="comment"># dict keyword argument from</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict([(<span class="string">'name'</span>, <span class="string">'mel'</span>), (<span class="string">'age'</span>, <span class="number">45</span>)])		<span class="comment"># dict key/value tuples form</span></span><br><span class="line">&#123;<span class="string">'name'</span>: <span class="string">'mel'</span>, <span class="string">'age'</span>: <span class="number">45</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))		<span class="comment"># Zip together keys and values</span></span><br><span class="line">[(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = dict(zip([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))	<span class="comment"># Make a dict from zip result</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>

<p>在不同条件下使用不同的创建方法</p>
<blockquote>
<ul>
<li><p>如果可以事先拼出整个字典,第一种比较方便</p>
</li>
<li><p>如果需要一次动态地建立字典的一个字段,第二种比较合适</p>
</li>
<li><p>第三种关键字形式所需的代码比常量少,但是键都是<strong>字符串</strong></p>
</li>
<li><p>如果需要在程序运行时把键和值逐步建成序列,第四种形式比较有用</p>
<p><code>zip</code>函数是在一个单个调用中从建和值的列表构建一个字典的方式之一</p>
<p>字典解析表达式</p>
</li>
<li><p>如果所有键的值都相同,可以使用<code>dict.fromkeys([key1,...], value)</code></p>
</li>
</ul>
</blockquote>
<h3 id="Python-3-0中的字典变化"><a href="#Python-3-0中的字典变化" class="headerlink" title="Python 3.0中的字典变化"></a>Python 3.0中的字典变化</h3><h4 id="Python-3-0中的字典"><a href="#Python-3-0中的字典" class="headerlink" title="Python 3.0中的字典"></a>Python 3.0中的字典</h4><blockquote>
<ul>
<li>支持新的<code>字典解析表达式</code></li>
<li>对<code>D.key</code>、<code>D.value</code>和<code>D.items</code>方法,返回可迭代的视图而不是列表</li>
<li>需要新的编码方式通过排序键来遍历</li>
<li>不再支持相对大小比较,使用手动比较</li>
<li>不再有<code>D.has_key</code>方法,使用<code>in</code>成员关系测试</li>
</ul>
</blockquote>
<h4 id="字典解析"><a href="#字典解析" class="headerlink" title="字典解析"></a>字典解析</h4><p>字典解析隐式地运行一个循环,根据每次迭代收集表达式的键/值结果,并使用它们填充一个新的字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;k: v <span class="keyword">for</span> (k,v) <span class="keyword">in</span> zip([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D										<span class="comment"># Use a dict comprehension</span></span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;x: x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;	<span class="comment"># Or:range(1, 5)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="number">1</span>: <span class="number">1</span>, <span class="number">2</span>: <span class="number">4</span>, <span class="number">3</span>: <span class="number">9</span>, <span class="number">4</span>: <span class="number">16</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;c: c * <span class="number">4</span> <span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'SPAM'</span>&#125;			<span class="comment"># Loop over any iterable</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'S'</span>: <span class="string">'SSSS'</span>, <span class="string">'P'</span>: <span class="string">'PPPP'</span>, <span class="string">'A'</span>: <span class="string">'AAAA'</span>, <span class="string">'M'</span>: <span class="string">'MMMM'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;c.lower(): c + <span class="string">'!'</span> <span class="keyword">for</span> c <span class="keyword">in</span> [<span class="string">'SPAM'</span>, <span class="string">'EGGS'</span>, <span class="string">'HAM'</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'spam'</span>: <span class="string">'SPAM!'</span>, <span class="string">'eggs'</span>: <span class="string">'EGGS!'</span>, <span class="string">'ham'</span>: <span class="string">'HAM!'</span>&#125;</span><br></pre></td></tr></table></figure>

<p>字典解析表达式可以迭代<code>键值对</code>获得新的字典</p>
<p>可以迭代单独的一串值映射到字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = dict.fromkeys([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], <span class="number">0</span>)		<span class="comment"># Omotoa;oze doct from keys</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">0</span>, <span class="string">'b'</span>: <span class="number">0</span>, <span class="string">'c'</span>: <span class="number">0</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;k:<span class="number">0</span> <span class="keyword">for</span> k <span class="keyword">in</span> [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]&#125;			<span class="comment"># Same,but with a comprehension</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">0</span>, <span class="string">'b'</span>: <span class="number">0</span>, <span class="string">'c'</span>: <span class="number">0</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = dict.fromkeys(<span class="string">'spam'</span>)					<span class="comment"># Other interators,default value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'s'</span>: <span class="literal">None</span>, <span class="string">'p'</span>: <span class="literal">None</span>, <span class="string">'a'</span>: <span class="literal">None</span>, <span class="string">'m'</span>: <span class="literal">None</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;k:<span class="literal">None</span> <span class="keyword">for</span> k <span class="keyword">in</span> <span class="string">'spam'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'s'</span>: <span class="literal">None</span>, <span class="string">'p'</span>: <span class="literal">None</span>, <span class="string">'a'</span>: <span class="literal">None</span>, <span class="string">'m'</span>: <span class="literal">None</span>&#125;</span><br></pre></td></tr></table></figure>

<p>字典解析可以从键列表初始化字典</p>
<h4 id="字典视图"><a href="#字典视图" class="headerlink" title="字典视图"></a>字典视图</h4><p><code>keys</code>、<code>values</code>和<code>items</code>返回视图对象</p>
<p>视图对象是可迭代的.每次对象产生一个结果项而不是内存中立即产生结果列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = dict(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>K = D.keys()				<span class="comment"># Makes a view object in 3.0,not a list</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>K</span><br><span class="line">dict_keys([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(K)						<span class="comment"># Force a real list in 3.0 if needed</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>V = D.values()				<span class="comment"># Ditto for values and items views</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>V</span><br><span class="line">dict_values([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(V)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(D.items())</span><br><span class="line">[(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>K[<span class="number">0</span>]						<span class="comment"># List operations fail unless converted</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">'dict_keys'</span> object does <span class="keyword">not</span> support indexing</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k <span class="keyword">in</span> D.keys(): print(k)	<span class="comment"># Iterators used automatically in loops</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k <span class="keyword">in</span> D: print(k)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure>

<p>打印显示对应方法的类型的值,需要内置函数<code>list</code>得到列表结果</p>
<p>循环结构会自动迫使可迭代的对象在每次迭代上产生一个结果</p>
<p>Python中字典拥有自己的迭代器,返回连续键,没有必要直接调用<code>keys</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>, <span class="string">'c'</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>K = D.keys()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>V = D.values()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(K)			<span class="comment"># Views maintain same order as dictionary</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(V)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> D[<span class="string">'b'</span>]		<span class="comment"># Change the dictionary in-place</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(K)			<span class="comment"># Reflected in any current view objects</span></span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'c'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(V)</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p>字典视图创建后可以动态地反应在试图对象创建之后对字典做出的修改</p>
<h4 id="字典视图和集合"><a href="#字典视图和集合" class="headerlink" title="字典视图和集合"></a>字典视图和集合</h4><p><code>keys</code>方法和可散列的<code>items</code>方法返回的视图对象类似于集合,支持交集和并集等常见的集合操作</p>
<p><code>values</code>方法返回的视图不同,因为value不唯一</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>, <span class="string">'c'</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>K = D.keys()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>V = D.values()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>K | &#123;<span class="string">'x'</span>: <span class="number">4</span>&#125;		<span class="comment"># Keys(and some items) views are set-lisk</span></span><br><span class="line">&#123;<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'x'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>V &amp; &#123;<span class="string">'x'</span>: <span class="number">4</span>&#125;</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> &amp;: <span class="string">'dict_values'</span> <span class="keyword">and</span> <span class="string">'dict'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>V &amp; &#123;<span class="string">'x'</span>: <span class="number">4</span>&#125;.values()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> &amp;: <span class="string">'dict_values'</span> <span class="keyword">and</span> <span class="string">'dict_values'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>, <span class="string">'c'</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.keys() &amp; D.keys()</span><br><span class="line">&#123;<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.keys() &amp; &#123;<span class="string">'b'</span>&#125;</span><br><span class="line">&#123;<span class="string">'b'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.keys() &amp; &#123;<span class="string">'b'</span>:<span class="number">1</span>&#125;</span><br><span class="line">&#123;<span class="string">'b'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.keys() | &#123;<span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>&#125;</span><br><span class="line">&#123;<span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'b'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(D.items())								<span class="comment"># Items set-like if hashable</span></span><br><span class="line">[(<span class="string">'a'</span>, <span class="number">1</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.items() | D.keys()						<span class="comment"># Union view and view</span></span><br><span class="line">&#123;(<span class="string">'a'</span>, <span class="number">1</span>), <span class="string">'a'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.items() | D								<span class="comment"># dict trated same as its keys</span></span><br><span class="line">&#123;(<span class="string">'a'</span>, <span class="number">1</span>), <span class="string">'a'</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.items() | &#123;(<span class="string">'c'</span>, <span class="number">3</span>), (<span class="string">'d'</span>, <span class="number">4</span>)&#125;			<span class="comment"># Set of key/value pairs</span></span><br><span class="line">&#123;(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'d'</span>, <span class="number">4</span>), (<span class="string">'c'</span>, <span class="number">3</span>)&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict(D.items() | &#123;(<span class="string">'c'</span>, <span class="number">3</span>), (<span class="string">'d'</span>, <span class="number">4</span>)&#125;)		<span class="comment"># dict accepts iterable sets too</span></span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'d'</span>: <span class="number">4</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure>

<p>在集合操作中,视图可能与其他的视图、集合和字典混合</p>
<h4 id="排序字典键"><a href="#排序字典键" class="headerlink" title="排序字典键"></a>排序字典键</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>, <span class="string">'c'</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks = D.keys()						<span class="comment"># Sorting a view object doesn't work!</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks.sort()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'dict_keys'</span> object has no attribute <span class="string">'sort'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks = list(Ks)						<span class="comment"># Force it to be a list and then sort</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k <span class="keyword">in</span> Ks: print(k,D[k])</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">a <span class="number">1</span></span><br><span class="line">b <span class="number">2</span></span><br><span class="line">c <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Ks = D.keys()						<span class="comment"># Or you can use sorted() on the keys</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k <span class="keyword">in</span> sorted(Ks): print(k,D[k])	<span class="comment"># sorted() accepts any iterable</span></span><br><span class="line"><span class="meta">... </span>									<span class="comment"># sorted() returns its result</span></span><br><span class="line">a <span class="number">1</span></span><br><span class="line">b <span class="number">2</span></span><br><span class="line">c <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;				<span class="comment"># BEtter yet,sort the dict directly</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> k <span class="keyword">in</span> sorted(D): print(k, D[k])	<span class="comment"># dict iterators return keys</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">a <span class="number">1</span></span><br><span class="line">b <span class="number">2</span></span><br><span class="line">c <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>使用<code>sorted</code>排序字典键</p>
<h4 id="字典大小比较不再有效"><a href="#字典大小比较不再有效" class="headerlink" title="字典大小比较不再有效"></a>字典大小比较不再有效</h4><p>Python 3.0字典不可以直接比较大小</p>
<p>可以手动模拟<code>sorted(D1.items()) &lt; sorted(D2.items())</code></p>
<h4 id="has-key方法已死-in永生"><a href="#has-key方法已死-in永生" class="headerlink" title="has_key方法已死:in永生"></a>has_key方法已死:in永生</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.has_key(<span class="string">'c'</span>)									<span class="comment"># 2.X only:True/False</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: <span class="string">'dict'</span> object has no attribute <span class="string">'has_key'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'c'</span> <span class="keyword">in</span> D</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'x'</span> <span class="keyword">in</span> D</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> <span class="string">'c'</span> <span class="keyword">in</span> D: print(<span class="string">'present'</span>, D[<span class="string">'c'</span>])			<span class="comment"># Preferred in 3.0</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">present <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(D.get(<span class="string">'c'</span>))</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(D.get(<span class="string">'x'</span>))</span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> D.get(<span class="string">'c'</span>) != <span class="literal">None</span>: print(<span class="string">'present'</span>, D[<span class="string">'c'</span>])	<span class="comment"># Another option</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line">present <span class="number">3</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="本章习题-4"><a href="#本章习题-4" class="headerlink" title="本章习题"></a>本章习题</h2><ol>
<li><p>举出两种方式来创建内含五个整数零的列表</p>
<blockquote>
<p>像<code>[0, 0, 0, 0, 0]</code>这种常量表达式以及<code>[0] * 5</code>这种重复表达式,都会创建五个零的列表</p>
<p>在实际应用中,可能会通过循环创建这种列表:一开始是空列表,在每次迭代中附加0:<code>L.append(0)</code></p>
<p>列表解析<code>([0 for i in range(5)])</code>在这里也可以用</p>
</blockquote>
</li>
<li><p>举出两种方式来创建一个字典,有两个键’a’和’b’,而每个键相关联的值都是0</p>
<blockquote>
<p>像<code>{&#39;a&#39;: 0，&#39;b&#39;: 0}</code>这种常量表达式,或者像<code>D = {},D[&#39;a&#39;] = 0,D[&#39;b&#39;] = 0</code>这种一系列的赋值运算都会创建所需要的字典<br><code>dict(a=0，b=0)</code>,或者<code>dict([(&#39;a&#39;, 0), (&#39;b&#39;,0)])</code>键/值序列形式</p>
<p>因为所有键的值都相同,也可以使用特殊形式<code>dict.fromkeys([&#39;a&#39;, &#39;b&#39;], 0)</code></p>
<p>可以使用一个字典解析:<code>{k:0 for k in &#39;ab&#39;}</code></p>
</blockquote>
</li>
<li><p>举出四种在原处修改列表对象的运算</p>
<blockquote>
<p><code>append</code>和<code>extend</code>方法可在原处增长列表</p>
<p><code>sort</code>和<code>reverse</code>方法可以对列表进行排序或者翻转</p>
<p><code>insert</code>方法可以在一个偏移值处插入一个元素</p>
<p><code>remove</code>和<code>pop</code>方法会按照值和位置从列表中删除元素<br><code>del</code>语句会删除一个元素或分片,而索引以及分片赋值语句则会取代一个元素或整个片段</p>
</blockquote>
</li>
<li><p>举出四种在原处修改字典对象的运算</p>
<blockquote>
<p>字典的修改主要是赋值新的键或已存在的键,从而建立或修改键在表中的项目</p>
<p><code>del</code>语句会删除一个键的元素</p>
<p><code>D.update(D2)</code>方法会把一个字典合并到另一个字典的适当的地方</p>
<p><code>D. pop(key)</code>则会移除一个键并返回它的值</p>
</blockquote>
</li>
</ol>
<hr>
<h1 id="第九章-元组、文件及其他"><a href="#第九章-元组、文件及其他" class="headerlink" title="第九章 元组、文件及其他"></a>第九章 元组、文件及其他</h1><blockquote>
<p>本章学习两种核心的对象类型</p>
<blockquote>
<p>元组支持所有一般的序列操作,但是因为不可变性所以没有<strong>方法</strong></p>
<p>文件是由内置<code>open</code>函数返回的并且提供读写数据的方法</p>
</blockquote>
<p>探讨Python对象如何转换字符串</p>
<p>了解<code>pickle</code>和<code>struct</code>模块</p>
<p>复习一些所有类型共有的特性</p>
<p>讨论对象类型领域内常见的陷阱</p>
</blockquote>
<hr>
<h2 id="元组-1"><a href="#元组-1" class="headerlink" title="元组"></a>元组</h2><p>元组由简单的对象组构成,不能在原处修改,写成<code>()</code></p>
<p>元组的特性</p>
<blockquote>
<ul>
<li><p>任意对象的有序集合</p>
<p>元组是一个位置有序的对象的集合,可以嵌入任何类别的对象</p>
</li>
<li><p>通过偏移存取</p>
<p>元组通过偏移来访问,支持所有基于偏移的操作</p>
</li>
<li><p>属于不可变序列类型</p>
<p>元组是不可变的,不支持应用在列表中任何原处修改的操作</p>
</li>
<li><p>固定长度、异构、任意嵌套</p>
<ul>
<li><p>固定长度</p>
<p>元组是不可变的，在不生成异构拷贝的情况下不能增长或缩短</p>
</li>
<li><p>异构</p>
<p>元组可以包含任何类型的对象</p>
</li>
<li><p>任意嵌套</p>
<p>元组可以支持任意深度的嵌套</p>
</li>
</ul>
</li>
<li><p>对象引用的数组</p>
<p>元组存储指向其他对象的引用</p>
<p>元鼓掌进行索引的速度相对较快</p>
</li>
</ul>
</blockquote>
<p>常见元组常量和运算</p>
<table>
<thead>
<tr>
<th>运算</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>()</td>
<td>空元组</td>
</tr>
<tr>
<td>T = (0,)</td>
<td>单个元素的元组</td>
</tr>
<tr>
<td>T = (0, ‘Ni’, 1.2, 3)</td>
<td>四个元素的元组</td>
</tr>
<tr>
<td>T = 0, ‘Ni’, 1.2, 3</td>
<td>四个元素的元组</td>
</tr>
<tr>
<td>T = (‘abd’, (‘def’, ‘ghi’))</td>
<td>嵌套元组</td>
</tr>
<tr>
<td>T = tuple(‘spam’)</td>
<td>一个可迭代对象的项的元组</td>
</tr>
<tr>
<td>T[i]</td>
<td>索引</td>
</tr>
<tr>
<td>T[i][j]</td>
<td>索引的索引</td>
</tr>
<tr>
<td>T[i:j]</td>
<td>分片</td>
</tr>
<tr>
<td>len(T)</td>
<td>长度</td>
</tr>
<tr>
<td>T1 + T2</td>
<td>合并</td>
</tr>
<tr>
<td>T * 3</td>
<td>重复</td>
</tr>
<tr>
<td>for x in T: print(x)</td>
<td>迭代</td>
</tr>
<tr>
<td>‘spam’ in T</td>
<td>成员关系</td>
</tr>
<tr>
<td>[x ** 2 for x in T]</td>
<td>解析表达式</td>
</tr>
<tr>
<td>T.index(‘Ni’)</td>
<td>搜索</td>
</tr>
<tr>
<td>T.count(‘Ni’)</td>
<td>计数</td>
</tr>
</tbody></table>
<h3 id="实际应用中的元组"><a href="#实际应用中的元组" class="headerlink" title="实际应用中的元组"></a>实际应用中的元组</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">1</span>, <span class="number">2</span>) + (<span class="number">3</span>, <span class="number">3</span>)			<span class="comment"># Concatenation</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">1</span>, <span class="number">2</span>) * <span class="number">4</span>				<span class="comment"># Repetition</span></span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)		<span class="comment"># Indexing,slicing</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T[<span class="number">0</span>], T[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">(<span class="number">1</span>, (<span class="number">2</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>

<p>元组支持字符串和列表的一般序列操作</p>
<h4 id="元组的特殊语法-逗号和圆逗号"><a href="#元组的特殊语法-逗号和圆逗号" class="headerlink" title="元组的特殊语法:逗号和圆逗号"></a>元组的特殊语法:逗号和圆逗号</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = (<span class="number">40</span>)	<span class="comment"># An integer!</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line"><span class="number">40</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = (<span class="number">40</span>,)	<span class="comment"># A tuple containing an integer</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y</span><br><span class="line">(<span class="number">40</span>,)</span><br></pre></td></tr></table></figure>

<p>若<code>()</code>只有一个元素,需要在这一个元素后加<code>,</code></p>
<p>在不会引起语法冲突的情况下,Python允许忽略元组的圆括号</p>
<p>当元组作为常量传给函数调用时必须使用圆括号</p>
<h4 id="转换、方法以及不可变性"><a href="#转换、方法以及不可变性" class="headerlink" title="转换、方法以及不可变性"></a>转换、方法以及不可变性</h4><p><code>+</code>、<code>*</code>以及<code>分片</code>操作应用于元组时将返回新元组</p>
<h5 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="string">'cc'</span>, <span class="string">'aa'</span>, <span class="string">'dd'</span>, <span class="string">'bb'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tmp = list(T)			<span class="comment"># Make a list from a tuple's items</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tmp.sort()				<span class="comment"># Sort the list</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tmp</span><br><span class="line">[<span class="string">'aa'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>, <span class="string">'dd'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = tuple(T)			<span class="comment"># Make a tuple from the list's items</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T</span><br><span class="line">(<span class="string">'cc'</span>, <span class="string">'aa'</span>, <span class="string">'dd'</span>, <span class="string">'bb'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(T)				<span class="comment"># Or use the sorted built-in</span></span><br><span class="line">[<span class="string">'aa'</span>, <span class="string">'bb'</span>, <span class="string">'cc'</span>, <span class="string">'dd'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [x + <span class="number">20</span> <span class="keyword">for</span> x <span class="keyword">in</span> T]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">25</span>]</span><br></pre></td></tr></table></figure>

<p>元组与列表转换</p>
<ul>
<li><code>list</code>和<code>tuple</code>内置函数用来返回列表和元组对象进行转换</li>
<li>使用列表解析遍历元组返回一个列表对象</li>
</ul>
<p>对元组排序</p>
<ul>
<li>先转换为列表,调用<code>sort</code>方法进行排序</li>
<li>使用<code>sorted</code>内置方法</li>
</ul>
<h5 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">2</span>)	<span class="comment"># Tuple methods in 2.6 and 3.0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T.index(<span class="number">2</span>)				<span class="comment"># Offset of first appearance of 2</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T.index(<span class="number">2</span>, <span class="number">2</span>)			<span class="comment"># Offset of appearance after offset 2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T.count(<span class="number">2</span>)				<span class="comment"># How many 2s are there?</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p><code>index</code>方法查找元素的偏移</p>
<p><code>count</code>方法统计元素的数量</p>
<h5 id="不可变性-1"><a href="#不可变性-1" class="headerlink" title="不可变性"></a>不可变性</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>], <span class="number">4</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T[<span class="number">1</span>] = <span class="string">'spam'</span>		<span class="comment"># This fails:can't change tuple itself</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">'tuple'</span> object does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T[<span class="number">1</span>][<span class="number">0</span>] = <span class="string">'spam'</span>	<span class="comment"># This works:can change mutables inside</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T</span><br><span class="line">(<span class="number">1</span>, [<span class="string">'spam'</span>, <span class="number">3</span>], <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p>元组的不可变性只适用于元组本身顶层而非其内容</p>
<h3 id="为什么有了列表还要元组"><a href="#为什么有了列表还要元组" class="headerlink" title="为什么有了列表还要元组"></a>为什么有了列表还要元组</h3><p>元组的不可变性提供了完整性,可以确保元组在程序中不会被另一个引用修改</p>
<p>元组可以用在列表无法使用的地方,例如字典的键</p>
<p>一些内置操作要求使用元组而不是列表</p>
<hr>
<h2 id="文件-1"><a href="#文件-1" class="headerlink" title="文件"></a>文件</h2><p>内置函数<code>open</code>会创建一个Python文件对象,可以作为计算机上的一个文件链接</p>
<p>调用<code>open</code>后,可以通过调用返回文件对象的方法来读写相关外部文件</p>
<p>常见文件运算</p>
<table>
<thead>
<tr>
<th>操作</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>output = open(r’C:\spam’, ‘w’)</td>
<td>创建输出文件(‘w’指输出)</td>
</tr>
<tr>
<td>input = open(‘data’, ‘r’)</td>
<td>创建输入文件(‘r’是指读写)</td>
</tr>
<tr>
<td>input = open(‘data’)</td>
<td>创建输入文件(‘r’是默认值)</td>
</tr>
<tr>
<td>aString = input.read()</td>
<td>把整个文件读进单一字符串</td>
</tr>
<tr>
<td>aString = input.read(N)</td>
<td>读取之后的N个字节到一个字符串</td>
</tr>
<tr>
<td>aString = input.readline()</td>
<td>读取下一行(包括行末标志符)到一个字符串</td>
</tr>
<tr>
<td>aList = input.readlines()</td>
<td>读取整个文件到字符串列表</td>
</tr>
<tr>
<td>output.write(aString)</td>
<td>写入字节字符串到文件</td>
</tr>
<tr>
<td>output.writelines(aList)</td>
<td>把列表内所有字符串写入文件</td>
</tr>
<tr>
<td>output.close()</td>
<td>手动关闭(当文件收集完成时会自动关闭文件)</td>
</tr>
<tr>
<td>output.flush()</td>
<td>把输出缓冲区刷到硬盘上,但不关闭文件</td>
</tr>
<tr>
<td>anyFile.seek(N)</td>
<td>修改文件位置到偏移量N处以便进行下一个操作</td>
</tr>
<tr>
<td>for line in open(‘data’):use line</td>
<td>文件迭代器一行一行地读取</td>
</tr>
<tr>
<td>open(‘f.txt’, endcoding=’latin-1’)</td>
<td>Python 3.0 Unicode文本文件(str字符串)</td>
</tr>
<tr>
<td>open(‘f.bin’, ‘rb’)</td>
<td>Python 3.0二进制byte文件(bytes字符串)</td>
</tr>
</tbody></table>
<h3 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h3><p>调用内置<code>open</code>函数,传入字符串参数<strong>外部名</strong>和<strong>处理模式</strong>(默认值为<code>r</code>)</p>
<h4 id="处理模式"><a href="#处理模式" class="headerlink" title="处理模式"></a>处理模式</h4><blockquote>
<ul>
<li><p><code>r</code></p>
<p>输入模式打开文件</p>
</li>
<li><p><code>w</code></p>
<p>输出模式创建或打开文件</p>
</li>
<li><p><code>b</code></p>
<p>进行二进制数据处理(行末转化和Python 3.0 Unicode编码被关闭)</p>
</li>
<li><p>后接<code>+</code></p>
<p>同时为输入和输出打开文件</p>
<p>对文件的修改和查找操作配合</p>
</li>
</ul>
</blockquote>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p>参数均为字符串对象</p>
<ul>
<li>第一个参数为外部文件名,可能包含平台特点的以及绝对火相对目录路径前缀,默认为当前目录</li>
<li>第二个参数指定读取文件时的处理模式</li>
<li>第三参数为可选参数,控制输出缓存,<code>&#39;0&#39;</code>以为输出无缓存,方法调用时立即传给外部文件</li>
</ul>
<h3 id="使用文件"><a href="#使用文件" class="headerlink" title="使用文件"></a>使用文件</h3><p>Python程序中的文本文件采用字符串形式,读取文件返回字符串,写文件传入字符串</p>
<blockquote>
<ul>
<li><p>文件迭代器是最好的读取行工具</p>
</li>
<li><p>内容是字符串,不是对象</p>
<p>从文件读取的数据是一个字符串</p>
<p>把数据写入文件时需要传递一个已经格式化的字符串</p>
</li>
<li><p><code>close</code>是通常选项</p>
<p>调用文件<code>close</code>方法会终止对外部文件的连接</p>
<p>当文件对象不再被引用而被回收时,Python会在需要时自动关闭文件</p>
<p>习惯上手动调用<code>close</code>方法</p>
</li>
<li><p>文件是缓冲的并且是可查找的</p>
<p>由于文件是缓冲的,写入的文本可能不会立即自动从内存转换到硬盘中</p>
<p>调用<code>close</code>或<code>flush</code>方法会释放操作系统资源并清空缓冲区,可以迫使缓存的数据写入硬盘</p>
<p>可以用<code>open</code>参数避免缓存,但是可能影响性能</p>
</li>
</ul>
</blockquote>
<h3 id="实际应用中的文件"><a href="#实际应用中的文件" class="headerlink" title="实际应用中的文件"></a>实际应用中的文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile = open(<span class="string">'myfile.txt'</span>, <span class="string">'w'</span>)		<span class="comment"># Open for text output:create/empty</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile.write(<span class="string">'hello text file\n'</span>)		<span class="comment"># Write a line of text:string</span></span><br><span class="line"><span class="number">16</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile.write(<span class="string">'goodbye text file\n'</span>)</span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile.close()							<span class="comment"># Flush output buffers to disk</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile = open(<span class="string">'myfile.txt'</span>)				<span class="comment"># Open for text input:'r' is default</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile.readline()						<span class="comment"># Read the lines back</span></span><br><span class="line"><span class="string">'hello text file\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile.readline()</span><br><span class="line"><span class="string">'goodbye text file\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile.readline()						<span class="comment"># Empty string:end of file</span></span><br><span class="line"><span class="string">''</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myfile.close()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>open(<span class="string">'myfile.txt'</span>).read()				<span class="comment"># Read all at once into string</span></span><br><span class="line"><span class="string">'hello text file\ngoodbye text file\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(open(<span class="string">'myfile.txt'</span>).read()			<span class="comment"># User-friendly display</span></span><br><span class="line"><span class="meta">... </span>)</span><br><span class="line">hello text file</span><br><span class="line">goodbye text file</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> line <span class="keyword">in</span> open(<span class="string">'myfile.txt'</span>):			<span class="comment"># Use file iterators,not reads</span></span><br><span class="line"><span class="meta">... </span>    print(line,end=<span class="string">''</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">hello text file</span><br><span class="line">goodbye text file</span><br></pre></td></tr></table></figure>

<p><code>write</code>方法返回写入的字符数</p>
<p><code>write</code>方法不自动添加终止符</p>
<p><code>read</code>方法将整个文件读入到字符串中</p>
<p>文件迭代器一行一行地扫描一个文本文件</p>
<h4 id="Python-3-0中的文本和二进制文件"><a href="#Python-3-0中的文本和二进制文件" class="headerlink" title="Python 3.0中的文本和二进制文件"></a>Python 3.0中的文本和二进制文件</h4><blockquote>
<ul>
<li>文本文件把内容表示为常规的<code>str</code>字符串,自动执行<code>Unicode</code>编码和解码,并且默认执行末行转换</li>
<li>二进制文件把内容表示为一个特殊的bytes字符串类型,并且允许程序不修改地访问文件内容</li>
</ul>
</blockquote>
<p>处理ASCII文件可以用基本文本文件接口和常规的字符串做到</p>
<p>处理国际化应用程序或者面向字节的数据,必须使用<code>bytes</code>字符串处理二进制文件,用<code>str</code>字符串处理文本文件,以文本模式打开一个二进制数据文件可能会导致解码<code>Unicode</code>文本失败</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = open(<span class="string">'data.bin'</span>, <span class="string">'rb'</span>).read()	<span class="comment"># Open binary file:rb=read binary</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data									<span class="comment"># bytes string holds binary data</span></span><br><span class="line"><span class="string">b'\x00\x00\x00\x07spam\x00\x08'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[<span class="number">4</span>:<span class="number">8</span>]								<span class="comment"># Act like strings</span></span><br><span class="line"><span class="string">b'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data[<span class="number">4</span>]									<span class="comment"># But readlly are small 8-bit integers</span></span><br><span class="line"><span class="number">115</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(data[<span class="number">4</span>])							<span class="comment"># Python 3.0 bin() function</span></span><br><span class="line"><span class="string">'0b1110011'</span></span><br></pre></td></tr></table></figure>

<p>读取二进制数据文件时,得到一个<code>bytes</code>对象,外观几乎与常规字符串完全相同</p>
<p>二进制文件不会对数据执行末行转换</p>
<h4 id="在文件中存储并解析Python对象"><a href="#在文件中存储并解析Python对象" class="headerlink" title="在文件中存储并解析Python对象"></a>在文件中存储并解析Python对象</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X, Y, Z = <span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>						<span class="comment"># Native PYthon objects</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S = <span class="string">'Spam'</span>									<span class="comment"># Must be strings to store in file</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F = open(<span class="string">'datafile.txt'</span>, <span class="string">'w'</span>)				<span class="comment"># Create output file</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.write(S + <span class="string">'\n'</span>)							<span class="comment"># Terminate lines with \n</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.write(<span class="string">'%s,%s,%s\n'</span> % (X, Y, Z))			<span class="comment"># Convert numbers to strings</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.write(str(L) + <span class="string">'$'</span> + str(D) + <span class="string">'\n'</span>)		<span class="comment"># Convert and separate with $</span></span><br><span class="line"><span class="number">27</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.close()</span><br></pre></td></tr></table></figure>

<p>利用<code>write</code>方法把多种Python对象写入文本必须使用转换工具把对象转换成字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>chars = open(<span class="string">'datafile.txt'</span>).read()				<span class="comment"># Raw string display</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>chars</span><br><span class="line"><span class="string">"Spam\n43,44,45\n[1, 2, 3]$&#123;'a': 1, 'b': 2&#125;\n"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(chars)									<span class="comment"># User-friendly display</span></span><br><span class="line">Spam</span><br><span class="line"><span class="number">43</span>,<span class="number">44</span>,<span class="number">45</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]$&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F = open(<span class="string">'datafile.txt'</span>)						<span class="comment"># Open again</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = F.readline()								<span class="comment"># Read one line</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line</span><br><span class="line"><span class="string">'Spam\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line.rstrip()									<span class="comment"># Remove end-of-line</span></span><br><span class="line"><span class="string">'Spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = F.readline()								<span class="comment"># Next line from file</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line											<span class="comment"># It's a string here</span></span><br><span class="line"><span class="string">'43,44,45\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>parts = line.split(<span class="string">','</span>)							<span class="comment"># Split(parse) on commas</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>parts</span><br><span class="line">[<span class="string">'43'</span>, <span class="string">'44'</span>, <span class="string">'45\n'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(parts[<span class="number">1</span>])									<span class="comment"># Convert from string to int</span></span><br><span class="line"><span class="number">44</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers = [int(P) <span class="keyword">for</span> P <span class="keyword">in</span> parts]				<span class="comment"># Convert all in list at once</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>numbers</span><br><span class="line">[<span class="number">43</span>, <span class="number">44</span>, <span class="number">45</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line = F.readline()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>line</span><br><span class="line"><span class="string">"[1, 2, 3]$&#123;'a': 1, 'b': 2&#125;\n"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>parts = line.split(<span class="string">'$'</span>)							<span class="comment"># Split(parse) on $</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>parts</span><br><span class="line">[<span class="string">'[1, 2, 3]'</span>, <span class="string">"&#123;'a': 1, 'b': 2&#125;\n"</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>eval(parts[<span class="number">0</span>])									<span class="comment"># Convert to any objecy type</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>object = [eval(P) <span class="keyword">for</span> P <span class="keyword">in</span> parts]				<span class="comment"># Do same for all in list</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>object</span><br><span class="line">[[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.close()</span><br></pre></td></tr></table></figure>

<p>交互模式的回显给出正确的字节内容,<code>print</code>语句会解释内嵌行终止符</p>
<p><code>rstrip</code>方法去掉多余的行终止符,确定所有行(最后一行可能没有)都有<code>\n</code>时<code>line[:-1]</code>分片也可以</p>
<p><code>split</code>方法断开行得到含有数字的子字符串列表</p>
<p><code>int</code>函数或列表解析表达式把数字字符串转换为整数对象,转换时忽略空白(<code>\n</code>、<code>\t</code>和<code>\0</code>)</p>
<p><code>eval</code>把字符串当做可执行程序代码,可以转换列表和字典</p>
<h4 id="用pickle存储Python的原生对象"><a href="#用pickle存储Python的原生对象" class="headerlink" title="用pickle存储Python的原生对象"></a>用pickle存储Python的原生对象</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F = open(<span class="string">'datafile.pkl'</span>, <span class="string">'wb'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pickle</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pickle.dump(D, F)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.close()							<span class="comment"># Pickle any object to file</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F = open(<span class="string">'datafile.pkl'</span>, <span class="string">'rb'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>E = pickle.load(F)					<span class="comment"># Load any object from file</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>E</span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>open(<span class="string">'datafile.pkl'</span>, <span class="string">'rb'</span>).read()	<span class="comment"># Format is prone to change!</span></span><br><span class="line"><span class="string">b'\x80\x03&#125;q\x00(X\x01\x00\x00\x00aq\x01K\x01X\x01\x00\x00\x00bq\x02K\x02u.'</span></span><br></pre></td></tr></table></figure>

<p><code>pickle</code>模块能够在文件中存储几乎任何Python对象</p>
<p>使用<code>pickle</code>进行重建可以将对象取回</p>
<p><code>pickle</code>内部将对象转换为字符串格式并依靠这一格式重建对象</p>
<h4 id="文件中打包二进制数据的存储和解析"><a href="#文件中打包二进制数据的存储和解析" class="headerlink" title="文件中打包二进制数据的存储和解析"></a>文件中打包二进制数据的存储和解析</h4><p><code>struct</code>模块能够构造并解析打包的二进制数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>F = open(<span class="string">'data.bin'</span>, <span class="string">'wb'</span>)					<span class="comment"># Open binary output file</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> struct</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = struct.pack(<span class="string">'&gt;i4sh'</span>, <span class="number">7</span>, <span class="string">b'spam'</span>, <span class="number">8</span>)	<span class="comment"># Make packed bianry data</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data </span><br><span class="line"><span class="string">b'\x00\x00\x00\x07spam\x00\x08'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.write(data)								<span class="comment"># Write byte string</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F.close()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>F = open(<span class="string">'data.bin'</span>, <span class="string">'rb'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data = F.read()								<span class="comment"># Get packed binary data</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>data</span><br><span class="line"><span class="string">b'\x00\x00\x00\x07spam\x00\x08'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>values = struct.unpack(<span class="string">'&gt;i4sh'</span>, data)		<span class="comment"># Convert to Python objects</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>values</span><br><span class="line">(<span class="number">7</span>, <span class="string">b'spam'</span>, <span class="number">8</span>)</span><br></pre></td></tr></table></figure>

<p>生成打包的二进制数据文件需要使用<code>wb</code>模式打开文件</p>
<p><code>pack</code>方法将<strong>一个格式化字符串</strong>和<strong>待打包的数据</strong>按照高位在前的形式传给<code>struct</code>并返回一个二进制数据字符串</p>
<p><code>unpack</code>方法将一<strong>个格式化字符串</strong>和待<strong>解析的数据</strong>传给<code>struct</code>并返回Python对象</p>
<p>格式化字符串</p>
<blockquote>
<ul>
<li><code>i</code>表示4字节整数</li>
<li><code>s</code>表示字符</li>
<li><code>h</code>表示2字节整数</li>
</ul>
</blockquote>
<h4 id="文件上下文管理器"><a href="#文件上下文管理器" class="headerlink" title="文件上下文管理器"></a>文件上下文管理器</h4><p>文件上下文管理器允许把文件处理代码包装到一个逻辑层中,确保在退出后自动关闭文件,而不是依赖垃圾收集的自动关闭</p>
<p>文件上下文管理器的格式为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(path ) <span class="keyword">as</span> myfile:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> myfile:</span><br><span class="line">        ...use line here...</span><br></pre></td></tr></table></figure>

<p><code>try/finally</code>语句提供类似功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">myfile = open(path)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">	<span class="keyword">for</span> line <span class="keyword">in</span> myfile:</span><br><span class="line">        ...use line here...</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    myfile.close()</span><br></pre></td></tr></table></figure>

<h3 id="其他文件工具"><a href="#其他文件工具" class="headerlink" title="其他文件工具"></a>其他文件工具</h3><p><code>seek</code>函数复位在文件中的当前位置</p>
<p><code>flush</code>函数强制性将缓存输出写入磁盘</p>
<p><code>open</code>函数及其返回的文件对象是Python脚本通向外部文件的主要借口</p>
<p>Python工具集中类似的文件工具</p>
<blockquote>
<ul>
<li><p>标准流</p>
<p>在<code>sys</code>模块中预先打开的文件对象</p>
</li>
<li><p><code>os</code>模块中的描述文件</p>
<p>处理整数文件,支持文件锁定之类的较低级工具</p>
</li>
<li><p><code>sockets</code>、<code>pipes</code>和<code>FIFO</code>文件</p>
<p>文件类对象,用于同步进程或者通过网络进行通信</p>
</li>
<li><p>通过键来存取的文件</p>
<p>通过键直接存储的不变的Python对象</p>
</li>
<li><p><code>Shell</code>命令流</p>
<p>像<code>os.popen</code>和<code>subprocess.Popen</code>这样的工具,支持产生shell命令,并读取和写入到标准流</p>
</li>
</ul>
</blockquote>
<hr>
<h2 id="重访类型分类"><a href="#重访类型分类" class="headerlink" title="重访类型分类"></a>重访类型分类</h2><h4 id="对象分类"><a href="#对象分类" class="headerlink" title="对象分类"></a>对象分类</h4><table>
<thead>
<tr>
<th>对象类型</th>
<th>分类</th>
<th>是否可变</th>
</tr>
</thead>
<tbody><tr>
<td>数字</td>
<td>数值</td>
<td>否</td>
</tr>
<tr>
<td>字符串</td>
<td>序列</td>
<td>否</td>
</tr>
<tr>
<td>列表</td>
<td>序列</td>
<td>是</td>
</tr>
<tr>
<td>字典</td>
<td>映射</td>
<td>是</td>
</tr>
<tr>
<td>元组</td>
<td>序列</td>
<td>否</td>
</tr>
<tr>
<td>文件</td>
<td>拓展</td>
<td>N/A</td>
</tr>
<tr>
<td>Sets</td>
<td>集合</td>
<td>是</td>
</tr>
<tr>
<td>frozenset</td>
<td>集合</td>
<td>否</td>
</tr>
<tr>
<td>bytearray</td>
<td>序列</td>
<td>是</td>
</tr>
</tbody></table>
<h4 id="要点"><a href="#要点" class="headerlink" title="要点"></a>要点</h4><blockquote>
<ul>
<li>对象根据分类来共享操作:例如,字符串、列表和元组都共享诸如合并、长度和索引等序列操作</li>
<li>只有可变对象(列表、字典和集合)可以原处修改;不能原处修改数字、字符串或元组</li>
<li>当处理文件的到时候,它们的状态可能会修改,但这与Python的核心类型的可变性限制不完全相同</li>
<li>数字类型:整数、浮点数、复数、小数和分数</li>
<li>字符串包括str、bytes和unicode;·bytearray字符串类型是可变的</li>
<li>集合类似于一个无值的字典的键,但是不能映射为值,并且没有顺序;因此,集合不是一个映射类型或者一个序列类型,frozenset是集合的一个不可变的版本</li>
<li>除了类型分类操作,所有类型都有可调用的方法,这些方法通常特定于它们的类型</li>
</ul>
</blockquote>
<h3 id="为什么要在意操作符重载"><a href="#为什么要在意操作符重载" class="headerlink" title="为什么要在意操作符重载"></a>为什么要在意操作符重载</h3><p>自己实现的类的对象可以在这些分类中任意选择</p>
<p>还可以选择性地实现一些原处修改操作的的方法调用来生成新的可变或不可变对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySequence</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, index)</span>:</span></span><br><span class="line">		<span class="comment"># Called onm self[index], others</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__add__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">		<span class="comment"># CLled on self + other</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="对象灵活性"><a href="#对象灵活性" class="headerlink" title="对象灵活性"></a>对象灵活性</h2><p>Python的复合对象类型支持任意结构</p>
<p>嵌套对象在内部被表示为对不同内存区域的引用</p>
<blockquote>
<ul>
<li>列表、字典和元组可以包含任何种类的对象</li>
<li>列表、字典和元组可以任意嵌套</li>
<li>列表和字典可以动态地扩大和缩小</li>
</ul>
</blockquote>
<hr>
<h2 id="引用-VS-拷贝"><a href="#引用-VS-拷贝" class="headerlink" title="引用 VS 拷贝"></a>引用 VS 拷贝</h2><h3 id="引用-1"><a href="#引用-1" class="headerlink" title="引用"></a>引用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'a'</span>, x, <span class="string">'b'</span>]	<span class="comment"># Embed references to X's object</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'x'</span>:X, <span class="string">'y'</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X[<span class="number">1</span>] = <span class="string">'surprise'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'a'</span>, [<span class="number">1</span>, <span class="string">'surprise'</span>, <span class="number">3</span>], <span class="string">'b'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D</span><br><span class="line">&#123;<span class="string">'x'</span>: [<span class="number">1</span>, <span class="string">'surprise'</span>, <span class="number">3</span>], <span class="string">'y'</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>

<p>复制操作会产生相同对象的多个引用,在原处修改可变对象时可能会影响程序中对相同对象的其他引用</p>
<h3 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h3><blockquote>
<ul>
<li>没有限制条件的分片表达式<code>(L[:])</code>能够复制序列</li>
<li>字典<code>copy</code>方法<code>X.copy()</code>能够复制字典</li>
<li>有些内置函数(例如，<code>list</code>)能够生成拷贝(<code>list(L)</code>) </li>
<li><code>copy</code>标准库模块能够生成完整拷贝</li>
</ul>
</blockquote>
<p>无条件值的分片以及字典<code>copy</code>方法只能做顶层赋值,不能够复制嵌套的数据结构</p>
<p>标准模块<code>copy</code>的<code>deepcopy()</code>方法可以完整的、完全独立的拷贝深层嵌套的数据结构</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A = L[:]		<span class="comment"># Instead of A = L(or list(L))</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B = D.copy()	<span class="comment"># Instead of B = D(ditto for sets)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A[<span class="number">1</span>] = <span class="string">'Ni'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>B[<span class="string">'c'</span>] = <span class="string">'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L, D</span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>A, B</span><br><span class="line">([<span class="number">1</span>, <span class="string">'Ni'</span>, <span class="number">3</span>], &#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="string">'spam'</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'a'</span>, X[:], <span class="string">'b'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D = &#123;<span class="string">'x'</span>:X[:], <span class="string">'y'</span>:<span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="比较、相等性和真值"><a href="#比较、相等性和真值" class="headerlink" title="比较、相等性和真值"></a>比较、相等性和真值</h2><p>所有的Python对象支持比较操作(相等性、相对大小)</p>
<p>相等性比较方法</p>
<blockquote>
<ul>
<li><p><code>==</code>操作符测试值的相等性</p>
<p>Python运行相等测试,递归地比较所有内嵌对象</p>
</li>
<li><p><code>is</code>表达式测试对象的一致性</p>
<p>Python测试二者是否是同一个对象(在同一个内存地址中)</p>
</li>
</ul>
</blockquote>
<p>不等性方法</p>
<blockquote>
<ul>
<li>数字通过相对大小进行比较</li>
<li>字符串是按照字典顺序,一个字符接一个字符地对比进行比较<code>(&quot;abc&quot; &lt; &quot;ac&quot;)</code></li>
<li>列表和元组从左到右对每部分的内容进行比较</li>
<li>字典的相对大小比较在Python 3.0中不支持</li>
<li>数字混合类型比较(例如,<code>1 &lt; &#39;spam&#39;</code>) 在Python 3.0中是错误的</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1 = [<span class="number">1</span>, (<span class="string">'a'</span>, <span class="number">3</span>)]				<span class="comment"># Same value, unique objects</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L2 = [<span class="number">1</span>, (<span class="string">'a'</span>, <span class="number">3</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1 == L2, L1 <span class="keyword">is</span> L2				<span class="comment"># Equivalent?Same object?</span></span><br><span class="line">(<span class="literal">True</span>, <span class="literal">False</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1 = [<span class="number">1</span>, (<span class="string">'a'</span>, <span class="number">3</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L2 = [<span class="number">1</span>, (<span class="string">'a'</span>, <span class="number">2</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L1 &lt; L2, L1 == L2, L1 &gt; L2		<span class="comment"># Less,equal,greater:tuple of results</span></span><br><span class="line">(<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S1 = <span class="string">'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S2 = <span class="string">'spam'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S1 == S2, S1 <span class="keyword">is</span> S2</span><br><span class="line">(<span class="literal">True</span>, <span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S1 = <span class="string">'a longer string'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S2 = <span class="string">'a longer string'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>S1 == S2, S1 <span class="keyword">is</span> S2</span><br><span class="line">(<span class="literal">True</span>, <span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p>Python的比较检查复合对象(包括嵌套对象)的所有部分,直到可以得出结果</p>
<p>Python内部暂时储存并重复使用短字符串,使用<code>is</code>一致性测试结果为真</p>
<h3 id="Python-3-0的字典比较"><a href="#Python-3-0的字典比较" class="headerlink" title="Python 3.0的字典比较"></a>Python 3.0的字典比较</h3><p>比较方法</p>
<blockquote>
<ul>
<li>编写循环根据键比较值</li>
<li>手动比较排序的键/值列表</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D1 = &#123;<span class="string">'A'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D2 = &#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D1 == D2</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>D1 &lt; D2</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">'&lt;'</span> <span class="keyword">not</span> supported between instances of <span class="string">'dict'</span> <span class="keyword">and</span> <span class="string">'dict'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(D1.items())</span><br><span class="line">[(<span class="string">'A'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(D1.items())</span><br><span class="line">[(<span class="string">'A'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(D1.items()) &lt; sorted(D2.items())</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(D1.items()) &gt; sorted(D2.items())</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h3 id="Python中真和假的含义"><a href="#Python中真和假的含义" class="headerlink" title="Python中真和假的含义"></a>Python中真和假的含义</h3><p>真和假的概念是每个对象的固有属性</p>
<blockquote>
<ul>
<li>数字如果非零,则为真</li>
<li>其他对象如果非空,则为真</li>
</ul>
</blockquote>
<p>对象真值的例子</p>
<table>
<thead>
<tr>
<th>对象</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>“spam”</td>
<td>True</td>
</tr>
<tr>
<td>“”</td>
<td>False</td>
</tr>
<tr>
<td>[]</td>
<td>False</td>
</tr>
<tr>
<td>{}</td>
<td>False</td>
</tr>
<tr>
<td>1</td>
<td>True</td>
</tr>
<tr>
<td>0.0</td>
<td>False</td>
</tr>
<tr>
<td>None</td>
<td>False</td>
</tr>
</tbody></table>
<h4 id="None对象"><a href="#None对象" class="headerlink" title="None对象"></a>None对象</h4><p>一种数据类型的唯一值,被作为<code>False</code></p>
<p><code>None</code>是对象,有自己的内存块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="literal">None</span>] * <span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>, <span class="literal">None</span>]</span><br></pre></td></tr></table></figure>

<p>列表只能为已存在的偏移赋值</p>
<h4 id="bool类型"><a href="#bool类型" class="headerlink" title="bool类型"></a>bool类型</h4><p><code>True</code>与<code>False</code>是整数<code>1</code>与<code>0</code>定制版本,可以让真值更为明确</p>
<blockquote>
<ul>
<li>当明确地用在真值测试时,<code>True</code>和<code>False</code>就变成了<code>1</code>和<code>0</code>,但它们使得程序员的意图更明确</li>
<li>交互模式下运行的布尔测试的结果打印成<code>True</code>和<code>False</code>的字样,而不是<code>1</code>和<code>0</code>,以使得程序的结果更明确</li>
</ul>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bool(<span class="number">1</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bool(<span class="string">'spam'</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bool(&#123;&#125;)</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p>内置函数<code>bool</code>用来测试一个对象的布尔值</p>
<h3 id="Python的类型层次"><a href="#Python的类型层次" class="headerlink" title="Python的类型层次"></a>Python的类型层次</h3><p>多数对象种类相当于程序单位(函数和模块),或说明了解释器的内容(堆栈和编译码)</p>
<p>Python系统中的任何东西都是对象类型,可以由Python程序来处理</p>
<h3 id="Type对象"><a href="#Type对象" class="headerlink" title="Type对象"></a>Type对象</h3><p>类型本身也是对象类型</p>
<p>内置函数<code>type(X)</code>能够返回对象X的类型对象</p>
<p>每个核心类型都有内置名来支持面向对象子类的类型定制:<code>dict、list、str、tuple、int、float、complex、byte、type、set、file</code></p>
<p>Python 3.0的<code>types</code>标准库模块还提供其他作为内置对象类型的名称</p>
<p>Python的类型可以再分为子类,所以建议使用<code>isinstance</code>函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>type([<span class="number">1</span>]) == type([])	<span class="comment"># Type of another list</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type([<span class="number">1</span>]) == list		<span class="comment"># List type name</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance([<span class="number">1</span>], list)	<span class="comment"># List or customization thereof</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> types			<span class="comment"># types has names for other types</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span> <span class="keyword">pass</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(f) == types.FunctionType</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Python中的其他类型"><a href="#Python中的其他类型" class="headerlink" title="Python中的其他类型"></a>Python中的其他类型</h2><p>除了核心对象之外,还有函数、模块和类,典型Python的安装还有几十种其他可用的对象类型,允许作为C语言的扩展程序<br>或是Python的类:正则表达式对象、DBM文件、GUI组件、网络套接字等</p>
<p>内置类型与附带工具区别:内置类型有针对对象的生成语法,其他工具必须先导入才可以使用</p>
<h3 id="内置类型陷阱"><a href="#内置类型陷阱" class="headerlink" title="内置类型陷阱"></a>内置类型陷阱</h3><h3 id="赋值生成引用-而不是拷贝"><a href="#赋值生成引用-而不是拷贝" class="headerlink" title="赋值生成引用,而不是拷贝"></a>赋值生成引用,而不是拷贝</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M = [<span class="string">'x'</span>, L, <span class="string">'Y'</span>]		<span class="comment"># Embed a reference to L</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M</span><br><span class="line">[<span class="string">'x'</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">'Y'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">1</span>] = <span class="number">0</span>				<span class="comment"># Changes M too</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M</span><br><span class="line">[<span class="string">'x'</span>, [<span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>], <span class="string">'Y'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M = [<span class="string">'x'</span>, L[:], <span class="string">'Y'</span>]	<span class="comment"># Embed a copy of L</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">1</span>] = <span class="number">0</span>				<span class="comment"># Changes only L,not M</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>M</span><br><span class="line">[<span class="string">'x'</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">'Y'</span>]</span><br></pre></td></tr></table></figure>

<p>如果不希望修改的值被所有共享对象共享,可以通过使用无限制条件的分片生成一个顶层拷贝</p>
<h3 id="重复能够增加层次深度"><a href="#重复能够增加层次深度" class="headerlink" title="重复能够增加层次深度"></a>重复能够增加层次深度</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X = L * <span class="number">4</span>		<span class="comment"># Like [4,5,6] + [4,5,6] + ..</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Y = [L] * <span class="number">4</span>		<span class="comment"># [L] + [L] + ... = [L,L,...]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X</span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Y</span><br><span class="line">[[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L[<span class="number">1</span>] = <span class="number">0</span>		<span class="comment"># Impacts Y but not X</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>X</span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Y</span><br><span class="line">[[<span class="number">4</span>, <span class="number">0</span>, <span class="number">6</span>], [<span class="number">4</span>, <span class="number">0</span>, <span class="number">6</span>], [<span class="number">4</span>, <span class="number">0</span>, <span class="number">6</span>], [<span class="number">4</span>, <span class="number">0</span>, <span class="number">6</span>]]</span><br></pre></td></tr></table></figure>

<p>当序列被外层序列嵌套时,外层序列的重复操作会重复多个内层序列的引用</p>
<h3 id="留意循环数据结构"><a href="#留意循环数据结构" class="headerlink" title="留意循环数据结构"></a>留意循环数据结构</h3><p>一个复合对象包含指向自身的引用称为循环对象</p>
<p>Python在对象中检测到循环会打印<code>[...]</code></p>
<p>循环对象可能会导致程序代码陷入无法预期的循环当中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [<span class="string">'grail'</span>]	<span class="comment"># Append referencce to same object</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L.append(L)		<span class="comment"># Generates cycle in object:[...]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="string">'grail'</span>, [...]]</span><br></pre></td></tr></table></figure>

<h3 id="不可变类型不可以在原处改变"><a href="#不可变类型不可以在原处改变" class="headerlink" title="不可变类型不可以在原处改变"></a>不可变类型不可以在原处改变</h3><p>可以通过分片、合并等操作创建一个新的对象，再赋值给原引用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T[<span class="number">2</span>] = <span class="number">4</span>			<span class="comment"># Error!</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: <span class="string">'tuple'</span> object does <span class="keyword">not</span> support item assignment</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>T = T[:<span class="number">2</span>] + (<span class="number">4</span>,)	<span class="comment"># OK:(1,2,4)</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="本章习题-5"><a href="#本章习题-5" class="headerlink" title="本章习题"></a>本章习题</h2><ol>
<li>怎么确定元组有多大</li>
</ol>
<blockquote>
<p>内置的<code>len</code>函数会传回Python中任何容器对象的长度(所含元素的数目),包括元组在内</p>
<p>这是内置函数,而不是类型方法,因为它适用于多种对象</p>
<p>通常,内置函数和表达式可以跨越多种对象类型</p>
<p>方法特定于一种单个的对象类型,尽管通过某些方式可以在多种类型上使用(例如,索引,在列表和元组上都有效)</p>
</blockquote>
<ol>
<li>写个表达式,修改元组中第一个元素,在此过程中<code>(4,5,6</code>)应该变成<code>(1,5,6)</code></li>
</ol>
<blockquote>
<p>因为元组是不可变的,无法真正地在原处修改元组,但你以用所需要的值产生新元组</p>
<p>已知<code>T=(4, 5,6)</code>,要修改第一个元素时,可以从其组成成分进行分片运算和合并来创建新元组:<code>T=(1,)+T[1:]</code></p>
<p>也可以把元组转成列表,在原处进行修改,再转换成元组</p>
<p>如果知道对象需要在原处进行修改,就使用列表</p>
</blockquote>
<ol>
<li><p><code>open</code>文件调用中,默认的处理模式自变量是什么</p>
<blockquote>
<p><code>open</code>文件调用中的处理模式参数默认值为’r’:读取输入</p>
<p>对于输入文本文件,只要传入外部文件名即可</p>
</blockquote>
</li>
<li><p>可能使用什么模块把Python对象储存在文件中,而不需要亲自将它们转换成字符串</p>
<blockquote>
<p><code>pickle</code>模块可用于把Python对象储存在文件中,而不用刻意转成字符串</p>
<p><code>struct</code>模块也是相关的,但是,那是要把数据打包成为二进制格式,从而保存在文件中</p>
</blockquote>
</li>
<li><p>怎么一次复制嵌套结构的所有组成部分</p>
<blockquote>
<p>如果需要复制嵌套结构X的所有组成部分就导入<code>copy</code>模块,然后调用<code>copy.deepcopy(X)</code></p>
<p>引用往往就是所需要的行为,而浅层复制(例如,<code>alist[:]</code>、<code>aDict. copy()</code>)通常就足够满足大多数的复制</p>
</blockquote>
</li>
<li><p>Python在什么时候会认为一个对象为真</p>
<blockquote>
<p>如果对象是非零数字或非空集合体对象,就被认作是真</p>
<p>内置的<code>True</code>和<code>False</code>关键字,从实质上来说,就是预先定义的整数<code>1</code>和<code>0</code></p>
</blockquote>
</li>
</ol>

    </article>
    <!-- license  -->
    
        <div class="license-wrapper">
            <p>原文作者：<a href="http://abcdefghijklmnopqrst.xyz">骑麦兜看落日</a>
            <p>原文链接：<a href="http://abcdefghijklmnopqrst.xyz/2018/07/24/Code_Python学习手册_2/">http://abcdefghijklmnopqrst.xyz/2018/07/24/Code_Python学习手册_2/</a>
            <p>发表日期：<a href="http://abcdefghijklmnopqrst.xyz/2018/07/24/Code_Python学习手册_2/">July 24th 2018, 6:00:00 pm</a>
            <p>更新日期：<a href="http://abcdefghijklmnopqrst.xyz/2018/07/24/Code_Python学习手册_2/">September 25th 2018, 12:00:00 am</a>
            <p>版权声明：本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator  -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href= "/2018/07/25/Binary_Canary/" title= "[Binary]Canary">
                    <div class="nextTitle">[Binary]Canary</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href= "/2018/07/22/Binary_fmt/" title= "[Binary]FormatString">
                    <div class="prevTitle">[Binary]FormatString</div>
                </a>
            
        </li>
    </ul>
    <!-- 评论插件 -->
    <!-- 来必力City版安装代码 -->

    <div id="lv-container" data-id="city" data-uid= MTAyMC8zNzY1OS8xNDE5MA==>
        <script type="text/javascript">
            (function (d, s) {
                var j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') { return; }
                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
    </div>

<!-- City版安装代码已完成 -->
    
    
    <!-- partial('_partial/comment/changyan') -->
    <!--PC版-->


    
    

    <!-- 评论 -->
</main>
            <!-- profile -->
            
        </div>
        <footer class="footer footer-unloaded">
    <!-- social  -->
    
    <div class="social">
        
    
        
            
                <a href="mailto:qimaidoukanluori@gmail.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/qimaidoukanluori" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    

    </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- 不蒜子  -->
    
    <div class="busuanzi-container">
    
     
    <span id="busuanzi_container_site_pv">到访的小伙伴: <span id="busuanzi_value_site_pv"></span>只 </span>
    
    </div>
    
</footer>
    </div>
    <!-- toc -->
    
    <div class="toc-wrapper" style=
    







top:30vh;

    >
        <div class="toc-catalog">
            <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
        </div>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#第四章-介绍Python对象类型"><span class="toc-number">1.</span> <span class="toc-text">第四章 介绍Python对象类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么使用内置类型"><span class="toc-number">1.1.</span> <span class="toc-text">为什么使用内置类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Python的核心数据类型"><span class="toc-number">1.1.1.</span> <span class="toc-text">Python的核心数据类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数字"><span class="toc-number">1.2.</span> <span class="toc-text">数字</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#浮点数"><span class="toc-number">1.2.0.1.</span> <span class="toc-text">浮点数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数学模块"><span class="toc-number">1.2.0.2.</span> <span class="toc-text">数学模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#random模块"><span class="toc-number">1.2.0.3.</span> <span class="toc-text">random模块</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串"><span class="toc-number">1.3.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#序列的操作"><span class="toc-number">1.3.1.</span> <span class="toc-text">序列的操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#索引"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分片"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">分片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#合并与重复"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">合并与重复</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不可变性"><span class="toc-number">1.3.2.</span> <span class="toc-text">不可变性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型特定的方法"><span class="toc-number">1.3.3.</span> <span class="toc-text">类型特定的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#寻求帮助"><span class="toc-number">1.3.4.</span> <span class="toc-text">寻求帮助</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写字符串的其他方法"><span class="toc-number">1.3.5.</span> <span class="toc-text">编写字符串的其他方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配"><span class="toc-number">1.3.6.</span> <span class="toc-text">模式匹配</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#列表"><span class="toc-number">1.4.</span> <span class="toc-text">列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#序列操作"><span class="toc-number">1.4.1.</span> <span class="toc-text">序列操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型特定的操作"><span class="toc-number">1.4.2.</span> <span class="toc-text">类型特定的操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#边界检查"><span class="toc-number">1.4.3.</span> <span class="toc-text">边界检查</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#嵌套"><span class="toc-number">1.4.4.</span> <span class="toc-text">嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列表解析"><span class="toc-number">1.4.5.</span> <span class="toc-text">列表解析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字典"><span class="toc-number">1.5.</span> <span class="toc-text">字典</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#映射操作"><span class="toc-number">1.5.1.</span> <span class="toc-text">映射操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重访嵌套"><span class="toc-number">1.5.2.</span> <span class="toc-text">重访嵌套</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#键的排序-for循环"><span class="toc-number">1.5.3.</span> <span class="toc-text">键的排序:for循环</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#键的排序"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">键的排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#for循环和while循环"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">for循环和while循环</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#迭代和优化"><span class="toc-number">1.5.4.</span> <span class="toc-text">迭代和优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不存在的键-if测试"><span class="toc-number">1.5.5.</span> <span class="toc-text">不存在的键:if测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#不存在的键"><span class="toc-number">1.5.5.1.</span> <span class="toc-text">不存在的键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#测试"><span class="toc-number">1.5.5.2.</span> <span class="toc-text">测试</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#if语句"><span class="toc-number">1.5.5.3.</span> <span class="toc-text">if语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#元组"><span class="toc-number">1.6.</span> <span class="toc-text">元组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么要用元组"><span class="toc-number">1.6.1.</span> <span class="toc-text">为什么要用元组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件"><span class="toc-number">1.7.</span> <span class="toc-text">文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#文件对象的方法"><span class="toc-number">1.7.1.</span> <span class="toc-text">文件对象的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他文件类工具"><span class="toc-number">1.7.2.</span> <span class="toc-text">其他文件类工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他核心类型"><span class="toc-number">1.8.</span> <span class="toc-text">其他核心类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#如何破坏代码的灵活性"><span class="toc-number">1.8.1.</span> <span class="toc-text">如何破坏代码的灵活性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户定义的类"><span class="toc-number">1.8.2.</span> <span class="toc-text">用户定义的类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#剩余的内容"><span class="toc-number">1.8.3.</span> <span class="toc-text">剩余的内容</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#本章习题"><span class="toc-number">1.9.</span> <span class="toc-text">本章习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第五章-数字"><span class="toc-number">2.</span> <span class="toc-text">第五章 数字</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Python的数字类型"><span class="toc-number">2.1.</span> <span class="toc-text">Python的数字类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数字常量"><span class="toc-number">2.1.1.</span> <span class="toc-text">数字常量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#十六进制数、八进制和二进制常量"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">十六进制数、八进制和二进制常量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#复数"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">复数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编辑其他的数字类型"><span class="toc-number">2.1.1.3.</span> <span class="toc-text">编辑其他的数字类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#内置数学工具和拓展"><span class="toc-number">2.1.2.</span> <span class="toc-text">内置数学工具和拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#表达式操作符"><span class="toc-number">2.1.2.1.</span> <span class="toc-text">表达式操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#内置数学函数"><span class="toc-number">2.1.2.2.</span> <span class="toc-text">内置数学函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#公用模块"><span class="toc-number">2.1.2.3.</span> <span class="toc-text">公用模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#特定于类型的方法"><span class="toc-number">2.1.2.4.</span> <span class="toc-text">特定于类型的方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python表达式操作符"><span class="toc-number">2.1.3.</span> <span class="toc-text">Python表达式操作符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#混合操作所遵循的操作优先级"><span class="toc-number">2.1.3.1.</span> <span class="toc-text">混合操作所遵循的操作优先级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#括号分组的子表达式"><span class="toc-number">2.1.3.2.</span> <span class="toc-text">括号分组的子表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#混合类型自动升级"><span class="toc-number">2.1.3.3.</span> <span class="toc-text">混合类型自动升级</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#预习-运算符重载"><span class="toc-number">2.1.3.4.</span> <span class="toc-text">预习:运算符重载</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在实际应用中的数字"><span class="toc-number">2.2.</span> <span class="toc-text">在实际应用中的数字</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量和基本的表达式"><span class="toc-number">2.2.1.</span> <span class="toc-text">变量和基本的表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#变量"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#注释"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">注释</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数字显示的格式"><span class="toc-number">2.2.2.</span> <span class="toc-text">数字显示的格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#比较-一般的和连续的"><span class="toc-number">2.2.3.</span> <span class="toc-text">比较:一般的和连续的</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#一般的"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">一般的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#连续的"><span class="toc-number">2.2.3.2.</span> <span class="toc-text">连续的</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#str和repr显示格式"><span class="toc-number">2.2.4.</span> <span class="toc-text">str和repr显示格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#除法-传统除法、Floor除法和真除法"><span class="toc-number">2.2.5.</span> <span class="toc-text">除法:传统除法、Floor除法和真除法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#真除法"><span class="toc-number">2.2.5.1.</span> <span class="toc-text">真除法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Floor除法"><span class="toc-number">2.2.5.2.</span> <span class="toc-text">Floor除法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#传统除法"><span class="toc-number">2.2.5.3.</span> <span class="toc-text">传统除法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#支持两个Python版本"><span class="toc-number">2.2.5.4.</span> <span class="toc-text">支持两个Python版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Floor除法VS截断除法"><span class="toc-number">2.2.5.5.</span> <span class="toc-text">Floor除法VS截断除法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#为什么Floor除法很重要"><span class="toc-number">2.2.5.6.</span> <span class="toc-text">为什么Floor除法很重要</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#整数精度"><span class="toc-number">2.2.6.</span> <span class="toc-text">整数精度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#复数-1"><span class="toc-number">2.2.7.</span> <span class="toc-text">复数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#十六进制、八进制和二进制记数"><span class="toc-number">2.2.8.</span> <span class="toc-text">十六进制、八进制和二进制记数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#整数转换字符串"><span class="toc-number">2.2.8.1.</span> <span class="toc-text">整数转换字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串转换整数"><span class="toc-number">2.2.8.2.</span> <span class="toc-text">字符串转换整数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#位操作"><span class="toc-number">2.2.9.</span> <span class="toc-text">位操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他的内置数学工具"><span class="toc-number">2.2.10.</span> <span class="toc-text">其他的内置数学工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他数字类型"><span class="toc-number">2.3.</span> <span class="toc-text">其他数字类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#小数数字"><span class="toc-number">2.3.1.</span> <span class="toc-text">小数数字</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基础知识"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">基础知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置全局精度"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">设置全局精度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小数上下文管理器"><span class="toc-number">2.3.1.3.</span> <span class="toc-text">小数上下文管理器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分数类型"><span class="toc-number">2.3.2.</span> <span class="toc-text">分数类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基本知识"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">基本知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数值精度"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">数值精度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#转换和混合类型"><span class="toc-number">2.3.2.3.</span> <span class="toc-text">转换和混合类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#float-gt-fraction"><span class="toc-number">2.3.2.3.1.</span> <span class="toc-text">float -&gt; fraction</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fraction-gt-float"><span class="toc-number">2.3.2.3.2.</span> <span class="toc-text">fraction -&gt; float</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#混合类型"><span class="toc-number">2.3.2.3.3.</span> <span class="toc-text">混合类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#精度"><span class="toc-number">2.3.2.3.4.</span> <span class="toc-text">精度</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#集合"><span class="toc-number">2.3.3.</span> <span class="toc-text">集合</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-2-6中的集合基础知识"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">Python 2.6中的集合基础知识</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-3-0中的集合常量"><span class="toc-number">2.3.3.2.</span> <span class="toc-text">Python 3.0中的集合常量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#不可变限制和冻结集合"><span class="toc-number">2.3.3.3.</span> <span class="toc-text">不可变限制和冻结集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-3-0中的集合解析"><span class="toc-number">2.3.3.4.</span> <span class="toc-text">Python 3.0中的集合解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#为什么使用集合"><span class="toc-number">2.3.3.5.</span> <span class="toc-text">为什么使用集合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#布尔型"><span class="toc-number">2.3.4.</span> <span class="toc-text">布尔型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数字拓展"><span class="toc-number">2.4.</span> <span class="toc-text">数字拓展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#本章习题-1"><span class="toc-number">2.5.</span> <span class="toc-text">本章习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第六章-动态类型简介"><span class="toc-number">3.</span> <span class="toc-text">第六章 动态类型简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#缺少类型声明语句的情况"><span class="toc-number">3.1.</span> <span class="toc-text">缺少类型声明语句的情况</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量、对象和引用"><span class="toc-number">3.1.1.</span> <span class="toc-text">变量、对象和引用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#变量创建"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">变量创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#变量类型"><span class="toc-number">3.1.1.2.</span> <span class="toc-text">变量类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#变量使用"><span class="toc-number">3.1.1.3.</span> <span class="toc-text">变量使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对象"><span class="toc-number">3.1.1.4.</span> <span class="toc-text">对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#引用"><span class="toc-number">3.1.1.5.</span> <span class="toc-text">引用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类型属于对象-而不是变量"><span class="toc-number">3.1.2.</span> <span class="toc-text">类型属于对象,而不是变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象的垃圾收集"><span class="toc-number">3.1.3.</span> <span class="toc-text">对象的垃圾收集</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#共享引用"><span class="toc-number">3.2.</span> <span class="toc-text">共享引用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#共享引用和在原处修改"><span class="toc-number">3.2.1.</span> <span class="toc-text">共享引用和在原处修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#共享引用和相等"><span class="toc-number">3.2.2.</span> <span class="toc-text">共享引用和相等</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#动态类型随处可见"><span class="toc-number">3.3.</span> <span class="toc-text">动态类型随处可见</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#本章习题-2"><span class="toc-number">3.4.</span> <span class="toc-text">本章习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第七章-字符串"><span class="toc-number">4.</span> <span class="toc-text">第七章 字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串常量"><span class="toc-number">4.1.</span> <span class="toc-text">字符串常量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#单双引号字符串是一样的"><span class="toc-number">4.1.1.</span> <span class="toc-text">单双引号字符串是一样的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用转义序列代表特殊字节"><span class="toc-number">4.1.2.</span> <span class="toc-text">用转义序列代表特殊字节</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#raw字符串抑制转义"><span class="toc-number">4.1.3.</span> <span class="toc-text">raw字符串抑制转义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三重引号编写多行字符串块"><span class="toc-number">4.1.4.</span> <span class="toc-text">三重引号编写多行字符串块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实际应用中的字符串"><span class="toc-number">4.2.</span> <span class="toc-text">实际应用中的字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本操作"><span class="toc-number">4.2.1.</span> <span class="toc-text">基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#索引和切片"><span class="toc-number">4.2.2.</span> <span class="toc-text">索引和切片</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#拓展分片-第三个限制值"><span class="toc-number">4.2.2.1.</span> <span class="toc-text">拓展分片:第三个限制值</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么要在意-分片"><span class="toc-number">4.2.3.</span> <span class="toc-text">为什么要在意:分片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串转换工具"><span class="toc-number">4.2.4.</span> <span class="toc-text">字符串转换工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串代码转换"><span class="toc-number">4.2.4.1.</span> <span class="toc-text">字符串代码转换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改字符串"><span class="toc-number">4.2.5.</span> <span class="toc-text">修改字符串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串方法"><span class="toc-number">4.3.</span> <span class="toc-text">字符串方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串方法实例-修改字符串"><span class="toc-number">4.3.1.</span> <span class="toc-text">字符串方法实例:修改字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串方法实例-文本解析"><span class="toc-number">4.3.2.</span> <span class="toc-text">字符串方法实例:文本解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实际应用中的其他常见字符串方法"><span class="toc-number">4.3.3.</span> <span class="toc-text">实际应用中的其他常见字符串方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最初的字符串模块-在Python-3-0中删除"><span class="toc-number">4.3.4.</span> <span class="toc-text">最初的字符串模块(在Python 3.0中删除)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串格式化表达式"><span class="toc-number">4.4.</span> <span class="toc-text">字符串格式化表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串格式化实现形式"><span class="toc-number">4.4.1.</span> <span class="toc-text">字符串格式化实现形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字符串格式化表达式-1"><span class="toc-number">4.4.2.</span> <span class="toc-text">字符串格式化表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更高级的字符串格式化表达式"><span class="toc-number">4.4.3.</span> <span class="toc-text">更高级的字符串格式化表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#字符串格式化代码"><span class="toc-number">4.4.3.1.</span> <span class="toc-text">字符串格式化代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#转换目标的通用结构"><span class="toc-number">4.4.3.2.</span> <span class="toc-text">转换目标的通用结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基于字典的字符串格式化"><span class="toc-number">4.4.4.</span> <span class="toc-text">基于字典的字符串格式化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串格式化调用方法"><span class="toc-number">4.5.</span> <span class="toc-text">字符串格式化调用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基础知识-1"><span class="toc-number">4.5.1.</span> <span class="toc-text">基础知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加键、属性和偏移量"><span class="toc-number">4.5.2.</span> <span class="toc-text">添加键、属性和偏移量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加具体格式化"><span class="toc-number">4.5.3.</span> <span class="toc-text">添加具体格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#与-格式化表达式比较"><span class="toc-number">4.5.4.</span> <span class="toc-text">与%格式化表达式比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么用新的格式化方法"><span class="toc-number">4.5.5.</span> <span class="toc-text">为什么用新的格式化方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#格式化方法"><span class="toc-number">4.5.5.1.</span> <span class="toc-text">格式化方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#额外功能"><span class="toc-number">4.5.5.2.</span> <span class="toc-text">额外功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#显示值引用"><span class="toc-number">4.5.5.3.</span> <span class="toc-text">显示值引用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#方法名和通用参数"><span class="toc-number">4.5.5.4.</span> <span class="toc-text">方法名和通用参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将来可能废弃"><span class="toc-number">4.5.5.5.</span> <span class="toc-text">将来可能废弃</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通常意义下的类型分类"><span class="toc-number">4.6.</span> <span class="toc-text">通常意义下的类型分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#同样分类的类型共享其操作集合"><span class="toc-number">4.6.1.</span> <span class="toc-text">同样分类的类型共享其操作集合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#可变类型能够在原处修改"><span class="toc-number">4.6.2.</span> <span class="toc-text">可变类型能够在原处修改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#本章习题-3"><span class="toc-number">4.7.</span> <span class="toc-text">本章习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第八章-列表和字典"><span class="toc-number">5.</span> <span class="toc-text">第八章 列表和字典</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#列表-1"><span class="toc-number">5.1.</span> <span class="toc-text">列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#列表的主要特性"><span class="toc-number">5.1.1.</span> <span class="toc-text">列表的主要特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常用列表常量和操作"><span class="toc-number">5.1.2.</span> <span class="toc-text">常用列表常量和操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实际应用中的列表"><span class="toc-number">5.2.</span> <span class="toc-text">实际应用中的列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本列表操作"><span class="toc-number">5.2.1.</span> <span class="toc-text">基本列表操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列表迭代和解析"><span class="toc-number">5.2.2.</span> <span class="toc-text">列表迭代和解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#索引、分片和矩阵"><span class="toc-number">5.2.3.</span> <span class="toc-text">索引、分片和矩阵</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#原处修改列表"><span class="toc-number">5.2.4.</span> <span class="toc-text">原处修改列表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#索引与分片的赋值"><span class="toc-number">5.2.4.1.</span> <span class="toc-text">索引与分片的赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#列表方法调用"><span class="toc-number">5.2.4.2.</span> <span class="toc-text">列表方法调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他常见列表操作"><span class="toc-number">5.2.4.3.</span> <span class="toc-text">其他常见列表操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字典-1"><span class="toc-number">5.3.</span> <span class="toc-text">字典</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字典的主要特性"><span class="toc-number">5.3.1.</span> <span class="toc-text">字典的主要特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常见字典常量和操作"><span class="toc-number">5.3.2.</span> <span class="toc-text">常见字典常量和操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实际应用中的字典"><span class="toc-number">5.4.</span> <span class="toc-text">实际应用中的字典</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#字典的基本操作"><span class="toc-number">5.4.1.</span> <span class="toc-text">字典的基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#原处修改字典"><span class="toc-number">5.4.2.</span> <span class="toc-text">原处修改字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他字典方法"><span class="toc-number">5.4.3.</span> <span class="toc-text">其他字典方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#语言表"><span class="toc-number">5.4.4.</span> <span class="toc-text">语言表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#字典用法注意事项"><span class="toc-number">5.4.5.</span> <span class="toc-text">字典用法注意事项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用字典模拟灵活的列表"><span class="toc-number">5.4.5.1.</span> <span class="toc-text">使用字典模拟灵活的列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字典用于稀疏数据结构"><span class="toc-number">5.4.5.2.</span> <span class="toc-text">字典用于稀疏数据结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#避免missing-key错误"><span class="toc-number">5.4.5.3.</span> <span class="toc-text">避免missing-key错误</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用字典作为”记录”"><span class="toc-number">5.4.5.4.</span> <span class="toc-text">使用字典作为”记录”</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么要在意字典接口"><span class="toc-number">5.4.6.</span> <span class="toc-text">为什么要在意字典接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建字典的其他方法"><span class="toc-number">5.4.7.</span> <span class="toc-text">创建字典的其他方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python-3-0中的字典变化"><span class="toc-number">5.4.8.</span> <span class="toc-text">Python 3.0中的字典变化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-3-0中的字典"><span class="toc-number">5.4.8.1.</span> <span class="toc-text">Python 3.0中的字典</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字典解析"><span class="toc-number">5.4.8.2.</span> <span class="toc-text">字典解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字典视图"><span class="toc-number">5.4.8.3.</span> <span class="toc-text">字典视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字典视图和集合"><span class="toc-number">5.4.8.4.</span> <span class="toc-text">字典视图和集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#排序字典键"><span class="toc-number">5.4.8.5.</span> <span class="toc-text">排序字典键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字典大小比较不再有效"><span class="toc-number">5.4.8.6.</span> <span class="toc-text">字典大小比较不再有效</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#has-key方法已死-in永生"><span class="toc-number">5.4.8.7.</span> <span class="toc-text">has_key方法已死:in永生</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#本章习题-4"><span class="toc-number">5.5.</span> <span class="toc-text">本章习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第九章-元组、文件及其他"><span class="toc-number">6.</span> <span class="toc-text">第九章 元组、文件及其他</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#元组-1"><span class="toc-number">6.1.</span> <span class="toc-text">元组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#实际应用中的元组"><span class="toc-number">6.1.1.</span> <span class="toc-text">实际应用中的元组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#元组的特殊语法-逗号和圆逗号"><span class="toc-number">6.1.1.1.</span> <span class="toc-text">元组的特殊语法:逗号和圆逗号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#转换、方法以及不可变性"><span class="toc-number">6.1.1.2.</span> <span class="toc-text">转换、方法以及不可变性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#转换"><span class="toc-number">6.1.1.2.1.</span> <span class="toc-text">转换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#方法"><span class="toc-number">6.1.1.2.2.</span> <span class="toc-text">方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#不可变性-1"><span class="toc-number">6.1.1.2.3.</span> <span class="toc-text">不可变性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么有了列表还要元组"><span class="toc-number">6.1.2.</span> <span class="toc-text">为什么有了列表还要元组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件-1"><span class="toc-number">6.2.</span> <span class="toc-text">文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#打开文件"><span class="toc-number">6.2.1.</span> <span class="toc-text">打开文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#处理模式"><span class="toc-number">6.2.1.1.</span> <span class="toc-text">处理模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#参数"><span class="toc-number">6.2.1.2.</span> <span class="toc-text">参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用文件"><span class="toc-number">6.2.2.</span> <span class="toc-text">使用文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实际应用中的文件"><span class="toc-number">6.2.3.</span> <span class="toc-text">实际应用中的文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Python-3-0中的文本和二进制文件"><span class="toc-number">6.2.3.1.</span> <span class="toc-text">Python 3.0中的文本和二进制文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在文件中存储并解析Python对象"><span class="toc-number">6.2.3.2.</span> <span class="toc-text">在文件中存储并解析Python对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用pickle存储Python的原生对象"><span class="toc-number">6.2.3.3.</span> <span class="toc-text">用pickle存储Python的原生对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件中打包二进制数据的存储和解析"><span class="toc-number">6.2.3.4.</span> <span class="toc-text">文件中打包二进制数据的存储和解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件上下文管理器"><span class="toc-number">6.2.3.5.</span> <span class="toc-text">文件上下文管理器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他文件工具"><span class="toc-number">6.2.4.</span> <span class="toc-text">其他文件工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重访类型分类"><span class="toc-number">6.3.</span> <span class="toc-text">重访类型分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#对象分类"><span class="toc-number">6.3.0.1.</span> <span class="toc-text">对象分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#要点"><span class="toc-number">6.3.0.2.</span> <span class="toc-text">要点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么要在意操作符重载"><span class="toc-number">6.3.1.</span> <span class="toc-text">为什么要在意操作符重载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对象灵活性"><span class="toc-number">6.4.</span> <span class="toc-text">对象灵活性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#引用-VS-拷贝"><span class="toc-number">6.5.</span> <span class="toc-text">引用 VS 拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#引用-1"><span class="toc-number">6.5.1.</span> <span class="toc-text">引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拷贝"><span class="toc-number">6.5.2.</span> <span class="toc-text">拷贝</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#比较、相等性和真值"><span class="toc-number">6.6.</span> <span class="toc-text">比较、相等性和真值</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Python-3-0的字典比较"><span class="toc-number">6.6.1.</span> <span class="toc-text">Python 3.0的字典比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python中真和假的含义"><span class="toc-number">6.6.2.</span> <span class="toc-text">Python中真和假的含义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#None对象"><span class="toc-number">6.6.2.1.</span> <span class="toc-text">None对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bool类型"><span class="toc-number">6.6.2.2.</span> <span class="toc-text">bool类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python的类型层次"><span class="toc-number">6.6.3.</span> <span class="toc-text">Python的类型层次</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Type对象"><span class="toc-number">6.6.4.</span> <span class="toc-text">Type对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Python中的其他类型"><span class="toc-number">6.7.</span> <span class="toc-text">Python中的其他类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#内置类型陷阱"><span class="toc-number">6.7.1.</span> <span class="toc-text">内置类型陷阱</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#赋值生成引用-而不是拷贝"><span class="toc-number">6.7.2.</span> <span class="toc-text">赋值生成引用,而不是拷贝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重复能够增加层次深度"><span class="toc-number">6.7.3.</span> <span class="toc-text">重复能够增加层次深度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#留意循环数据结构"><span class="toc-number">6.7.4.</span> <span class="toc-text">留意循环数据结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不可变类型不可以在原处改变"><span class="toc-number">6.7.5.</span> <span class="toc-text">不可变类型不可以在原处改变</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#本章习题-5"><span class="toc-number">6.8.</span> <span class="toc-text">本章习题</span></a></li></ol></li></ol>
    </div>
    
    <div class="back-top iconfont-archer">&#xe639;</div>
    <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
          <div class="sidebar-panel-archives">
    <!-- 在ejs中将archive按照时间排序 -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 47
        </div>
        <!-- search  -->
        
            <div class="site-search popup-trigger">
                <span class="iconfont-archer search-icon">&#xe627;</span>
            </div>
        
    </div>
    
    <div class="post-archive">
    
    
    
    
    <div class="archive-year"> 2019 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/26</span><a class="archive-post-title" href= "/2019/08/26/WP_2019OGeek/" >[WriteUp]2019OGeek</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/31</span><a class="archive-post-title" href= "/2019/07/31/WP_2019CISCN final/" >[WriteUp]2019CISCN final</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/07</span><a class="archive-post-title" href= "/2019/07/07/WP_2019WCTF/" >[WriteUp]2019WCTF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/02</span><a class="archive-post-title" href= "/2019/07/02/Asm_WASM格式化字符串攻击尝试/" >[Asm]WASM格式化字符串攻击尝试</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/22</span><a class="archive-post-title" href= "/2019/01/22/Code_Python可变类型的一些问题/" >[Code]Python可变类型的一些问题</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/13</span><a class="archive-post-title" href= "/2019/01/13/Asm_WASM初步/" >[Asm]WASM初步</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2018 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/20</span><a class="archive-post-title" href= "/2018/12/20/Binary_通过a的leak/" >[Binary]通过%a的leak</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/07</span><a class="archive-post-title" href= "/2018/12/07/WP_hxpCTF/" >[WriteUp]hxpCTF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/27</span><a class="archive-post-title" href= "/2018/11/27/WP_2018BCTF/" >[WriteUp]2018BCTF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/14</span><a class="archive-post-title" href= "/2018/11/14/Binary_IO_FILE源码分析/" >[Binary]IO_FILE</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/05</span><a class="archive-post-title" href= "/2018/11/05/Binary_ArmPwn/" >[Asm]ARMPwn</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/04</span><a class="archive-post-title" href= "/2018/11/04/WP_上海杯/" >[WriteUp]上海杯</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/27</span><a class="archive-post-title" href= "/2018/10/27/WP_HCTF/" >[WriteUp]HCTF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/27</span><a class="archive-post-title" href= "/2018/10/27/WP_湖湘杯/" >[WriteUp]湖湘杯</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/27</span><a class="archive-post-title" href= "/2018/10/27/WP_SECCONCTF/" >[WriteUp]SECCONCTF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/24</span><a class="archive-post-title" href= "/2018/10/24/Binary_Tcache/" >[Binary]Tcache</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/17</span><a class="archive-post-title" href= "/2018/10/17/Asm_RealmodeAsm/" >[Asm]RealmodeAsm</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/13</span><a class="archive-post-title" href= "/2018/10/13/WP_2018护网杯/" >[WriteUp]护网杯</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/06</span><a class="archive-post-title" href= "/2018/10/06/Binary_IDADynamic/" >[Binary]IDADynamic</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/05</span><a class="archive-post-title" href= "/2018/10/05/Linux_pwn环境搭建/" >[Linux]pwn环境搭建</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/05</span><a class="archive-post-title" href= "/2018/10/05/WP_DragonCTF/" >[WriteUp]DefCampCTF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/05</span><a class="archive-post-title" href= "/2018/10/05/WP_InCTF/" >[WriteUp]InCTF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/28</span><a class="archive-post-title" href= "/2018/09/28/Binary_PDF/" >[Binary]PDF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/27</span><a class="archive-post-title" href= "/2018/09/27/Linux_GDB的python调试/" >[Linux]GDB的Python调试</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/27</span><a class="archive-post-title" href= "/2018/09/27/Linux_GDB/" >[Linux]GDB</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/25</span><a class="archive-post-title" href= "/2018/09/25/WP_DefCampCTF/" >[WriteUp]DefCampCTF</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/18</span><a class="archive-post-title" href= "/2018/09/18/Android_JNI/" >[Android]JNI</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/18</span><a class="archive-post-title" href= "/2018/09/18/BInary_HeapExploit/" >[Binary]HeapExploit</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/13</span><a class="archive-post-title" href= "/2018/09/13/Binary_IO_FILE/" >[Binary]IO_FILE</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/10</span><a class="archive-post-title" href= "/2018/09/10/Linux_GDB的源码调试/" >[Linux]GDB源码调试</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/01</span><a class="archive-post-title" href= "/2018/09/01/Binary_ptmalloc源码分析/" >[Binary]ptmalloc源码分析</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/25</span><a class="archive-post-title" href= "/2018/08/25/WP_pwnable.tw/" >[WriteUp]pwnable.tw</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/21</span><a class="archive-post-title" href= "/2018/08/21/Code_Python学习手册_7/" >[Code]Python学习手册_第七部分_异常和工具</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/21</span><a class="archive-post-title" href= "/2018/08/21/WP_网鼎杯/" >[WriteUp]网鼎杯</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/14</span><a class="archive-post-title" href= "/2018/08/14/Code_Python学习手册_6/" >[Code]Python学习手册_第六部分_类和OOP</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/13</span><a class="archive-post-title" href= "/2018/08/13/WP_JarvisOJ/" >[WriteUp]JarvisOJ</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/10</span><a class="archive-post-title" href= "/2018/08/10/Code_Python学习手册_5/" >[Code]Python学习手册_第五部分_模块</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/05</span><a class="archive-post-title" href= "/2018/08/05/Code_Python学习手册_4/" >[Code]Python学习手册_第四部分_函数</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/05</span><a class="archive-post-title" href= "/2018/08/05/Binary_Heap/" >[Binary]Heap</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/30</span><a class="archive-post-title" href= "/2018/07/30/Linux_INT80/" >[Linux]int 80</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/30</span><a class="archive-post-title" href= "/2018/07/30/Code_Python学习手册_3/" >[Code]Python学习手册_第三部分_语句和语法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/25</span><a class="archive-post-title" href= "/2018/07/25/Binary_Canary/" >[Binary]Canary</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/24</span><a class="archive-post-title" href= "/2018/07/24/Code_Python学习手册_2/" >[Code]Python学习手册_第二部分_类型和运算</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/22</span><a class="archive-post-title" href= "/2018/07/22/Binary_fmt/" >[Binary]FormatString</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/21</span><a class="archive-post-title" href= "/2018/07/21/Code_Python学习手册_1/" >[Code]Python学习手册_第一部分_使用入门</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/21</span><a class="archive-post-title" href= "/2018/07/21/WP_巅峰极客/" >[WriteUp]巅峰极客</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/22</span><a class="archive-post-title" href= "/2018/01/22/Code_Python的C拓展/" >[Code]Python的C拓展</a>
        </li>
    
    </div>
  </div>
        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
    
        <span class="sidebar-tag-name" data-tags="Note"><span class="iconfont-archer">&#xe606;</span>Note</span>
    
        <span class="sidebar-tag-name" data-tags="Assembly"><span class="iconfont-archer">&#xe606;</span>Assembly</span>
    
        <span class="sidebar-tag-name" data-tags="WASM"><span class="iconfont-archer">&#xe606;</span>WASM</span>
    
        <span class="sidebar-tag-name" data-tags="Binary"><span class="iconfont-archer">&#xe606;</span>Binary</span>
    
        <span class="sidebar-tag-name" data-tags="Pwn"><span class="iconfont-archer">&#xe606;</span>Pwn</span>
    
        <span class="sidebar-tag-name" data-tags="Heap"><span class="iconfont-archer">&#xe606;</span>Heap</span>
    
        <span class="sidebar-tag-name" data-tags="Canary"><span class="iconfont-archer">&#xe606;</span>Canary</span>
    
        <span class="sidebar-tag-name" data-tags="IDA"><span class="iconfont-archer">&#xe606;</span>IDA</span>
    
        <span class="sidebar-tag-name" data-tags="Linux"><span class="iconfont-archer">&#xe606;</span>Linux</span>
    
        <span class="sidebar-tag-name" data-tags="Asm"><span class="iconfont-archer">&#xe606;</span>Asm</span>
    
        <span class="sidebar-tag-name" data-tags="Android"><span class="iconfont-archer">&#xe606;</span>Android</span>
    
        <span class="sidebar-tag-name" data-tags="Tcache"><span class="iconfont-archer">&#xe606;</span>Tcache</span>
    
        <span class="sidebar-tag-name" data-tags="PDF"><span class="iconfont-archer">&#xe606;</span>PDF</span>
    
        <span class="sidebar-tag-name" data-tags="Code"><span class="iconfont-archer">&#xe606;</span>Code</span>
    
        <span class="sidebar-tag-name" data-tags="Python"><span class="iconfont-archer">&#xe606;</span>Python</span>
    
        <span class="sidebar-tag-name" data-tags="GDB"><span class="iconfont-archer">&#xe606;</span>GDB</span>
    
        <span class="sidebar-tag-name" data-tags="Gdb"><span class="iconfont-archer">&#xe606;</span>Gdb</span>
    
        <span class="sidebar-tag-name" data-tags="Pwntools"><span class="iconfont-archer">&#xe606;</span>Pwntools</span>
    
        <span class="sidebar-tag-name" data-tags="Qemu"><span class="iconfont-archer">&#xe606;</span>Qemu</span>
    
        <span class="sidebar-tag-name" data-tags="CTF"><span class="iconfont-archer">&#xe606;</span>CTF</span>
    
        <span class="sidebar-tag-name" data-tags="WriteUp"><span class="iconfont-archer">&#xe606;</span>WriteUp</span>
    
        <span class="sidebar-tag-name" data-tags="Re"><span class="iconfont-archer">&#xe606;</span>Re</span>
    
        <span class="sidebar-tag-name" data-tags="CTFtime"><span class="iconfont-archer">&#xe606;</span>CTFtime</span>
    
        <span class="sidebar-tag-name" data-tags="IO_FILE"><span class="iconfont-archer">&#xe606;</span>IO_FILE</span>
    
        <span class="sidebar-tag-name" data-tags="StackOverflow"><span class="iconfont-archer">&#xe606;</span>StackOverflow</span>
    
        <span class="sidebar-tag-name" data-tags="Arm"><span class="iconfont-archer">&#xe606;</span>Arm</span>
    
        <span class="sidebar-tag-name" data-tags="Cpp"><span class="iconfont-archer">&#xe606;</span>Cpp</span>
    
        <span class="sidebar-tag-name" data-tags="Java"><span class="iconfont-archer">&#xe606;</span>Java</span>
    
        <span class="sidebar-tag-name" data-tags="JNI"><span class="iconfont-archer">&#xe606;</span>JNI</span>
    
        <span class="sidebar-tag-name" data-tags="Fmt"><span class="iconfont-archer">&#xe606;</span>Fmt</span>
    
        <span class="sidebar-tag-name" data-tags="IntegerOverflow"><span class="iconfont-archer">&#xe606;</span>IntegerOverflow</span>
    
        <span class="sidebar-tag-name" data-tags="Cfunc"><span class="iconfont-archer">&#xe606;</span>Cfunc</span>
    
        <span class="sidebar-tag-name" data-tags="HouseOfRoman"><span class="iconfont-archer">&#xe606;</span>HouseOfRoman</span>
    
        <span class="sidebar-tag-name" data-tags="ShellCode"><span class="iconfont-archer">&#xe606;</span>ShellCode</span>
    
        <span class="sidebar-tag-name" data-tags="FastbinAttack"><span class="iconfont-archer">&#xe606;</span>FastbinAttack</span>
    
        <span class="sidebar-tag-name" data-tags="HeapOverflow"><span class="iconfont-archer">&#xe606;</span>HeapOverflow</span>
    
        <span class="sidebar-tag-name" data-tags="StackOvrtflow"><span class="iconfont-archer">&#xe606;</span>StackOvrtflow</span>
    
        <span class="sidebar-tag-name" data-tags="wargame"><span class="iconfont-archer">&#xe606;</span>wargame</span>
    
        <span class="sidebar-tag-name" data-tags="SystemCall"><span class="iconfont-archer">&#xe606;</span>SystemCall</span>
    
        <span class="sidebar-tag-name" data-tags="XCTF"><span class="iconfont-archer">&#xe606;</span>XCTF</span>
    
        <span class="sidebar-tag-name" data-tags="Fastbin"><span class="iconfont-archer">&#xe606;</span>Fastbin</span>
    
        <span class="sidebar-tag-name" data-tags="FormatString"><span class="iconfont-archer">&#xe606;</span>FormatString</span>
    
        <span class="sidebar-tag-name" data-tags="OJ"><span class="iconfont-archer">&#xe606;</span>OJ</span>
    
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
    缺失模块。<br/>
    1、请确保node版本大于6.2<br/>
    2、在博客根目录（注意不是archer根目录）执行以下命令：<br/>
    <span style="color: #f75357; font-size: 1rem; line-height: 2rem;">npm i hexo-generator-json-content --save</span><br/>
    3、在根目录_config.yml里添加配置：
    <pre style="color: #787878; font-size: 0.6rem;">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: true
    tags: true</pre>
    </div> 
    <div class="sidebar-tags-list"></div>
</div>
        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
        <span class="sidebar-category-name" data-categories="Assembly"><span class="iconfont-archer">&#xe60a;</span>Assembly</span>
    
        <span class="sidebar-category-name" data-categories="Binary"><span class="iconfont-archer">&#xe60a;</span>Binary</span>
    
        <span class="sidebar-category-name" data-categories="Code"><span class="iconfont-archer">&#xe60a;</span>Code</span>
    
        <span class="sidebar-category-name" data-categories="Linux"><span class="iconfont-archer">&#xe60a;</span>Linux</span>
    
        <span class="sidebar-category-name" data-categories="WriteUp"><span class="iconfont-archer">&#xe60a;</span>WriteUp</span>
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>
    </div>
</div> 
    <script>
    var siteMeta = {
        root: "/",
        author: "骑麦兜看落日"
    }
</script>
    <!-- CDN failover -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ === 'undefined')
        {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js">\x3C/script>')
        }
    </script>
    <script src="/scripts/main.js"></script>
    <!-- algolia -->
    
        <div class="site-search">
  <div class="algolia-popup popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="iconfont-archer">&#xe609;</i>
    </span>
  </div>
</div>
        <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.8.0/dist/instantsearch.min.js" defer></script>
        <script src="/scripts/search.js" defer></script>
    
    <!-- busuanzi  -->
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- CNZZ  -->
    
    </div>
    <!-- async load share.js -->
    
        <script src="/scripts/share.js" async></script>    
     
    </body>
</html>


